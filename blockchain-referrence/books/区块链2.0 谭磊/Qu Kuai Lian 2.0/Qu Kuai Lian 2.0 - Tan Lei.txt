作者简介




谭磊

全球互联网技术、数据运营、数据分析挖掘领域的资深专家。复旦大学计算机学士，美国杜克大学计算机硕士。中国工业设计协会CIO，曾经在美国微软总部服务13年。在数据分析、数据挖掘、云计算、产品研发及管理、互联网广告等方面有丰富的经验。《New Internet：大数据挖掘》、《数据掘金：电商数据运营》等七本专业书的作者和译者。



陈刚

英文名Jerry，昵称：金融大叔。资深财经媒体人，高戎汇资本创始人、盖事总经理，多家创业公司顾问。曾经效力于第一财经、东方财富网和中金在线。





内容简介

区块链是脱胎于比特币协议的分布式技术，它同时又是一个完美的信用系统。区块链的原理和特性决定其先天肩负着重构金融在内的各行业未来形态的使命，更有甚者寄希望于由其来创造更理想的世界。鉴于很多人对区块链的认识还停留在“币时代”，本书旨在通过推出区块链2.0这一全新概念，真实呈现区块链的缘由和本质，通俗讲解区块链技术的原理和奥义，完整描绘区块链的应用和趋势。书中既有真实案例，又有严谨推导，更有原创设计，对相关决策者、从业者、学术研究者及普罗大众而言，都是极具新意与实用价值的绝佳资料。





未经许可，不得以任何方式复制或抄袭本书之部分或全部内容。


版权所有，侵权必究。


图书在版编目（CIP）数据


区块链2.0／谭磊，陈刚著．—北京：电子工业出版社，2016.4

ISBN 978-7-121-28291-1

Ⅰ．①区…　Ⅱ．①谭…　②陈…　Ⅲ．①电子商务—支付方式—研究　Ⅳ．①F713.36

中国版本图书馆CIP数据核字（2016）第046482号


策划编辑：张春雨

责任编辑：王静

印　　刷：三河市兴达印务有限公司

装　　订：三河市兴达印务有限公司

出版发行：电子工业出版社

北京市海淀区万寿路173信箱　邮编：100036

开　　本：787×980　1/16　印张：14.75　字数：288千字

版　　次：2016年4月第1版

印　　次：2016年6月第2次印刷

定　　价：55.00元


凡所购买电子工业出版社图书有缺损问题，请向购买书店调换。若书店售缺，请与本社发行部联系，联系及邮购电话：（010）88254888，88258888。

质量投诉请发邮件至zlts@phei.com.cn，盗版侵权举报请发邮件至dbgq@phei.com.cn。

本书咨询联系方式：010-51260888-819　faq@phei.com.cn





总序　区块链与互联网秩序


互联网金融在中国遇到了麻烦，它从颠覆者变成了有些破坏性的熊孩子。不是插上互联网的标签就会显灵，金融行业最基本的诚信和风险控制问题仍然在那里：行业在创新，骗子也在创新。

在欧美，从来没有人用“互联网金融”这个词，如果大家讲的是一回事儿，则他们的说法是“金融科技”（FinTech）。虽然欧美等国的政府没有支持“互联网金融”，但已经有多个国家的政府在积极研究、尝试推广区块链技术，其不仅能用于金融、银行、保险、物流、能源等领域，也能用于社保、医保、知识产权保护等政府服务本身。

区块链源自P2P。P2P就是把需要下载的文件分成无数碎块，并扩散到不同的电脑中，这些电脑之间可以分别承担一些碎块的下载任务，同时彼此传输已经获得的碎块，最终各台电脑都可以根据需要合成一个完整的文件。网络视频公司是最早大量使用P2P技术的行业，因而它们也是最早对区块链技术感兴趣的行业。P2P技术实现了众多电脑之间点对点的计算、存储、传输，开辟了分布式的存储。

正如网络中的电脑共同维护一个视频文件的完整性一样，人们在通过网络进行交易时，一件数字资产的整个交易过程会被记录在“账本”上，这个“账本”是由网络中的电脑共同维护的，不掌握在某个机构或者个人手中，它是分布式账本。R3公司CTO布朗（Richard G Brown）说过：“当账本中加入一批条目时，也加入了上一个批次的索引值，让所有参与者都可以验证账本上所有条目的出处。这些批次就被称为‘区块’，而所有区块在一起则被称为‘区块链’”。

P2P因为最初被广泛用于盗版音乐及影视的下载与传播而饱受非议，而区域链是比特币的底层技术，比特币因为“丝绸之路”事件而被一些货币监管机构视为洪水猛兽。但技术是中性的，关键看谁用以及怎么用。区块链技术符合开源与分布的互联网和软件技术的大趋势。这些技术带来的分享、高效、民主化、去中心化、基于透明的信任，在互联网普及之后，有了广泛的应用前景。

那么问题来了——如果这些应用是非机构化、去中心化、分散化的，那么秩序在哪儿？

集权式的秩序不需要高度的信任，而分布式的秩序则需要高度的信任。信任是最重要的社会资本，由理念、规则、法律、治理等长期积累而成。区块链有助于建立非人格化的信任，为演变出新型的数字经济和网络秩序提供了一种可能。

区块链技术产生的一个前提是人们面临传递信息和建立信任的困境，这被分布式计算数学家称为“拜占庭将军”问题（书中自有精彩处，此处删去300字）。区块链技术是“无须信任”（trustless）的，但区块链技术通过对网络上的每一笔交易建立集体核查的完整数据库，从而建立起算法式信任，解决了陌生人之间不信任的问题。

这种摆脱人格的信任关系是由代码、协议、规则建立起来的，在中国这样一个诚信度不高、金融监管水平不高、金融风险高的经济环境中，有非常广泛的应用场景，其被许多金融技术专家热捧为金融业的下一个大事件。从某种意义上来说，这也为中国的互联网金融的健康发展打开了一扇新的大门。

不仅限于金融，信任是整个数字经济的基石，而区块链令人兴奋之处，正是其可能通过分布式账本技术，治疗中国经济中的两个顽疾：消费中的假货和金融中的欺诈。

分布式账本技术也可以用来清晰界定和保护财产权，例如数字货币、房地产交易、证券交易等都是所有权频繁变化的领域。那些在网络上广泛传播的作品，原创者的权益如何得到保护？区块链技术可行！法治、监管、权利、效率、诚信是服务经济的内在要求，如果把法律与代码有效地结合起来，则区块链可以帮助补上中国经济的这些“短板”。

《区块链2.0》从技术、应用、产业等方面对区块链2.0进行了详尽的分析，展示了创业创新的机会，但令我脑洞大开的是区块链技术带来的一种新的可能——给互联网带来秩序。

周健工

第一财经传媒有限公司首席执行官，福布斯中文版前总编辑





推荐序一　金融的天　信任的石来补


我不知道你是否有过这样的经历：你来到一家珠宝商店，店主殷勤地向你推销一枚一克拉的钻戒，并且拿出了一张精美的钻石证书。你会信任他吗？一张证书能够证明钻石的品质和来源吗？你一定充满了疑问。无论买与不买，交易双方都付出了因为信任不足带来的交易成本。

你也许在想，在你的生意中似乎也存在类似的问题。如果你从事金融工作，则这样的问题几乎出现在所有的交易中，尽管今天整个行业投入了惊人的成本搭建起了各种清算设施；如果你从事投资工作，则一定熟悉严肃的股权工商登记流程，这是纳税人在为一个中心化公证机构埋单；如果你从事招聘工作，则一定会发现大规模的简历验真是一件可望而不可即的事情；如果你从事销售工作，则每天一定会重复着繁重的商品盘点工作；如果你从事慈善工作，则一定知道大量的行政成本花在开支的透明记录和审计上，因为必须要让资助人保持信任。

你会发现，几乎所有商业问题的本质都是信任问题。尽管我们已经拥有了发达的基础设施，每个行业背后都有无数的人在努力和投入，但依然有大量的信任问题没有得到解决，即使解决了，也要付出高昂的成本，同时伴随着可能出现差错、交易流失的遗憾。

区块链技术起源于比特币应用，区块链2.0就是指在虚拟货币领域之外的应用，而金融行业当然首当其冲，所以本书用了比较大的篇幅来介绍区块链技术在金融行业的应用，包括数据挖掘、征信和信用、超级账本、证券和支付等。但是我鼓励读者读完本书的第8章和第9章。尽管今天我们无法足够具象地描述区块链技术在金融行业之外的应用实现方案、商业模式，但从技术原理上来说，通过算法和P2P网络来建立的互信机制毫无疑问是可靠和低成本的，本书中也详细介绍了5个来自非金融行业的具体案例。

利用区块链技术来解决商业信任问题、降低交易成本、扩充交易机会，是商业科技领域在未来10年的一大命题。这当中当然有难以逾越的鸿沟，其中最重要的莫过于人才，只有理解和熟悉区块链技术原理，并且了解特定行业具体问题和运作模式的创业者才有可能在新领域中有所建树。所以，我要热情地向有志在这个领域创业的人推荐这本谭磊先生和陈刚先生合著的《区块链2.0》，它从发展沿革、技术原理和商业图景方面为读者提供了一个信息丰富的蓝图，定能启发你的思路。

任向晖

梅花网和明道创始人





推荐序二　对未知世界保持谨慎的狂热


人类重新发现世界的速度常常超出自身的想象。从理论设想到科学验证，再到技术应用，这3个阶段的间隔正在被缩短，甚至合而为一。比特币和区块链概念的出现正是对这一判断的完美阐释。

区块链技术是一种基于大数据共享理论而存在的基础技术，其对于各个传统行业的改造尚处在早期试探阶段。未来，区块链技术还可以应用在互联网业务、政府公开信息、电子证据、数据安全等领域。从远期来看，它对传统世界的改造甚至可能触及经济领域之外。

不过，金融业因为具备信用、杠杆和风险三大关键要素，对于信息的传输速度和安全性有着超出其他行业更高的要求。金融业对于处在风口之中的区块链技术有着更强烈的呼唤。

全球各国央行系统普遍对比特币这种去中心化的金融产品持谨慎态度，不过其基础架构——区块链却正春风得意。

截至2015年年底，有媒介信息显示，包括纳斯达克、纽约证券交易所、花旗银行在内的数十个金融机构都在开展区块链在金融领域的创新。

2016年春节期间，中国人民银行行长周小川在接受媒体专访时罕见地表示，区块链技术是一项可选的技术。

把时钟拨回到十余年前，彼时P2P技术刚刚应用于金融业，方兴未艾。这是信息行业中的“对等计算”对传统银行业的系统性改造。

区块链技术和P2P技术的共同点在于，它们都基于去中心化的共享思想。

去中心化的优势在于，可以更有效率地调配资源，避免发生系统性风险。

当然，这需要基于信息中介是一个完善甚至完美的工作平台。去中心化不意味着去中介化，数字信息生成、存储、流转的部分流程仍需要物理空间和真实载体。一旦这些载体因人类对于技术的认知有缺陷而产生风险，就会伤及人类本身，有些伤害甚至是不可逆转的。

时至今日，早已被证明如天降甘霖般拯救了人类的网络传输都偶有失灵。在大量交易集中提交之时，交易所的网络“宕机”便是信息传导失灵造成的金融恶果，这当然有悖于网络技术为全民服务的初衷。

在2000年之后，科技与金融业的融合呈狂飙突进之势。中国科技金融界的同仁们也正呼唤并参与到这一趋势中来。

谭磊先生和陈刚先生所著的《区块链2.0》恰逢其时，这本书既讲解了技术演进思想，又说明了“掌控风险”与“掌控未来”两者之间应处理好平衡关系。在技术再改造的大背景下，本书应得到读者和社会的关注，处在技术改造阶段的我们也应不断回到书中，寻找沉淀的思想。

可以想象，在有生之年，我们无法见到科技与金融融合的最终形态，未来似乎也不会有，因为我们一直在路上。对于科技的呼唤，对于未知世界的探索，我们始终保持谨慎的狂热，既不错过美好的时代，又不贪功冒进让它伤害到我们本身。

董骏

积木盒子创始人兼CEO





推荐序三　金融创新众生相背后的不变初心


收到陈刚兄弟的《区块链2.0》一书的内容介绍，欣然同意为其写序，是因为作为互联网金融从业者，我特别清楚新思维和技术在金融领域的创新过程中意义重大，而让更多的人更早地了解这些，是一件有点儿功业的事情。

我从2003年开始从事第三方支付工作，直到前几年开始执掌拍拍贷的业务，亲眼看到和参与了国内互联网金融的很多发展，其中有一个感受颇为强烈。从懵懵懂懂地作为银行支付的补充手段开始，金融和互联网在悄无声息中开始了相互结合与渗透，这种结合就像是一个质量巨大的球体开始滚动，在初期很困难，因为要克服自身巨大的质量，但随着技术与业务在底层快速地衔接与融合，这个巨大的球体逐渐开始加速滚动，前两年伴随着余额宝和P2P的迅猛发展，越来越多的人逐渐感受到了它的威力。但不幸的是，当巨大的风刮起后，率先击中人们的不是球体本身，而是顺势卷起的飞沙走石。很多人似乎脱离了价值起源，也忽略了技术创新背后的初心。

而事实上，在这场犹如川剧变脸一般，陆续以不同表现形式包装着业务扑面而来的金融技术革命的背后，是一个质朴而不变的初衷：金融的去中介化和去中心化。前者是通路上的变革，后者是思维和组织结构上的变革。从最初的以物易物，到货币的诞生，金融首先围绕和服务的就是如何更高效地进行价值转移这个目的，这是一个螺旋上升的发展过程。在最初的世界里，在以物易物的社会经济组织中，其实是没有中介，也没有中心的，我用我的一头牛置换你的三匹布，如此而已。后来为了提高价值交换的效率，拓展其时空局限，于是有了货币，进而有了结算的要求；而货币一旦开始标注价值，货币发行的信用就是一个首要问题。传统上有两种挂靠和衡量方式，一种是挂靠一个具体资产，另一种是相信政府的信用。现在来讲，当代社会就是建立在相信政府信用发行的货币与社会资产价值——对应基础上形成的法币体系基础上的。但区块链技术和思维讲的是我们可以换一个角度，把这种信任建立在对货币背后的发行的算法和程序基础上，这是一种可以被任何人审视的算法，这种算法就是一种协议，被大家公认之后，价值就在这个协议的标准上进行传递，犹如信息的传递，即时而成本最低。同时，算法本身要保证在价值传递的过程中不被随意“制造”和“篡改”。如此，价值转换所依赖的核心就是协议本身，而不是通过中心计算和分配来进行。在一个中心化的世界中，有了中心，也就有了各种成本，而一旦处理量上去，中心处理的效率就会下降。在这两年风生水起的P2P金融，就是一个典型的去中心化的金融形式，它是依赖大数据的风控技术建设撮合平台完成融资的去中心化，当然我指的是真正的P2P金融；而区块链则更具有颠覆性，其直接通过分布式计算方式和创建价值交换的协议，完成价值转移的去中心化。而这两者的诞生，又有着不太相同的“背景”。P2P之所以在最近几年可以真正有机会发展起来，不是因为这个思维方式刚刚发展起来，而是因为处理大数据的技术能力和硬件基础在最近几年大幅度发展，从而使其关键能力大数据风控有实现的前提；不管是区块链1.0、2.0还是3.0，其依赖的协议技术和编程能力不是今天才有的，但是伴随着数据爆炸、物联网发展、即时交易等发展要求，我们逐渐会发现现有的中心化体系和结构问题会越来越大，当然区块链所依赖的庞大的数据库记录和计算的技术，也和现在的技术发展有关。

区块链的大幕已经逐渐拉开，希望有越来越多的同行关注和一起研究、推动它在中国的健康发展，如此我想陈刚兄弟之心也满足了。佛陀说，万象归一。在各种风起云涌的金融潮汐背后，只要站稳立场，面对那份不变的简单初心就好。

周浩

恒大互联网集团首席市场官，拍拍贷前执行副总裁





序言　互联网金融第二弹


2013年，互联网金融大潮兴起，在几位来自阿里巴巴等互联网金融一线同学的撺掇下，我和宋海旭同学合作了一本书：《盛宴背后：互联网金融揭秘》。和其他描绘互联网金融美好前景的书不一样，该书花了更多的篇幅为读者介绍互联网金融背后的原理，而其中的一个核心观点“基于数据做决定”同样也会成为本书的核心观点之一。

自2015年起，互联网金融领域进行了一轮深度的洗牌，在乱象背后，我们很欣喜地看到在互联网金融领域出现了一些真正的创新，有些趋于理想化的故事在两年之后成了现实或者即将成为现实。

同样地，从2015年开始，“区块链”作为一项实现“共享经济”的技术进入了人们的视野。最初，这个概念只不过是作为比特币的同义词出现的，不过大家很快发现，区块链技术及其理念可以用在金融领域的其他地方，甚至应用到其他的各行各业中。

区块链系统能够实现去中心化，整个系统上的节点是对等的，每个节点可以自由加入和离开，并且对整个系统的运行没有影响；区块链系统不需要一个中心的管理机构，所有的节点都是按照一个规则在行事；区块链系统上所有的交易和过程都是按照一定的规则或合约执行的，所有的交易都是可追溯且不可逆的。这种方式颠覆了以往的中心化系统的理念，即便一家互联网公司能够覆盖全球的系统，它依然是有中心的。在2015年发生的多起因光缆被挖断导致互联网公司服务中断的事件，其原因也正是如此。

笔者当年在Duke University（杜克大学）的Fuqua School of Business商学院蹭课的时候，最感兴趣的课程是“Futures and Options”（期货和期权）。金融衍生品的操作可能是金融领域中最有趣的，它们提供了无限可能。从理论上讲，这个领域应该能实现完全的自动化；不过事实上，今天的系统仍然需要不少人工操作和干预。一旦发现问题，可能就需要人工重复对账，其混乱和复杂程度让人难以想象。

金融是一个很严谨的话题，区块链是一个很技术的话题，共享经济是一个很哲学的话题。我们的观点是：“一切不以实际应用为目的的技术都是耍流氓”。

2015年的区块链领域很热闹，2016年会更加热闹。我们看到有很多企业都在做各种创新和尝试，相信在这个领域中会出现不止一家“独角兽”公司。我们认为，最终胜出的这些企业拥有的能力不只是对比特币的了如指掌，不只是懂得构建具有某些特性的区块链。他们更需要有对行业的丰富经验，需要知道如何把区块链系统应用到某一个行业中，甚至原先他们可能和比特币领域并没有任何关系，重要的是他们拥有能够创建新的应用来颠覆某一个行业的能力。

我们认为重要的不是区块链这项技术，而是它的底层算法和设计理念。我在研读这项技术的时候，查阅了很多资料，看了很多博客上的争辩，也读了很多人写的文章，包括Melanie Swan的《区块链：新经济蓝图》。说实话，虽然我硬着头皮从头到尾研读了原文，却很怀疑抱着想了解区块链技术目的的同学在看完之后是否会变得更加糊涂。为了不犯同样的错误，在本书中我们尽量少用晦涩的技术用语和哲学词汇，而是用读者可以理解的语言来讲述区块链技术、互联网金融、共享经济，以及相关应用的概念。

如果亲爱的读者看完本书之后知道了区块链究竟是什么，能够从书中找到一些灵感，从而对区块链有更深的理解，想到在他们身处领域里可以如何应用区块链，甚至加入我们的行列一起来研究区块链的实际应用，那么我们的目的就达到了。

这本书不是一个人战斗的成果。在这本书的写作过程中，我得到了很多人的帮助和建议。感谢迅雷的刘智聪同学、挖财的顾晨炜同学、顺丰金融的张慧同学、宝丽晋阳的邵腾同学和金官丁同学在写作过程中给我们提供的帮助，感谢区块链社区的巨蟹、咕噜、达叔、初夏虎、Hitters、孙铭、Leo给予我们的启发。感谢联讯证券的唐一端给予的鼓励。特别感谢在区块链技术应用领域做深度研究的栾绍春和于滨同学，没有他们的帮助是不会有这本书的。当然最需要感谢的是我的父亲谭教授，当我在码字的时候，他为我做好后勤服务，让我过了一个“衣来伸手，饭来张口”的春节。

如果书中哪个部分写得不够好，或者读者认为我们的某些观点有失偏颇，则请务必不吝赐教，让我们共同进步。

谭磊Raymond

技术大叔，多家互联网公司的联合创始人

Facebook.com/tanlei/tanleibooks

2016年春节





前言　金融大叔的梦想


国际权威杂志《经济学人》《福布斯》等相继报道区块链技术将影响世界。如今区块链正如风暴一般，席卷全球的金融科技界。

区块链承载自由与平等的梦想

这些自由与平等的愿望，在从桌面互联网发展到移动互联网的二十几年时间里，愈演愈烈。虽说海量的互联网能自由地传递信息，但它无法区分信息的真假，也无法证明信息的真假。互联网巨头带给网络用户良好的用户体验，可是本质上，它还是中央集权的。于是来自前沿的金融科技学者们正在思考，未来有没有这样一种可能：建立去中心化、信息可信任、依靠广大网民自主建立的全球性基础协议。

换句话说，这次要改变的是互联网的治理规则。

区块链可以不依赖任何中心，独立建立一个不能重复支付的系统，它规定每10分钟进行一次全网记账簿的同步，每个节点都记账，每一笔账都要盖上时间戳，全网核实见证，由时间戳和全网数以万计的网民做公证，其造假的可能性几乎不存在。

好东西，得用，才有价值。

显而易见，区块链的首席应用领域应该是金融行业。西班牙的Santander银行认为，到2022年，区块链技术能够帮助金融行业降低200亿美元的记账成本。现今，无论是银联还是支付宝都是中心化机构运营，货币转移要通过第三方机构，这使得跨境交易、货币汇率、内部核算等成本过高，并给资本带来了风险。

今天，全球的金融科技界基本都认可了区块链全网分布式记账的特点，那么，毫无疑问，这将是区块链向世界讲述的第一个商业故事。在这本书里，你会看到我们对于区块链分布式记账的一些商业应用的介绍和设想。

区块链思想的探究

任何技术的创想首先来自于思想体系的建设，而思想体系的建设来自于意识形态的联结。

在建立商务关系的合作时，我们会选择签订一份合同——纸质合同或电子合同。这些合同基本都是建立在人与物的关系上的。那么有没有一种新的合约可以真正追溯信任？在金融的世界里到底有没有公平、民主与自由？

区块链技术是思维模式的变革，是生产关系与生产力的倒转，是社会生态平衡最后的涅槃，是金融体系与社会体系的无缝衔接，是自由世界平等主义的召唤与运动。社会信用体系的终结不是完善再完善，而是将信用体系放置在计算机的算法和程序里。中国如火如荼的征信业态的建设永远无法完美，一直停留在改良和机构约束阶段，依旧是机构信任的传统思路。

唯有算法的信任，才是终结模式的完美收官。

之后，人类将进入人机文明的共存时代。算法与程序主导的新文明让人类进入一段忧伤的时光，人类进入强人工智能的世界，万物相联，一切的价值资产皆为代码，以算法存在万物之中。不要阻止文明的进化，更不要阻止趋势。

区块链技术重新定义：信任

桌面互联网和移动互联网二十多年的光辉好景已经迎来夕阳的最后日照。科技的进步将我们带入物物相联的新世界。这个全新的智能世界将由数据和算法驱动。金融科技是商业社会变革的基础力量，区块链技术的去中心化思想在理论体系上逐渐成熟，接下来就是实现商业场景的应用。

金融的交易源于信任。然而人与人之间的信任是建立在高昂的时间成本与心智的高频磨合上的，这样的信任，脆弱不堪。人与人之间的关系最大的缺点就是不稳定。

科技的发展并不是人类的需求，而是早已存在于那里。人类并不存在所谓的发明与创造，只是在应该发现的时候发现了，正如任何事情的发生，你在某个时候遇到某一个人，绝对没有偶然。因为，它本来就存在于那里。

信任的原理是点与点的链接，存在于物理和数字空间中，存在于真实与虚拟世界中，它或许在某一个空间中，或许存在于两个不同的空间中，这两个空间有着天然的链接，是分布式的，没有中心化的存在。信任关系链条里活动的是信用代码，而每一个信用代码代表对应的数字资产。资产通过算法转化为代码，代码形成程序，程序驱动着链接，而信任的链接是在一个系统里，经历注册、登记、交易，一切都在程序里进行，一切都在0和1之间转化。这里没有权威，没有意见领袖。这是一个纯天然的社区，一个去中心化的社区，是协作式的，而其基础架构就是区块链技术。这就是算法式信任的原理。

算法式信任是机构式信任天然的敌人。正如草根金融发动的互联网金融革命是对权贵金融的挑战一样，这会引起后者的不安，但更深层次的意义是引发后者思考，继而进行自我变革。

作为金融科技的终极模式，区块链技术必然先从金融领域实现突破。

趋势不以任何人的意志为转移，笔者预测，人类“发现”的人工智能最终会打败人类。请注意，这里用的词是“发现”而不是“发明”。发现是看到了原本就存在的事物，而发明是发现文明。当每个人都在说趋势时，趋势已经发生了。你所说的未来，其实已经到来。伟大的心灵学者告诉你，要活在当下，其实是说要相信未来。因为当下即未来。所谓保持一颗平常心就是保持一颗未来心。

即将开启的新的文明本质是自由和意志。这个新文明与强人工智能的发现将是同步的。区块链技术的成熟是与超级人工智能相匹配的。人工智能时代的金融将被定义为物联网金融。人类正在脑洞大开。这就是进化的力量！爱因斯坦和霍金早已开启“发现”，而“证明”要靠我们这一代人和下一代人。如果2045年奇点时刻可以来临，那么我们将是这个文明时代最幸运的人。

相信未来是一种能力

在过去，我们写一封信，要通过邮递员或者飞鸽传送。我们看上了街上的一个姑娘，要通过媒婆去上门提亲。我们想把家里的鸡卖了换成棉被，于是我们到集市上去。我们想学习知识，于是家长们把我们送到了学校。我们拿着央行发行的法币，可以自由地买卖。我们发现身上的现金不够了，于是我们到ATM上取款。从社会文明的形态发展中不难看出介质的重要性。我们将这个介质定义为“中心化”。似乎失去了“中心”，我们很难在社会中生存。

追求梦想的道路，坎坷但光明，任何新技术、新事物都是规律在驱动，并不取决于任何人的意志。与其过度关注政府的态度，不如将重心放到技术本身，挖掘技术的价值，将技术应用于时代的需要，契合于行业的应用。

让我们追溯事物的本源

宗教、哲学、数学、物理、法学、计算机、易学、材料学等几乎所有的学科都在研究同一个问题。易经是古老而神秘的学科，和西方的玄学一脉相承，其研究的是宇宙间一切事物发展的规律。

物理学研究的是正极与负极，一切物理世界全部围绕着正极与负极；计算机学说的研究围绕着0和1的关系；哲学要回答“我是谁”“我从哪里来”“我到哪里去”这3个问题；法学要解决的是公平与正义、罪与罚、权利与义务、自由与约束；灵性学追溯本我与小我；宗教的教义是关于生与死、有和无的。

任何文明的进化都藏匿于趋势与规律中。对于真理的探究，其逻辑是先有念头才有理念，然后形成理论体系，最后是实践。从理论到实践必须有一个想象的过程。

信任是一种协议。那么信任究竟是如何诞生的？

“信”，顾名思义就是相信，包括两个元素，一是人，二是沟通。“任”，顾名思义就是连接与到达，包括两个元素，一是人，二是连接。

信任是一种协议，存在于潜意识里，但潜意识多变，故信任关系不稳定。在商业社会中，协议可能表现为合同。协议是人和人、人和物的连接。中央银行通过中心化权力驱动法币的地位；民政部门执行法律的意志，让婚姻合法，为夫妻关系建立了协议。由于人性的弱点和劣根性，统治阶级不能放任被统治阶级的自由主义，必须圈养，以维护规则，于是诞生了法律。宗教的统治，要借助教义。教义是什么？同样是协议。协议促成信任，协议无处不在。笔者将历史长河中以及在当下的种种协议下而约定的信任，定义为“机构式信任”。机构式信任，其中心思想是“中心化的人的规则”，规则的制定者是人。机构式信任破坏了信任主体之间的平等性。

那么问题来了，你一定会问，世界上有没有无懈可击的信任机制？答案是有！这个信任也同样是一种协议，这个协议的连接主体不再是人和物，而是物与物。协议的规则是：将物与物替换成代码，将代码储存在算法里。

区块链技术：金融风控的终结者

让我们回顾一下，为什么会有风控这件事情。中国有一句古话：人无远虑，必有近忧。还有一句话：凡事要“防患于未然”。中国文化崇尚的是平衡之道，制衡之说。金融业，同理可证！金融的本质是什么？是资金的融通。资金在融通的过程中，每一个环节都具有不确定性，不确定性就是风险的基本因子。根据文化的教义，平衡才具有可持续性，和谐才健康。从文化出发，延伸到政治经济学，统治阶层的上层建筑和经济基础关系微妙，谁决定谁都难逃“极端”的质疑，脱离不了“屁股决定脑袋”的固有思维。而这也正是权力文化在金融市场的蔓延。

风控体系就是关于动机及过程管理的体系。而动机和过程管理正是风控体系的基本逻辑。你有没有发现，这些都是人的设计。人的设计，是基于知识结构和经验判断的。基于案例和统计学的原理，产生了尽职调查。调查的根源是空间和时间的不确定性。调查的动机是为了使得未来和现在达成共识。请注意，这还是人的设计。正如所有的调查报告都是人写的，人参考的资料和数据还是人写的。那么，重点来了，人设定的程序，能不能被技术所取代？这个问题的答案在过去可能是无解的，如今答案有了。这个答案可能就是区块链。

区块链重塑交易结构，重塑信任

去中心化的通俗含义是，不要中央集权就能够成功地在多方之间处理交易。显而易见，金融业的风控体系正是中央集权的表现，一切的金融活动如果失去了风控，则是不合法、不合规、不被支持的。金融机构赋予了风控部门独立而巨大的权力。这个权力是中心化的集权，以控制作为信任机制的出发和归宿，管理着所有金融活动的运行。

风控的首要任务是防止交易中的欺诈。区块链技术的基本原理是：它能够通过一个分布式电脑网络来自动处理交易，通过加密手段来保障交易安全，让交易欺诈变得难以实现。区块链通过把现有解决方案重新加以利用并且赋予许多创新，使它变得极具革命性。在一个技术中，很难可以看到有这么多创新的理念被放置在一个框架内。

一切交易行为的背后都是协议，协议和协议组成了程序。安全、收益、流动性管理这3个要素全部通过区块链技术进行管理，以尽可能弱化人为的操作。这就是物联网金融的基本理念。

当然，理论归理论，实践归实践。当前，金融的世界依然还是人的世界，人是金融世界中最宝贵的资产，风控是金融世界中最为重要的元素。人依然是风控的主力军。改变不是一朝一夕的。

区块链技术的诞生不是偶然的，它是文明进化的使者。技术可以被大量应用取决于真理的探索者对于真理的普及。互联网在诞生前夜走的路，区块链技术同样要走上一遍。

陈刚，金融大叔

高戎汇资本创始人、董事总经理，多家创业公司顾问





目录


总序　区块链与互联网秩序

推荐序一　金融的天　信任的石来补

推荐序二　对未知世界保持谨慎的狂热

推荐序三　金融创新众生相背后的不变初心

序言　互联网金融第二弹

前言　金融大叔的梦想

引言

第1章　从理想到现实，区块链的前世今生

1.1　区块链究竟是什么

寻找中本聪

区块链的DACT特性

1.2　以比特币为基石的区块链1.0模式

比特币是最成功的区块链应用

比特币和法币

1.3　辐射无限可能的区块链2.0

区块链应用不等于比特币的应用

区块链可以应用的行业和场景

区块链在中国

区块链的春天

1.4　区块链大事记

1.5　本书内容

第2章　区块链技术解读

2.1　区块链的技术原理

账户地址的产生方式

区块链的算法和设计

区块组成区块链的方式

“矿工”，区块链系统上的核心

2.2　点到点网络和区块链

P2P技术解析

中心化区块链的实现方式

区块链是分布式存储

2.3　智能合约的技术实现

案例：看涨期权的智能合约

2.4　区块链系统的安全和隐私

2.5　区块链资源一览

给程序员的资源

区块链的社区和信息资源

第3章　区块链在虚拟货币领域的应用

3.1　从加密货币到数字货币

3.2　比特币背后的0与1

比特币区块链的原理描述简介

交易费

3.3　比特币001？比特币002？

3.4　是投资还是投机？

3.5　不得不提的Mt.Gox

第4章　数据驱动，区块链与数据挖掘

4.1　大数据时代

价值，大数据的第四个“V”

数据挖掘过程和应用

4.2　互联网金融，用数据说话

金融业的大数据挖掘

数据是做一切决定的前提

商业智能

4.3　区块链系统上的数据

区块链的仪表盘

区块链系统的数据瓶颈

从PaaS到BaaS，区块链和云计算

借力于区块链的DACT特性

大数据对于区块链系统的安全性防护

4.4　区块链和大数据

区块链的大数据化

大数据的区块链化

第5章　金融世界中的信用和征信

5.1　征信，躺着赚钱的机会

5.2　信用为王，数据为本

个人征信

企业征信

5.3　用区块链改变征信体系

案例：基于区块链的黑名单

案例：基于区块链的白名单

第6章　金融的风险控制和安全

6.1　风控和征信

6.2　风险就在于小概率事件会发生

6.3　区块链是解决风控系统问题的答案

6.4　用区块链来控制风险

控制操作风险

控制欺诈

控制逆向选择和道德风险

案例：区块链的可追溯性在钻石追踪领域的应用

第7章　金融领域中的其他区块链应用

7.1　超级账本

账本和分布式账本

无中心和有中心的分布式账本

半开放式的分布式账本

7.2　可交易的金融产品

案例：智能合约在区块链保险中的应用

7.3　数字化的资产管理

案例：汽车和区块链

案例：区块链为房地产登记提供解决方案

案例：小蚁——基于区块链技术的资产数字化系统

案例：区块链在艺术品领域的应用

7.4　第三方支付和跨境支付

第8章　金融领域之外的区块链应用

8.1　区块链2.0技术的价值

8.2　区块链的五十个应用场景

共享经济和区块链

案例：La'Zooz，共享经济的一个尝试

案例：域名服务

案例：音乐版权与区块链智能合约的不谋而合

8.3　物联网的应用

案例：制造业和区块链

案例：基于区块链的健康档案

8.4　OpenChain——区块链技术思想应用的典型案例

第9章　区块链技术的预测和展望

附录A　比特币“矿工”的一天

附录B　专业词汇表

附录C　参考网站一览

附录D　参考文献一览

推荐语





引言




感谢亲爱的读者在信息爆炸的今天，从众多可选的书籍中选择了我们这本书。希望这本书能够帮助你真正了解什么是区块链技术，用这项技术能够做些什么，以及区块链技术最佳实践应该是怎样的。

这个世界唯一不变的就是变化，互联网的变化本身就很大，而本书讲述的区块链技术又是互联网领域中一个新兴的技术，其变化必然非常快。在本书写作的时候提到的理念和方法，很有可能在书出版的时候就发生了较大的变化。如有疏漏之处，还请读者们见谅。

让我们用陈刚同学在2016年1月18日发表的一篇文章，来作为本书的开篇。





区块链技术商业应用杂谈


昨天晚上和“魔都”的几位区块链技术研究领域的朋友把酒言欢，畅谈区块链的当下及未来。几位同学大多从“矿工”开始，对比特币深有感情。笔者当年也做过“矿工”，因为没有预测好电力因素，比特币没有挖出，倒是烧坏了服务器以及一些电器。

昨天大家共同的观点是，“挖矿”不仅不环保，而且是破坏生态。不知道各位“矿工”朋友是否认可？

区块链研究领域的三个流派

从当前区块链领域的研究者来看，基本上可以分为三个流派。

第一个流派是技术派，其大多在翻译国外区块链技术的文章里找到了自己的定位。技术派的问题是文章阅读难度较大，笔者习惯性把技术派的语言定位为“不说人话”。

第二个流派属于实践派，并非技术出身，可能因为在2012年或2013年开始接触了比特币，参与了其投资，获得了不错的收益，之后就开始研究这个领域，从加密货币的研究到对于区块链的关注和研究。这个流派的同学已经在特定的应用场景创业，公司账上的钱不敢多花，对行业前景踌躇满志又小心翼翼。其创业的感受是既兴奋又孤独。

第三个流派属于趋势派。趋势派又可以被细分为两个派别，第一类是利用自身的资源和行业定位，发动技术和商业应用场景的运动和尝试。比如风险投资机构凯鹏华盈（KPCG）是全球第一家应用区块链来奖励有重大贡献的伙伴及其合伙人的企业；再比如德勤比较早就投入区块链在审计领域的应用，并在2016年元旦后和万向区块链实验室合作推出了应用场景黑马大赛，吸引到来自世界各地二十几支队伍报名参赛；全球著名的风险投资机构软银也启动了区块链技术在项目投融资领域的商业应用。第二类在商业应用场景上进行更多的实践探索，弱化技术，强调洞察区块链的商业价值。笔者属于这一类人。

笔者曾经说过，2015年是区块链的理论元年，透过技术本身，区块链理论已经越来越成熟，研究者之间大多可以达成共识，并经常性展开讨论和互动，以及积极探讨技术的商业应用。

区块链技术的爆发，预示着互联网信息技术的退幕。

不过，有趣的现象出现了。在研究学者中也出现了一些流派，主要体现在北京和上海两座城市的研究学者在理论体系方面的见解差异。北京的有些研究学者将量子力学和人工智能的重要原理和观点应用到区块链的理论研究中。而上海的研究学者不太认可这一类观点。笔者认为百家争鸣是行业的利好，只要逻辑行得通，自圆其说即可。

毫无疑问，区块链的研究，需要诸多学科和行业融合的知识。它贯通的是数学、物理学、哲学、计算机学、密码学、金融学、法学等诸多学科。区块链技术是当前知识认知领域最复杂的技术之一，本身蕴含的价值是以上所有学科相联通的升华。区块链技术的爆发，预示着互联网信息技术的退幕。IT的概念也随之消失，一种叫BT（blockchain technology）的概念可能会引领未来10年的新浪潮。

笔者预测，只有基于BT谈云计算和大数据才不是空谈。区块链技术可能就是大数据领域的“无门之门”。

新的信任体系诞生自分布式算法

在互联网的世界里，商业模式是价值载体，创新是根本，而在智能万物网的新世界里，商业模式和创新不再重要。一切都服务于最根本的场景，一切都围绕着应用。服务不是附带的需求，因为其本身就是服务。blockchain就是服务。

在桌面互联网和移动互联网的时代，定式思维将无法适应新技术的颠覆。请记住，区块链不是互联网的产物，而是万物网的存在基因，一项肩负着创造“完美世界”使命的技术。在去中心化的智能合约世界中，新的信任体系完美存在于分布式的算法里。

不同的学科都可以在顿悟中找到端倪和研究的入口。这是一个实验室距离商业世界最近的研究科目。当下，也许正是其即将爆发的黎明。

每一个行业都可能会诞生一家“独角兽”公司。区块链领域中未来这家伟大的公司，会弱化商业模式的概念，把痛点放大，直到在每一个环节都可以进行设计并交互。

笔者建议每一家区块链技术应用公司的首席战略官最好邀请从事哲学研究的同学来担任。当然，你可能会问为什么不是由精通算法的同学来担任。笔者认为，精于算法的同学应该担任CEO。因为算法将贯穿应用的所有环节。

没有资本驱动任何新概念可能都会胎死腹中

网络数据显示，全球范围内对于区块链的投资规模在10亿美元左右，但是大多包括了对于比特币创业公司的投资，纯粹的对于区块链技术的投资金额应该不会超过1亿美元，中国市场对于纯粹区块链技术的投资金额不会超过5000万元人民币，所以投资井喷只是时间的问题。

国内的金融机构设立的区块链实验室尚处于早期。肖风大侠领导的万向区块链实验室更有全球化的视野，以更大的格局促进区块链新经济的革命，令人尊敬。笔者所领导的高戎汇资本区块链实验室，旨在聚焦于行业解决方案的研究和商业探索。很高兴，笔者之前发布的“区块链在50大场景应用”的预测，已经得到了越来越多人的认可与支持，并且已经看到一些创业公司计划进军这些领域。

2016年区块链作为行业新宠已势不可挡

最近京沪两地的VC和PE圈的朋友频繁在朋友圈中问笔者区块链投资事宜。各家机构摩拳擦掌，蓄势待发。没有资本的驱动，任何新的概念可能都会胎死腹中。比如2015年风靡全球的工业4.0，如今几乎也是偃旗息鼓，“浪”了一时，无法“浪”得一世。究其根本原因还是资本不感冒。希望区块链不要发生这样的悲剧。

圈内同学关注比较多的是R3(1)公司的动静。笔者的观点是，R3模式在中国走不通，根本原因中国的金融环境不允许。所以，区块链创业应该还是一场草根革命，不出意外可能和2013年爆发的互联网金融创业浪潮有点相似。区块链的第一应用场景应该还是发生在金融行业，最有可能的还是在互联网金融领域。笔者建议，如果路走得更稳健一点，建议在讲区块链时要少谈比特币，少谈加密货币。用虚拟货币颠覆法币是伟大的初心，可是路途艰辛！就技术本身谈应用，更直接也更有力量。

至于未来公有链和私有链谁跑得更快、更远，不得而知，凡事先易后难，终归没有错。大胆试错，拥抱未来，就算牺牲了也光荣。

希望越来越多的应用场景案例发生。从各种迹象来看，2016年区块链作为行业新宠已经是势不可挡了。欣喜地看到越来越多的平台、机构、人员参与到这一伟大事业中。

《区块链》这部跨世纪大片，票房多少，还无法预测，但前景一定相当乐观。路漫漫其修远兮，吾等将上下而求索。

陈刚Jerry

2016年1月18日



比特币仅仅是区块链的开始。

本书会介绍区块链的基本概念和原理，更加重要的是我们会讲述一些区块链的实际应用。作为读者，你并不需要有太多计算机或者密码学的背景。如果你对自己所在的行业和领域比较了解，那么希望在读完这本书之后，能有启发，在你所处的领域中做出自己独特的应用。

在本书中有不少案例，专注于执行细节的同学可能会提出疑问，说我们写得不够具体。不过事实上是这样的，区块链技术本身正在高速发展，各种开源的代码每天都有更新。在实施的时候，我们可以选择的方向有三个，其一是用类似以太坊(2)的方式，基于比特币区块链衍生出来的代码做二次开发；其二是借鉴区块链的思路，不过用全新的代码来构建系统，比如在第8章最后提到的OpenChain；其三是做一个整合，以开源的区块链代码为基础来实现整个系统中需要保证数据安全性和可追溯性的部分，而用原有的或者是重新构建的混合云或私有云的方式来实现完整系统的其他部分。




————————————————————

(1) 分布式账本初创公司R3CEV，采用金融机构联盟的方式实施区块链技术。

(2) 一种开源协议，供开发者发布区块链应用。





第1章　从理想到现实，区块链的前世今生




2016年1月20日，中国人民银行数字货币研讨会在北京召开。来自中国人民银行、花旗银行和德勤公司的数字货币研究专家分别就数字货币发行的总体框架、货币演进中的国家数字货币、国家发行的加密货币等专题进行了研讨和交流。中国人民银行行长周小川出席会议，中国人民银行副行长范一飞主持会议。有关国内外科研机构、重要金融机构和咨询机构的专家参加了会议。

会议认为，在我国当前经济新常态下，探索我国央行发行数字货币具有积极的现实意义和深远的历史意义。发行数字货币可以降低传统纸币发行、流通的高昂成本，提升经济交易活动的便利性和透明度，减少洗钱、逃漏税等违法犯罪行为，提升央行对货币供给和货币流通的控制力，更好地支持经济和社会发展，助力普惠金融的全面实现。在未来，数字货币发行、流通体系的建立还有助于我国建设全新的金融基础设施，进一步完善我国支付体系，提升支付清算效率，推动经济提质增效升级。

当上面这条消息被传开之后，在比特币圈、互联网金融圈和投资圈中都引发了热议。一时间，关于“比特币合法化”的消息满天飞。其实，在笔者看来，这个会议的重点可能不在比特币，而在于货币电子化的应用，更加重要的是，区块链技术已经被密切关注了。果然，在20天之后，中国人民银行行长周小川在接受采访的时候就数字货币和区块链这样说道：

央行发行数字货币，主要体现这么几个原则：一是提供便利性和安全性。二是上面提到的，做到保护隐私与维护社会秩序、打击违法犯罪行为的平衡，尤其针对洗钱、恐怖主义等犯罪行为要保留必要的遏制手段。三是要有利于货币政策的有效运行和传导。四是要保留货币主权的控制力，数字货币是自由可兑换的，同时也是可控的可兑换。为此，我们认为数字货币作为法定货币必须由央行来发行。数字货币的发行、流通和交易，都应当遵循传统货币与数字货币一体化的思路，实施同样原则的管理。

从表面看，纸币的防伪要让消费者易于掌握；从内涵看，关健性技术是重要的国家秘密，央行发行的数字货币同样是如此。我们将运用包括密码算法在内的多种信息技术手段，来保障数字货币的不可伪造性。未来的技术也会有升级换代，我们会提前将技术升级考虑在内，从最初就引入长期演进的发展理念。

数字货币的技术路线可分为基于账户和不基于账户两种，也可分层并用而设法共存。区块链技术是一项可选的技术，其特点是分布式簿记、不基于账户，而且无法被篡改。如果数字货币重点强调保护个人隐私，则可选用区块链技术，中国人民银行部署了重要力量研究探讨区块链应用技术，但是到目前为止，区块链占用资源还是太多，不管是计算资源还是存储资源，都应对不了现在的交易规模，未来能不能解决，还要看。

除了区块链技术，中国人民银行数字货币研究团队还深入研究了数字货币涉及的其他相关技术，比如移动支付、可信可控云计算、密码算法、安全芯片等。我们会与金融界、科技界合作，进一步加大对各种新型创新技术的研究和合理利用，优化完善数字货币发行流通的技术框架，并充分预见、及时反应、有效解决在应用推广中可能出现的风险。为此，中国人民银行殷切希望有关各界大力支持、参与，取得成果，作出贡献。

对于周行长的采访，我们的解读是这样的：



法定货币包括纸币和数字货币，并且只有央行发行的数字货币才是合法的货币。央行迟早会发行数字货币，不过这和比特币一毛钱关系都没有。

数字货币要在保护隐私和打击违法犯罪行为之间找到平衡点。这两种动机的平衡点通过区块链技术可以实现，因为区块链技术本身就能对隐私进行保护，同时区块链系统又具有可追溯性。

区块链是一项值得研究的技术，不过央行不会用它作为数字货币的底层技术。区块链目前还不能作为数字货币的底层技术恰恰说明央行已经对区块链技术非常关注了。



当普罗大众听到“区块链”这个词时，它往往都是和比特币联系在一起的。其实，这两个概念并不需要同时出现，而区块链可以应用的范围也绝不是只有比特币或者虚拟货币。中国人民银行之所以能够部署重要力量研究探讨区块链应用技术，说明这项技术确实是有值得研究的地方。

在本书中，我们不仅会解释什么是区块链，更会为读者介绍区块链技术作为一项新兴的技术，所具有的优势和独特性，以及如何在金融行业及其他行业中实现其应用。

在2015年10月31日出版的《经济学人》（Economist）杂志封面上首次正式介绍了区块链。

在《经济学人》封面上关于区块链是这样说的：

信任机器：这个比特币背后的技术可以改变经济的运作方式。



2015年10月31日《经济学人》的封面就是区块链

（来源：《经济学人》杂志）

互联网浏览器的发明者Marc Andreessen，对区块链技术兴奋不已，他是这么描述区块链的：

“区块链为金融系统在互联网时代可以和应该怎样工作提供了无数的想象空间，并让系统转型，为个人和企业变得更加强大提供了催化剂。”

2016年1月21日和22日，在美国迈阿密举行的北美比特币大会上，多位比特币和区块链行业资深的人员和机构一起参与发布了《布雷顿森林体系2015年白皮书》。当笔者听到这个白皮书的名字时，就有点儿犯嘀咕。

“布雷顿森林体系”的建立是美元挑战英镑、成功作为国际通用货币的结果，难道比特币也是以此为目的？让比特币成为主导或者主流货币本来就不应该是虚拟货币应有的目的，区块链能否得到大家的认同与比特币能否被各家政府所接受其实是毫无关系的，区块链的应用和发展也和比特币能否有更大的市场价值无关。

区块链技术在各个领域得到应用的原因在于区块链本身所具有的特性和价值，而这就是我们在本书中所要着重讨论的。

在本章，我们会为读者解读以下问题：



究竟什么是区块链？

中本聪是谁？

区块链系统有哪些特性？

什么是智能合约？

区块链和比特币究竟有什么关系？

区块链除了比特币还能有哪些应用？

区块链和共享经济之间的关系是什么？

区块链领域在过去发生过哪些值得一提的事儿？





1.1　区块链究竟是什么



我们来看一下区块链在维基百科上被大家公认的官方定义：

一个区块链是一个基于比特币协议的不需要许可的分布式数据库，它维护了一个持续增长的不可被篡改和修改的数据记录列表，即使对于数据库节点的运营者们也是如此。

区块链究竟是什么？说得笼统一点，区块链实现的是一种全新的信用系统。另外一个同义的说法是，区块链系统是一个“Trustless”（无须信用）的系统，无须信用的系统本身就实现了自己的信用。这个信用系统不基于任何法律法规，是用机器语言来实现的。在系统运作时，这种信用不受使用者的影响，也无法被破坏。借助互联网的传播，这个区块链系统能覆盖全球任何一个角落，并且是简单易用的。

简而言之，区块链（blockchain）说的是由区块（block）用某种方式组织起来的链条（chain）。

在本书中，我们说的区块链技术实际上是一种分布式数据库技术。在区块链中，信息或者记录被放在一个个的区块（block）中，然后用密码签名的方式“链接”（chain）到下一个区块。这些区块链在系统的每一个节点上都有完整的拷贝，所有的信息都带有时间戳，是可追溯的。

在区块链概念创建之初，谈的主要是比特币底层的实现方式，所以很多人会把比特币和区块链技术的概念互换。在本书中，我们讨论的主要是区块链技术，比特币并不是我们的重点，这二者是不可混为一谈的。不过在第2章介绍技术原理和第3章讲述比特币的时候，我们必须要借力于最初的算法，所以在这两章中，比特币和区块链的概念是合在一起讨论的。





寻找中本聪



2008年，神秘人物中本聪（Satoshi Nakamoto）在一家隐秘的密码论坛上提出了一种全新的互联网货币设计方案——比特币。该技术别具匠心地使用了P2P技术（点到点技术）和不对称加密技术，使得人类历史上第一个真正具有金融意义的互联网货币得以诞生。

基于区块链的比特币拥有四大跨时代的显著特点：

（1）去中心化。比特币使用点到点网络技术，发行机制不依赖于特定的中心机构，不管是银行还是大型公司，都无法掌控比特币的发行。

（2）总量有限。比特币以一种递减的、可预测的速率产生，直到预计在2140年达到2100万枚的发行上限。由于上限固定，增速递减，所以从设计上来说，比特币具有通缩倾向。

（3）匿名性。比特币依靠加密技术，实现了完全匿名的自由使用。

（4）流通无界限。互联网的无界特征和比特币的开源特性决定了比特币交易活动的无界。它让跨国交易不再受到国家或者银行的限制。

比特币的发明者中本聪是一个有着神秘色彩的人物。在密码学论坛贴出他的研究报告之前，没有人知道他是谁。这样一个有着深厚密码学功底的人显然不可能是随便冒出来的，但是中本聪非常注意保护隐私——简介显示他住在日本，他的电子邮箱来自德国的一个免费服务站点，而他熟练的英语又让人觉得他是一个美国人，不过他写的某些单词又使用着英式的拼法。



美国《新闻周刊》2014年3月13日的封面

（来源：《新闻周刊》）

在一次对于比特币发展的争吵后，中本聪从社区中消失得无影无踪。不管中本聪到底是谁，我们已经可以停止追踪中本聪了，因为极客们有这样的惯常说法：

“不管是谁写了代码，重要的是代码本身。就算有人在比特币交易中偷窃、欺骗，有人放弃了比特币，但是，代码就在这里”。

其实比特币的思想并不是在一夜之间就冒出来的。在很早之前，自由主义经济学家哈耶克和弗里德曼就提出过废除中央银行、去国家化、非主权货币的构想。1998年，在东南亚金融危机肆虐时，戴伟首次阐述了一种新的货币形态，建议通过采用加密学原理控制货币发行和交易，而不是依赖于中央权威机构。

比特币从技术上实现了这一构想。





区块链的DACT特性



基于区块链的系统和以往的其他系统有很多不同。我们认为，以区块链技术为核心的系统有以下三大最主要的特点：



去中心化

不需要一个管理机构

不需要第三方仲裁



区块链的去中心化指的是整个系统上的节点是对等的，每个节点可以自由加入和离开，而且对整个系统的运行没有影响；不需要管理机构的另外一个词是autonomous（自治的），也就是说所有的节点都是按照一个规则来行事并达成共识的；而不需要第三方仲裁指的是系统上所有的交易和过程都是按照一定的规则或合约来进行的，所有的交易都是可追溯的和不可逆的。

区块链系统是全球化的，系统上的节点是运行在太平洋上某个小岛的笔记本电脑上，还是运行在美国西部某个小镇的服务器上，对系统本身来说都是一样的，除网络连接速度外，没有任何区别。

区块链系统的底层是开源的软件，对于所有的人都是公开的。任何人都可以查看这些代码，不过如果他们想要对代码加以修改，就得通过开源社区上其他程序员的审核。

虽然区块链的节点遍布全球，不过这并不会影响它的执行效率，因为系统的分布式设计意味着应用并不需要连接到所有的节点，只需要连接到最近的节点就可以获取所需要的信息。

总结一下，我们可以用四个词来描述区块链的特点：



Distributed（分布式的）

Autonomous（自治的，共同约定的）

Contractual（按照合约执行的）

Trackable（可追溯的）



在本书中，我们就用Distributed、Autonomous、Contractual和Trackable这四个单词的英文首字母DACT来代表区块链技术的特点。

有一种说法提到互联网的四大特点是“公平、分享、公开、透明”。DACT的四个特性正好对应这四大特点。



Distributed——分享

Autonomous——透明

Contractual——公平

Trackable——公开





区块链技术的DACT特性

区块链技术是完全符合互联网特点的一项技术，而通过区块链技术实现的系统恰巧也都符合互联网的四个特点。

在后文中我们会看到，当数据存放在区块链系统中之后，所有的交易都是可追溯的，在系统的每个节点上都有所有附带时间戳交易的完整拷贝，添加交易信息需要得到系统的共识，因而系统上的数据是不可被篡改的。

当我们的应用是基于区块链的时候，我们不用担心数据会被篡改或者丢失，不用担心交易的结果会有错误，因为所有的操作都是由系统自动完成的。事实上，当使用基于区块链的系统时，人们对中心机构的信任转而被对数学的信任所取代。

数据是公开的并不等于所有的人都可以随意访问基于区块链系统上的数据。恰恰相反，基于区块链的系统可以有最严格的权限设置。在一个共同约定的协议被写入代码之后，系统的Contractual（按照合约执行的）特性使得只有确定权限的用户才能访问加密的数据，即使是参与系统运营的节点也无法访问数据。因而，基于区块链的系统是安全的。



区块链系统是不可篡改的

（来源：http://dcebrief.com/）

关于区块链的社区和讨论非常多，在第2章我们会为读者整理出一些相关的社区资源，有兴趣的读者不妨去多看看百家争鸣的说法。从根本上看，笔者认为关于区块链主要有两大流派：

（1）区块链就是为比特币或者其他虚拟货币服务的技术。

（2）区块链技术可以应用在金融和其他领域。

在比特币圈子里有这么一个说法：区块链技术的兴起使得币圈逐渐变得泾渭分明起来，一边是看不惯区块链的比特币死守派，另一边是不带比特币玩的新区块链派。

如果必须二选一，那么笔者属于后者。不过我们并没有把自己归类于比特币圈子，所以想法可能更加激进一些，因而不见得能被区块链主流社区所接受。我们看中和研究的是区块链技术及其背后的设计思想，在意的是区块链技术在各个领域的应用。

我们是对比特币持中立态度，却对区块链技术倍感兴趣的第三派。或者按照我们在前言中的说法，我们是趋势派，认为区块链技术（Blockchain Technology）会在未来的10年中引领信息技术的潮流。如果我们能够用区块链设计思想来改造一个行业系统，那么我们认为这才是区块链对行业的贡献。





智能合约



很多讲区块链技术的文章都会提到“智能合约”的概念，似乎它就是区块链的孪生兄弟。不过笔者从头到尾研读了中本聪的文章不下十遍，不但没有发现“smart contract”或者“smart”和“contract”，连与“smart contract”定义近似的相关词语都没有发现。

把“区块链技术”和“智能合约”的大概念联系在一起其实是区块链研究者和践行者们所为，因为他们认为区块链技术是实现智能合约最好的技术。

按照维基百科的说法，最早提出smart contract（智能合约）这个词的人，有据可查的是计算机科学家Nick Szabo（尼克·萨博）。他的出发点就是要在互联网和电子商务上让陌生人之间实现类似于法律合同效用的商业行为。

在Nick Szabo自己的主页（网站http://szabo.best.vwh.net/smart.contracts.html）上，他所认为的智能合约的定义如下：

A smart contract is a computerized transaction protocol that executes the terms of a contract．

（一个智能合约就是能够执行合约条款的计算机化的交易协议。）

设计智能合约的目的是：



满足合约条款。

不出现意外的情形，无论是恶意的还是无意的。

不需要中间的第三方。



Nick Szabo认为，通过密码学的协议和数字安全技术，可以有效地在互联网上实现智能合约，从而减少欺诈，降低仲裁成本和交易成本。在他写的“Distributing Authorities and Verifying Their Claims”一文中，引用了美国前总统里根的一句话：

“Trust but verify．”

（信任，不过还是要验证一下。）



Trust but verify（信任，不过还是要验证一下）

（来源：Pinterest）

那么究竟什么是智能合约呢？我们以股票交易为例来说明这个概念。

在Peter的账户上有100股Facebook的股票，每股的价值约为100美元，而Jeff的账户上有4000美元的现金。所以他们的账户状态是这样的：



账户名 股票 资金

Peter 100股Facebook 0

Jeff 0 $4000

他们签订一个智能合约：Jeff以每股100美元的价格从Peter这里购买40股Facebook的股票。那么当4000美元从Jeff的账户转到Peter的账户上时，智能合约会发现条件满足，就把40股股票从Peter的账户转到Jeff的账户上。在智能合约执行之后，他们账户的状态是这样的：



账户名 股票 资金

Peter 60股Facebook $4000

Jeff 40股Facebook $0

智能合约会依照约定自行完成这个交易。如果没有智能合约的存在，那么这个交易需要有一个中立的第三方。

如果我们想要运用密码学的原理，采用电子合约的方式，在区块链系统中保证数据不被第三方篡改，就会用到智能合约。智能合约的用途很广泛，凡是需要辨别真伪、有多方接入、需要追溯本源的、需要合规的交易，都可以应用智能合约来维护系统中数据的真实可靠性和不被篡改性。

《经济时报》在2015年预测会有十个岗位在近期内被机器人所取代，包括银行职员和金融交易系统的中间人角色，而且其中也提到了区块链技术是促成这个取代的决定性技术之一。



最早会被机器人替代人的十个岗位

（来源：http://economictimes.com/）

智能合约可以应用的领域很多，包括：



金融

健康医疗

药材

食品

能源

电力

交通

房地产

农业

政府

军事



讲到这里，读者可能会对智能合约有自己的想法。其实任何一个用代码实现的动作都可以被称作智能合约，而在区块链上最早实现的智能合约就是把比特币从一个账户中转到另外一个账户中的动作。





1.2　以比特币为基石的区块链1.0模式



比特币的名字起源于中本聪文章的标题——Bitcoin：A Peer-to-Peer Electronic Cash System。比特币是一种“数字货币”，由计算机生成的一串串复杂代码组成，而随着比特币总量的增加，新币制造的速度会逐渐减慢。任何人都有可能参与制造比特币，以及在任意一台接入互联网的电脑上买卖比特币。





比特币是最成功的区块链应用



我们可以认为，到目前为止，比特币是区块链技术最成功的应用。比特币可以由任何一个人发送给任何一个其他的人，无论他们是否在同一个城市甚至国家。比特币账号是匿名的，是censorship resistance（无法被审查）的。

账户无法被审查是比特币走红的一个原因，同时也是比特币被很多国家和银行等金融机构抗拒的最大原因。而事实上，由于比特币账户是匿名的，所以比特币可能会被用于一些违法的行为和黑市交易，例如购买枪支和毒品等。

只要你还拥有某一个比特币账号的私钥，那么没有任何人或者机构可以阻止你支配账号下的比特币。



比特币价格变化曲线

（来源：http://coinmarketcap.com/currencies/bitcoin/#charts）

因为比特币的价格太高了，所以系统又设计了两个小一点的单位——mBTC和Satoshi。前者是1比特币的千分之一，而后者是1比特币的百万分之一，所以，如果1BTC相当于＄400，那么：

1 mBTC≈＄0.40

1 Satoshi≈＄0.0004

比特币作为数字货币，有着非常多的便利特性。例如：



“账户的透明度”



有些企业，例如公益组织，需要为它们在账户上的信息提供证明文档。如果使用的是比特币，那么你可以提供最高的透明度，因为你提供的信息是可以验证的。而且对于公益组织，公众可以清楚看到到底有多少善款被收到了。



“多人签名认证”



比特币有一个功能，即在比特币上可以设置一组授权人。只有当这组人中的部分（或者全部）人签名认可，比特币才能被使用。



“保护你的身份”



这是比特币最大的优势，同时也是其最大的劣势。当你使用比特币的时候，恶意软件是无法从中获得你的信用卡号码或者你的地址等信息的。你甚至可以发送一个匿名付款，完全不需要表明自己的身份。



“交易对全网络公开”



你随时可以通过https://blockexplorer.com/api/status?q=getBlockCount了解目前比特币上有多少个区块。

例如在我们写这本书的时候做查询，答案是这样的：

｛”blockcount”：395822｝

而过两分钟之后我们再查询https://blockexplorer.com／页面，在首页上我们看到又有一个新的区块被挖出来，最新的区块是这样的（见下图）：



比特币在网络上的最新区块

（来源：https://blockexplorer.com/）

自从比特币被发明之后，越来越多的商家表示愿意接受比特币作为一种支付方式。一种虚拟货币要能够成功，需要的是更多的商家和一个能让虚拟货币得到使用的生态圈。在网站http://spendbitcoins.com／上你可以搜索到比特币可以使用的商家，目前已经有超过100000个商家，并且分布在全球的各个角落。



SpendBitcoins网站上已经有超过100000个商家

在下表中我们可以看到前15名接受比特币作为支付方式的电子商务网站。从这张表中还可以看到，很多知名的商家暂时没有接受比特币作为一种支付方式。

前15名接受比特币的电子商务网站列表

（来源：https://en.wikipedia.org/wiki/Bitcoin）



网站Alexa排名 (1) 商户名

33 PayPal

41 Microsoft

328 Dell

329 Newegg

505 Overstock.com

512 Expedia

1981 TigerDirect

5674 Dish Network

7038 Zynga

30565 Time Inc

176903 PrivateFly

253983 Virgin Galactic

348010 Dynamite Entertainment

1145668 Clearly Canadian

无排名 Sacramento Kings





比特币和法币



如果要完全了解比特币和其他虚拟货币，首先就必须要清楚法币的概念。所谓法币，就是法定货币的简称，其英文是fiat money。从官方的定义来看，法币就是被政府法定为有效的货币。法币不代表实质的商品或货物，发行者亦没有将货币兑现为实物的义务；只依靠政府的法令使其成为合法通货的货币。

法定货币的价值来自拥有者相信货币将来能维持其购买力，而货币本身并无内在价值（intrinsic value）。从这一点来说，虚拟货币和法币除背后是否有政府背书外，没有本质的不同。它们的价值都来自于信用，也就是货币使用者的信任。比特币没有政府的背书，不是法币，它的价值来自于众多比特币使用者的信任。

政府对比特币的信任也算是一种信任。其实比特币社区中的活跃成员对此有两种截然不同的观点：



一种观点是希望能有大量的国家、政府接受比特币，使得比特币能够成为世界上最流行的货币。

另一种观点则认为，比特币的存在就是为了有一种与任何国家都脱离关系的货币，所以并不需要政府的支持。



这两种观点的出发点完全不同，所以中间不存在可以折中的方案。不过，不管持有的是哪一种观点，如果一个政府对于比特币是完全否定的，那么比特币在这个国家的推广就会有困难，而这对任何一方都是没有好处的。

针对比特币等虚拟货币，中国人民银行等五个部委在2013年印发了《关于防范比特币风险的通知》，宣布比特币在中国政府监管范畴内，将不被视为有效的交易结算工具，因为其不具有法偿性与强制性等货币属性，并非真正意义的货币，并要求各金融机构和支付机构不得以比特币为产品或服务定价，不得买卖比特币，不得承保与比特币相关的保险业务或将比特币纳入保险责任范围，不得直接或间接为客户提供其他与比特币相关的服务。





1.3　辐射无限可能的区块链2.0



区块链技术不是无所不能的，而且在今天，这个技术本身尚且没有足够成熟。虽然我们认为区块链技术有一定的局限性，不过其在未来的应用还是相当广泛的。Melanie Swan在“Blockchain：Blueprint for a New Economy”（《区块链：新经济蓝图》）一书中描述的有些场景还是有实现的可能的。Melanie Swan把区块链的应用定义成三个层级：



区块链1.0：比特币以及相关的虚拟货币。

区块链2.0：智能合约。

区块链3.0：除货币和金融领域外，在其他领域上区块链的应用，包括政府、健康、文化和艺术等。



Melanie所指的区块链2.0智能合约技术应该是区块链中的一项技术手段，而区块链3.0所提到的主要是应用场景的差异化，用3.0和2.0来分隔未免有些牵强。

因而在本书中，我们来重新定义一下，我们认为：



区块链1.0是比特币和虚拟货币的应用

区块链2.0是在除虚拟货币领域外的其他应用



在我们看来，归根到底，区块链技术是一种数据存储和分享的机制。正如大数据技术一样，其本身只是一种手段，重要的是在技术之上的商业逻辑和商业应用。

正如我们在选择大数据底层的Hadoop（Hadoop是实现大数据的一种技术）系统时，各家供应商的差异往往体现在效率和性价比上，而能否真正用Hadoop来产生价值的关键是看进行了怎样的商业应用。





区块链应用不等于比特币的应用



区块链技术作为一种思想，确实已经很成熟了，不过区块链作为一项分布式技术，还远没有到成熟这一步，还有很多地方需要调整。

其实在我们看来，目前唯一相对成熟的基于区块链技术的应用就是比特币，在比特币之外的应用都还需要一定的时间。我们在第2章解读区块链技术的时候，会提到区块链技术还需要解决的一些问题。

如果我们仔细研究今天区块链社区中提出的各种应用，就会发现很多都和某一种虚拟货币联系在一起，似乎如果不发行一种新的虚拟货币，就无法把区块链应用到一个新的行业中。

如果想要让区块链技术能够在更高的层面、更多的应用上发挥它的DACT特性，就必须上升到商业应用的层面，让区块链技术在各种多用户、高并发的现实场景中得到充分使用，并且让区块链技术和起源时绑定的比特币脱离关系。

毕竟区块链技术最早被发明是为了比特币，如果要实现在虚拟货币领域之外的应用，就需要对原有的技术做一些调整和改造。

如今在报纸和杂志上，当人们谈起“区块链”的时候，上下文往往是“比特币”或者其他一种虚拟货币。而实际上区块链的应用远不止于此。在我们看来，技术本身是否是独创的或者先进的并不重要，重要的是这项技术在哪些应用场景上合适，在实际的应用场景上应该怎样使用这项技术。

区块链系统的DACT特性使得它与传统系统相比有着独特的优势，不过，目前我们还没有见到能很好在货币领域之外应用区块链技术的商用系统。

与SaaS（Software as a Service，软件即服务）一样，如果我们能把区块链的底层技术做封装，为企业提供对应的区块链服务，就成了BaaS（Blockchain as a Service，区块链即服务）。在第4章会讲到微软已经率先做出BaaS的尝试，不过它一定不会是唯一的一家。

在英国政府2016年1月发表的“Distributed Ledger Technology：beyond block chain”（《分布式账本技术：超越区块链》）文章中，Matthew Hancock和Ed Vaizey是这么说的：

“创造出分布式账本的算法很强大，这个颠覆式创新能够彻底改变很多领域的公有和私有的服务，并提升生产力。直到现在才真正诞生的数字化分布式账本，拥有超越原来纸质账本所没有的特性和能力。”

有心的读者在读完本书的时候会发现，在社区中讨论得热火朝天的DAC、DAO和DAS(2)在本书中几乎都没有谈到。笔者认为，完全通过代码实施，不需要人工干预的公司、机构、组织和社群是梦想，在可见的未来还无法得到实施，而且也并不适合中国的国情。真正有价值的是区块链技术在各种垂直领域的应用。





区块链可以应用的行业和场景



往大方面说，区块链技术几乎可以应用在所有的行业中，或者说在任何一个行业中都有可以用到区块链技术的场景。

在第8章中，笔者会为读者讲述一些案例，介绍在金融领域之外的领域里已经出现或者我们认为可能出现的一些基于区块链的应用。

2016年1月18日，陈刚同学曾经在其微信公众号里写了这样的一段文字：

某一天，你看到一套别墅作为数字资产被登记在某区块上，在你搜索这套不动产资产信息的时候，区块和智能全息投影设备连接，一切在可视化地立体呈现。你戴上VR头盔，已经如别墅主人一样体验了这套别墅带给你的体验。你仿佛已经在虚拟现实的世界里，坐在主人卧室里柔软的沙发中，海风，向你扑面而来。

你登录一个智能设备，用视网膜扫描（来自于区块链上的）一串符号，即可收到来自美国关于迈阿密海边别墅交易成功的电子确认函。一切交易轻松完成，交易数据被储存在区块上。

随后你在（基于区块链的）票务网站上订购了往返美国性价比极高的头等舱机票。

一周后，你在别墅前用视网膜扫描大门密码，门打开了。

这可能就是你的未来智能生活。

在人工智能的世界中，我们看到了实物资产转化为数字资产（一串符号）、VR虚拟现实、区块链上的数据，在技术、交互、登记、交易中体验智能的生活方式。未来生活等你开启。也许就在未来的3～5年时间。

上面描述的就是一些应用区块链技术的实际应用场景。这些应用有的可能在未来的3～5年成为现实，而有的可能会需要更长的时间。更重要的是，我们认为这里描述的不是科幻小说家的想象，而是确实可能成为现实的场景。

我们必须要清晰地知道，区块链技术固然强大，但它也是无法不经改变就应用在所有场景中的。

华尔街的知名人士，数字资产控股公司的CEO，Blythe Masters曾经这么说过：

行业里有不少的自由主义‘梦想家’，他们想要的是一个没有大银行、大政府的世界。这很好，但这与数字资产控股公司的商业模式完全不相干，我们并没想象过大银行、大政府所不存在的世界。

为什么Blythe Masters说的话我们会特别留意呢？并不完全因为她目前是一家区块链公司的CEO。伦敦《卫报》称Blythe Masters是曾经“发明了大规模杀伤性金融武器的女人”。区块链技术可能是她最新的大规模杀伤性金融武器，威力会比她之前发明的CDS（Credit Default SWAP，信贷违约互换）还要大得多。

在后面的章节中读者会看到，金融领域会是区块链技术应用最直接的领域。

对金融行业来说，最重要的两个维度是客户和风险。找到最多和最合适的客户，同时把风险降到最低，是每一家金融机构追求的目标。如何达成这些目标？在我们看来，数据是唯一的方向标。我们要充分挖掘互联网行业、金融行业中各种形态的数据，让数据说话，用数据指导各种金融创新，用数据来控制风险。

金融是基于数据的，所以其原本就继承了数据分析的基因，因而从一开始，数据就是金融管理的核心，直接或间接存在于金融管理的每一个环节。如果我们充分发挥数据的作用，就可以让数据在金融运营的各个环节中都能为我们助力。

互联网是以数据为核心的，而互联网金融，更加要用数据说话。在第6章中会着重讲到互联网金融的风险管控，而其实风险的判断在很多时候就是基于数据的。所以，互联网金融要用数据说话。

诸行无常，诸法无我。在今天的互联网环境中，唯一不变的是变化。大数据领域在过去的5年中有很多创新技术的出现，而区块链技术和大数据相结合在未来的一两年中会是我们研究的重点。这是我们在第4章中会和大家共同讨论的。





区块链在中国



我们在中国约谈了不少区块链领域的研究者和开发者，不过，到目前为止，我们看到的现状是热闹有余，而实在落地的项目寥寥无几。大家都在疯狂地探讨区块链，不过对于区块链真正能够做的实际应用还没有太多的想法。

2015年，在北京的巴比特互联网主题茶馆与互联网圈的兄弟们闲谈时，他们打趣地说到，在2016年的夏天，说不定在各个创业咖啡馆中，大家会集体向右转，对投资人说，“我们也是做区块链的。”

我们看到的区块链创业项目的主要问题是：



就区块链而言区块链，不考虑真正的商业价值。

就比特币或者其他代币而言区块链，不考虑其他可替代的方案。

就区块链系统本身而言区块链应用，不考虑和其他系统的整合和对接。



在我们看来，区块链有一个非常不错的设计思想和理念，不过它是不能脱离其他的系统而单独存在的。如果想要用好区块链系统，首先要考虑的是我们究竟需要解决什么问题和能够解决什么问题。

只是为了用“区块链”的概念而说区块链是没有意义的。

在我们看到的和区块链相关的项目中，达叔的“小蚁”数字资产项目可能是离落地最近的。不过即便如此，“小蚁项目”依然有很长的路需要走。我们在第7章中会为读者们介绍“小蚁项目”。





区块链的春天



一个新技术的成熟需要时间，越是影响深远的技术需要的时间也越长。有很多人说，2016年会是经济的冬天，融资的冬天，更是互联网金融的冬天。我们认为，区块链的春天已经快要来了，不过可能还会经历一个短暂的严冬。



Perez技术发展周期模型

（来源：Carlota Perez的《Technological Revolutions and Financial Capital：Dynamics The of Bubbles and Golden Ages》）

据Carlota Perez教授所说，一个技术的成熟会经历以下4个阶段。

（1）创立期

（2）疯狂期

（3）融合期

（4）成熟期

几乎每一项技术都会经历这些阶段，只不过在互联网时代的技术发展过程中，每个阶段都会比之前的其他革命性发明短很多。在我们看来，区块链技术虽然自诞生以来不过短短8年，但它的发展正处于第二个阶段的“疯狂期”中，之后会过渡到“转折阶段”，然后才是“融合期”。

对于区块链技术，目前市场上除一部分已然疯狂的人外，对区块链表示质疑的声音可能比赞同的声音还要大。其中的一个观点是：

区块链就是用来做比特币的，没什么别的用处。

在我们看来，区块链技术不是人类的发现，而是一项很不错的发明。区块链技术和以往的重大发明一样，能够创造出很多新的商业机会和新的商业模式。我们在下一节会为读者介绍一些区域链技术可能的应用场景，相信有想象力的读者能够触类旁通，有更多的创新想法和思路。

一项新的发明，一定是从质疑开始的，因为混沌的世界、世俗的世界是强大的，集体的无意识是强大的，所以真理的声音很少成为主流。当然，我们并不仅仅因为自己是少数派就自认为掌握了真理，本书中给出了很多推断，亲爱的读者们可以自己来辨别真伪。

同样，我们也不盲目崇拜区块链技术，因为这个技术显然不是解决所有问题的良药。市场上认为“区块链技术可以颠覆互联网甚至现有社会秩序”的观点也是我们所不认同的，在可见的未来这是不可能做到的。

区块链是一项很好的底层技术，不过对于任何一个应用场景，都还需要很多配套的工具和服务。就像是我们在做大数据的解决方案时，锁定了Hadoop技术一样。Hadoop虽然很强大，不过只是用Hadoop本身是无法解决任何大数据问题的，必须得借助基于Hadoop的一些其他工具。例如解决在关系数据库与Hadoop之间传输数据的问题，Sqoop就是能完成这项任务的一款工具；以及为了管理Hadoop任务而专门设计的Zookeeper，它是能够按照时间或按照数据可用情况触发任务的工作流程的调度工具。

和区块链技术相配套的服务和工具包括：



工作流引擎

大数据引擎

数据抽取、查询工具

报表工具

数据分析工具

高速访问区块链数据库的工具



上述的工具在现今的各种传统IT系统中都有现成的解决方案，其中有些已经运行了很多年。即使我们决定要用区块链系统来替换原有的IT系统，还需要考虑哪些配套服务也是必须要做的。

区块链应用的崛起需要的不只是一家“区块链技术公司”，而是在区块链生态系统上的几类有自己独特专长的公司：



运作自己的基于区块链技术的平台公司

帮助政府和金融机构采用区块链技术来解决商业问题的解决方案公司

专门做基于区块链技术配套专业技术服务的公司

在区块链技术平台上做大数据分析和数据分析工具的公司

专心做区块链技术相关的数据安全的公司



我们崇尚的是“让专业的人来做专业的事情”，上述的5个领域需要的技能是不太一样的。举例而言，如果要做好上述的第二类公司，帮助政府和金融机构采用区块链技术来解决商业问题，那么这家公司需要的技术并不只限于区块链，它们更加需要的是和某个机构或公司相关的商业逻辑，以及如何能够使用区块链技术来应对这些机构或公司可能会碰到的实际问题。



区块链技术生态圈示意图

区块链技术的实施需要权威机构与行业的全体协作

全球区块链技术的核心思想是提供去中心化的、用新治理规则解决复杂封闭性问题的解决方案。然而，在中国的商业逻辑里，这一技术应该首先打动最具有公信力的中央权威机构，并且在得到其帮助和领导下，在其管辖的行业里应用。

再讲得通俗点儿，就是站在领导的身后，由领导带头将其引入全行业的治理中。这样，区块链的治理标准、技术、思想才可以得到实施。否则去中心化就很有可能变成无政府主义的起哄。

有了具有公信力的权威机构的指导，之后迅速发动行业机构全面参与，建议组织联盟，先从思想上达成共识机制，然后形成区块链的“宪法”，并制定执行条例。我们应当通过市场执行以带入更高效率、降低社会运营成本、提高整体的信用度为最高使命。

在英国政府2016年1月的报告中指出，政府应当推动区块链技术或者分布式记账系统。政府所获得的好处会体现在以下这些方面：



降低运营成本。

减少欺诈和错误支付行为。

提供性价比更高的服务。

让政府部门和公民之间的交易更加透明。

能够在金融系统中包容更多的人。

降低公民数据保护的成本。

能够共享数据，甚至可能为信息创造出市场。

保护敏感内部架构。

便于SME（small and medium-sized enterprises，中小企业）与本地和中央政府之间的数据交互。

提倡创新，为SME提供发展的机会。



我们不是说区块链技术一定能够迅速颠覆所有的行业，不过它对于支付、证券、金融服务，以及金融以外有需要的行业造成的影响是深远的。当所有的人像接受“互联网”一样接受“区块链”的概念时，区块链的春天就真的到来了。





1.4　区块链大事记



在2009年之前，主要是一些关于密码学和虚拟货币的学术性探讨，而包括比特币在内的各种应用出现的时间点是在中本聪的那篇著名的论文之后。

下面看一下按照时间轴来排列的和区块链相关的一些事件：

1991年，S．Haber，W．S．Stornetta发表了论文“How to time-stamp a digital document”（《怎样为电子文件添加时间戳》）。

1998年，Wei Dai（戴伟）发表了论文“a scheme for a group of untraceable digital pseudonyms to pay each other with money and to enforce contracts amongst themselves without outside help”（《一种能够借助电子假名在群体内部相互支付并迫使个体遵守规则且不需要外界协助的电子现金机制》）。

1999年，H．Massias et al．发表了论文“Design of a secure timestamping service with minimal trust requirements”（《在最小化信任的基础上设计一种时间戳服务器》）。

2002年，A．Back发表了论文“Hashcash-a denial of service counter-measure”（《哈希现金——对拒绝服务式攻击的一种克制方法》）。

2008年11月1日，中本聪发表了论文“bitcoin：A Peer-to-Peer Electronic Cash System”（《比特币：一种点对点的电子现金系统》）。

2009年1月3日，中本聪在位于芬兰赫尔辛基的一个小型服务器上挖出了第一批50个比特币，被称作上帝区块。

2010年5月22日，Laszlo Hanyecz用10000个比特币叫了两块比萨，按照每个比特币价值400美元来计算，每块比萨值200万美元。

2010年7月17日，第一个比特币交易平台MT.GOX成立。

2011年2月9日，每个比特币价格首次达到1美元，与美元等价。比特币与美元等价的消息被媒体大肆报道后引发人们的高度关注，新用户大增。在此后的两个月内，比特币与英镑、巴西币、波兰币的互兑交易平台先后开张。

2011年3月6日，比特币全网计算速度达900GH/s，但很快又下跌了40％，显卡“挖矿”开始流行。

2011年8月，作为常用的比特币交易处理中心之一的MyBitcoin宣布遭到黑客攻击，并导致关机。涉及客户存款的49％，超过78000个比特币（当时大约相当于80万美元）下落不明。

2011年8月20日，第一次比特币会议和世博会在纽约召开，在谷歌趋势（Google Trends）中，比特币的关注度创新高，当时每个比特币的价格为11美元。

2012年11月25日，欧洲第一次比特币会议在捷克布拉格召开。

2012年12月6日，首家在欧盟法律框架下进行运作的比特币交易所——法国比特币中央交易所诞生，这是世界上首家被官方认可的比特币交易所，此时比特币价格为每个13.69美元。

2013年5月14日，美国国土安全部获得法院许可，冻结了全球最大的比特币交易所Mt.Gox的两个账户，此时每个比特币的价格为119.4美元。

2013年5月28日，美国国土安全部以涉嫌洗钱和无证经营资金汇划业务取缔了位于哥斯达黎加的汇兑公司Liberty Reserve的虚拟货币服务，美国检察官称这将成为历史上最大的国际洗钱诉讼案，洗钱规模达到60亿美元，包括中国在内的大量用户血本无归，此时每个比特币的价格为128美元。

2013年7月30日，泰国央行禁止购买、出售比特币以及任何附带比特币交易的商品和服务，禁止接受或向泰国境外人士移交比特币，泰国开全球先河，封杀比特币。

2013年8月19日，德国政府正式承认了比特币的合法货币地位，该货币拥有者将可以使用比特币缴纳税金或者用作其他用途，而德国也正式成为全球首个认可比特币的国家。

2013年10月，注册地位于中国香港的GBL比特币交易平台下线，卷走用户持有的价值410万美元的比特币。

2013年10月，世界首台比特币自动提款机在加拿大启用，在这里可办理加拿大元与比特币的兑换。

2013年10月2日，美国FBI（联邦调查局）正式取缔了著名线下毒品交易网站丝绸之路，该网站29岁的创始人罗斯·乌尔布莱特遭到逮捕。在这次的查抄活动中，共有2.6万个比特币被没收，总价值为320万美元左右。

2013年11月29日，比特币价格达到历史上的新高——每个1242美元，而当天的黄金价格是每盎司1240美元。

2013年12月5日，中国人民银行联合工信部、银监会、证监会和保监会印发了《关于防范比特币风险的通知》（以下简称《通知》）。在此《通知》中，央行明确了比特币为“网络虚拟商品”，而不是货币。同时《通知》规定，金融机构与支付机构不得开展与比特币相关的业务。

2013年12月，淘宝宣布其支付平台支付宝停止接受比特币付款。

2014年2月25日，总部设在日本东京、全球最大的比特币平台MT.GOX，因为网站安全漏洞，关闭了自己的网站并停止了交易。

2014年3月15日，中国香港首台比特币自动提款机被授权给一家咖啡厅使用。

2014年3月21日，一条关于我国央行取缔比特币交易的小道消息在微博上迅速被传开，引发了巿场的恐慌。当晚，比特币从每个3600元跌破3000元，最低甚至到达2600元，而新上市的菜特币则从每个100元跌到了1元。这个事件被比特币投资者们称为“321事件”。

2014年5月，美国的Dish Network公司宣布支持比特币支付。

2014年7月，美国的Dell公司宣布支持比特币付款方式。

2014年9月，美国的ebay公司宣布旗下的支付子公司Braintree可以接受比特币的交易。

2014年12月，美国的Microsoft公司宣布支持比特币付款方式。

2015年，比特币突破1PH/s的全网算力。

2015年，IBM宣布加入开放式账本项目（Open Ledger Project ）。

2015年，Microsoft宣布支持区块链服务（Blockchain as a service）。

2015年1月，比特币公司Coinbase C轮融资7500万美元，这是比特币公司迄今为止获得的最大一笔融资。BBVA（西班牙对外银行）通过旗下子公司以股权创投的方式参与了Coinbase的C轮融资，以助其熟悉区块链技术并了解其工作方式。

2015年3月，摩根大通的高管Blythe Masters加入区块链公司Digital Assets Holdings（数字资产控股公司），任CEO。

2015年5月，高盛在其报告中称数字货币成为市场“大势所趋”，将参与革新金钱流动方式。同时，高盛联手其他投资公司向比特币公司Circle注资5000万美元，开展区块链技术的技术储备和探索。

2015年6月，桑坦德银行宣布通过金融技术投资基金InnoVentures进行区块链试验。

2015年6月，英国第二大银行巴克莱银行与比特币交易所Safello达成协议，将探索区块链技术如何加强金融服务业。

2015年6月，美国的Overstock公司宣布用区块链技术发行了一个加密数字债券。

2015年7月，德勤推出软件平台Rubix，它允许客户基于区块链的基础设施创建各种应用，最主要的应用当然还是德勤的主业——财务审计。

2015年8月，以太坊（Ethereum）平台发布了一个新版本，在理论上可以实现任意基于区块链的应用。

2015年8月，总部在中国香港的Bitfinex交易所突然关闭部分账户，导致比特币的价格在24小时中从250美元跌到了211美元，而比特币在Bitfinex上最低的价格是每个162美元。

2015年9月，分布式账本初创公司R3CEV、LLC公司宣布和高盛、摩根大通、瑞士银行等9家银行结成联盟，共享数据、研究、想法和技术，旨在为金融行业找出基于区块链的解决方案。

2015年9月30日，R3CEV宣布，该公司已增加了13家新的银行合作伙伴，这使得参与其区块链项目的银行总数达到了22家。

2016年1月5日，全球共享金融100人论坛（GSF100）宣布成立“中国区块链研究联盟”。

从以上大事记中我们可以看到，早期和比特币相关的大事往往是好坏参半的（为了显眼起见，我们用灰色底色来标注灰色事件）。从2015年开始，和区块链相关的往往都是新产品或者新技术的研究。

除以上列举的这些大事外，各种基于区块链的产品、创业公司和新概念层出不穷，几乎每周都有新的公司和产品发布。由于篇幅所限，在此就不一一列举了。有兴趣的读者可以自己查询在附录C中列举的网站。





1.5　本书内容



与其他讲述区块链技术的书和白皮书不同，本书的重点不在区块链算法和理论本身，也不在对区块链的畅想，而在于区块链技术和理念如何被应用在实际的场景中。

在书中我们会讲述不少案例，这些小节的标题都是以“案例”开头的。有些案例是已经在进行中的，有些是在现实生活中有了示例的，还有一些确实是笔者和团队们根据实际应用场景所做的设想。不过凡是在本书中以“案例”开头的内容，我们可以负责任地说，都是可以用技术手段来实现的。

在第2章中我们从技术层面解读区块链的细节，如果读者对于技术细节并不感兴趣，那么你可以跳过这一章。我们尽量采用平实的语言来讲述区块链技术的概念，希望读者能够理解区块链技术的原理。另外，我们会介绍区块链的算法和设计、区块是如何链接成区块链的、工作量证明的概念和“矿工”的价值、分布式存储的概念，以及智能合约的实现方式。

在第3章中我们为读者解读了区块链1.0，也就是区块链在虚拟货币领域的应用。另外，我们还讲述了比特币和其他虚拟货币的原理、数字货币的概念、在比特币系统中区块链所起到的决定性作用，以及购买比特币究竟算是投资还是算是投机。

第4章其实在本书中是很特别的一章。几乎在任何其他讲述区块链的书中都不会有关于数据的一章。数据挖掘的概念和比特币看起来有些遥远，而区块链领域中从业的大部分兄弟都多多少少有些自由主义的倾向，所以他们中的有些人，比如做音乐版权的Bryce Weiner，对于数据挖掘的观念是有些排斥的，或者至少是不太感兴趣的，因为他们可能认为数据挖掘和侵犯个人隐私好像是可以画等号的，甚至认为区块链存在的价值就是让数据的拥有者对于数据有唯一的掌控权。其实当然并非如此。我们在这一章中讲述的核心观点是“数据才是做一切决定的前提”。区块链技术必须要和大数据相结合，二者才能够相得益彰。

第5章、第6章和第7章都是面向金融的，介绍的是区块链技术在除虚拟货币外的金融领域的应用。

在第5章中我们为读者介绍了征信的概念，以及区块链技术如何用来构建征信系统。其中的征信“黑名单”和“白名单”的案例，作为在本书中最先提及的实际应用案例，我们花了较大篇幅做了详细的说明。

第6章着重讲述了金融机构的风控体系、风控和征信的关系，以及如何用区块链技术来控制操作风险、欺诈和逆向选择及道德风险。在第6章我们会介绍一个案例，说明区块链可追溯性在钻石追踪领域的应用。

在第7章中我们为读者介绍了区块链在金融领域其他方面的应用。在此我们第一次引入了分布式账本的概念，虽然外界有很多人把“分布式账本”和“区块链”混为一谈。在第7章中我们提出了“半开放式的分布式账本”概念，介绍了如何用区块链系统来实现金融产品和数字资产的交易。另外还介绍了智能合约在区块链保险领域上的应用、汽车和区块链的应用、区块链在房地产登记上的应用、小蚁数字资产应用、区块链在艺术品领域的应用共5个案例。在最后，我们讲述了为什么创业者们并不应该尝试区块链在“第三方支付和跨境支付”领域应用的创业项目。

在第8章中我们介绍了金融领域外其他领域中的区块链应用。我们还介绍了区块链在共享经济、域名服务、音乐版权、制造业和健康医疗等领域的应用。在最后，我们用OpenChain的例子来说明，其实更加重要的是区块链带来的理念和新思想。

在第9章中我们引用了一些外部专家对于未来区块链技术的预测和展望，同时给出了我们的一些预测。

在第2章和第3章描述比特币和区块链系统的内容时，我们都强调了一个在系统中很重要的角色：“矿工”，所以在附录A中我们为想要尝试“挖矿”的同学准备了一个简单的挖矿教程。

本书在写作过程中参考了大量的网站和中英文文献，这些网站和文献我们都列在附录C和附录D中。其实还有许多和区块链技术紧密相关的精彩论文和书籍，由于笔者时间有限，没有能够拜读并加以引用，深感歉意。

区块链技术是一个很大的课题，我们不可能通过简单的一本书覆盖它的全部内容，而且区块链技术的应用和研究在每天都有新的变化和发展。令人欣喜的是，很多区块链学者和研究者在互联网上都会为大家提供很多新的信息和内容，大家可以查阅附录C中列举的网站来获取最新的资讯。


————————————————————

(1) 这里说明一下，Alexa网站排名是纯粹从流量的角度对网站进行的排名，是互联网上公认的比较公正的一种排名方式。在这个列表最后的网站是NBA球队萨拉门托国王队，这个网站的流量小到在Alexa上完全没有排名。

(2) DAC即decentralized autonomous corporation，去中心化的自治公司；DAO即decentralized autonomous organization，去中心化的自治机构；DAS即autonomous society，去中心化的社会群体。这三个都是在区块链社区中被热议的概念，通过智能合约的约定来自动执行的商业模式。





第2章　区块链技术解读




在本章中，我们会为读者解读区块链的技术细节。如果亲爱的读者对于如何具体实现区块链的技术手段并不感兴趣，那么可以跳过这一章，直接阅读第3章。对于读者有必要了解的一些区块链的技术概念，我们在后面的章节中会用更简洁的语言进行描述的。

区块链是由所有参与者共同组成的分布式数据系统，是对系统上所有交易历史和数据进行记录的一种技术手段。

我们认为，区块链是一项有应用前景的技术，它的DACT特性使得其在很多领域都可以得到应用。不过，从本质上看，区块链技术就是一个实现了分布式存储的平台，如果要在任何一个具体场景上应用，则需要整合处理的逻辑、工作流以及用户体系。

在本章中，我们会介绍如何实现区块链技术的算法和原理从而使得系统有DACT特性。我们还会解答以下问题：



区块链算法的实现方式是怎样的？

在区块链系统上账户地址是怎样产生的？

工作量证明是什么？

“挖矿”是怎么回事儿？

区块链和P2P有什么关系？

智能合约的技术实现是怎样的？

从哪里可以看到区块链最新的资讯？

从哪里可以获取和区块链相关的资源？





2.1　区块链的技术原理



区块链系统的设计思想和很多传统系统的设计思想本来就是截然相反的：



区块链是分布式的，传统系统是集中的。

区块链上的数据有N个备份，传统系统的数据是在单个或者少数几个节点上的。

区块链是不需要信任的，传统系统的运营者必须是被信任的。

区块链上的所有记录都是可追溯的，传统系统的记录可能没有上下文。

区块链的系统是24×7×365不间断运行的，而传统系统需要停机维护或者更新。



下面首先从区块链技术的算法思想开始说起。





账户地址的产生方式



在介绍中本聪的算法之前，下面先简单普及一下公钥私钥加密系统的原理。

系统上的每一个人都有一把公钥和一把私钥，私钥是保密的，而公钥对大家都是公开的。系统上的一个人John要把一段内容发送给另一个人Brian。John可以用他的私钥对内容加密，然后发送给Brian，而Brian可以用John的公钥来解密，从而看到这段内容。

如果Brian需要的是John的数字签名，那么用同样的方式，Brian可以用John的公钥来验证这个签名确实是用John的私钥创建的，也就是说，这确实是John的签名。

用系统认同的算法，我们可以用私钥来产生公钥，不过这个过程是不可逆的，也就是说我们是无法用公钥反过来把私钥推算出来的。

下面看一下比特币上的地址是如何从公钥产生的。

如图2-1所示，从公钥生成比特币地址的方式是：

（1）计算公钥的SHA-256哈希值。

（2）计算第（1）步结果的RIPEMD-160哈希值，这个结果是fingerprint（指纹）。

（3）计算fingerprint的SHA-256哈希值。

（4）对第（3）步的结果再做一次SHA-256哈希值，这个结果是checksum（校验码）。

（5）在第（2）步的结果fingerprint的前面加上0×00，后面加上checksum。

（6）用Base58表示法转换第（5）步的结果，就得到了比特币的地址。

在此，我们需要对Base58做一下解释。Base58是专门为比特币区块链算法设计的进位方法，其实就是把字母表分大小写加上所有的数字，然后去除容易混淆的数字“0”，大写字母“O”，大写字母“I”和数字“1”。



比特币地址的生成示意图

（来源：http://en.bitcoinwiki.org/Bitcoin_address）

如下表所示，用Base58表示的数字是58进位的。比如Base58的“1B”就等于十进制中的69（58＋11），“22”就等于十进制中的118（58×2＋2）。

比特币区块链算法专用58进位字母表



比特币的地址是这个样子的：

1JArS6jzC4FJ9sZ3aFij1CmTcpFGgN86hG

149RkVbBt1tLGwedZzPJCXkHqewjhcKkQS

1KBrS6jzC7FJ3sZ3BFij1TnTcpFGgN73hB

1LCrS9jzC7F4JieWad3kLaGF4ppFGgN6hC

……





区块链的算法和设计



如果要详细说明区块链的算法，我们还得回到中本聪在2008年发表的那篇经典之作——“Bitcoin：A Peer-to-Peer Electronic Cash System”。如果读者对区块链技术有兴趣，那么笔者建议你仔细阅读一下原文：https://bitcoin．org/bitcoin.pdf，因为这篇文章是整个区块链技术的基础。

双重消费问题

在中本聪设计的算法出现之前，下面这个问题没有一个去中心化的系统能够完整实现：

如果A有100个比特币并且同时向B和C发送这100个比特币，那么这两笔交易只能有一个被确认成功。

没有固有的方法可以决定这两笔交易哪一笔先成功，只有首先被确认的交易才会生效。如果两笔交易都被确认了，那么“双重消费”的问题就出现了。在中本聪的解答出来以前，这个问题阻碍了去中心化数字货币的发展许多年。

“拜占庭将军”问题

另外一个问题是“拜占庭将军”问题（Byzantine failures）。所谓的“拜占庭将军”问题是一个协议问题：

当年的拜占庭罗马帝国国土辽阔，为了防御，每个军队都被分隔得很远，将军与将军之间只能靠信差传消息。拜占庭帝国军队的将军们必须全体一致决定是否攻击某一支敌军，不过问题是这些将军在地理上是被分隔开来的，并且在将军中存在叛徒。叛徒可以任意行动以达到以下目标：



欺骗某些将军采取进攻行动。

促成一个不是所有将军都同意的决定，例如当将军们不希望进攻时促成进攻行动；或者迷惑某些将军，使他们无法做出决定。



如果叛徒达到了这些目的之一，则任何攻击行动的结果都注定是失败的，只有完全达成一致才能获得胜利。

“拜占庭将军”问题是对现实世界的模型化，由于硬件错误、网络拥塞或断开，以及遭到恶意攻击，计算机和网络可能出现不可预料的行为。拜占庭容错协议必须要处理这些失效，并且这些协议还要满足所要解决的问题要求的规范。

中本聪的设计要解决以下几个关键问题：



分布式的共识

不需要第三方介入的交易

避免“双重消费”的问题

解决“拜占庭将军”的问题



另外，中本聪的设计还做了以下几个假设：



所有的交易在P2P网络上完成

每一个节点可以随意加入和离开P2P网络

每一个交易都是不可逆的

所有的交易都是可追溯的

网络上良性的节点数量要大于恶性的节点数量



每一个比特币从出生开始所有的交易记录都会被保留，都可以被追溯起源。

在中本聪提出的区块链加密算法中，交易完成的过程如下图所示。



区块链技术上的交易示意图

（来源：Bitcoin：A Peer-to-Peer Electronic Cash System，中本聪）

在比特币网络上的每一个人都有一对钥匙：对外公开的公钥和自己保留的秘钥。交易的过程是这样的：

（1）区块链的最后一个环节是Owner1，他用Owner0的公钥验证了前一笔交易。

（2）Owner1用自己的秘钥签署了交易（Transaction）。

（3）交易从Owner1传送给Owner2，并向全网广播。

（4）Owner2用Owner1的公钥来验证交易。

（5）交易成功，Owner2加到链条中。

如果交易仅此而已，那么我们并没有解决所谓的double spending（双重消费）的问题。如果Owner1同时把比特币发送给两个人，那么如何解决冲突呢？在中本聪之前，有很多人试图解决这个双重消费的问题，不过最后的解决方案要么需要一个中心节点，要么就回到了需要第三方来仲裁的方式。而这两种解决方案都违背了最初设计的初衷。

中本聪提出的解决方式就是在上述步骤的第（3）步加入的。如果要去掉中心，则需要做到两点：

（1）每次的交易都向整个网络做广播。

（2）在P2P网络中最早打上时间戳的那个交易被认定为是成功的交易。

当交易在广播的时候，需要得到足够多节点的确认，那么交易才能够完成，在第（5）步之后这条交易才能够顺利打包加入到区块中。





区块组成区块链的方式



下图是对区块链中间一段的简单描述。其中每个区块都有指向前一个区块的链接，一直到最初创建的区块，而在区块链系统上发生的每一笔交易都会存在于某一个区块中，并被永久保存。例如区块54中包含了链接，链接到区块53；区块53中包含了链接，链接到区块52；区块52中包含了链接，链接到区块51，以此类推，直到最初的一个区块。



区块链的组织方式

（来源：http://bitcoinist.net/）

我们来看一下区块链中最核心的区块是怎样组织的。

区块的结构

每个区块的结构都如下表所示。

区块的结构



数据项 描述 长度

Magic no魔术数 常数0xD9B4BEF9 4字节

Blocksize块大小 到区块结束的字节长度 4字节

Blockheader区块头 包含6个数据项 80字节

Transaction counter交易数量 正整数VI＝VarInt 1～9字节

Transactions交易 交易列表 Multiple Transactions多个交易

每个区块都包括了一个被称为“魔术数”的常数0×D9B4BEF9、区块的大小、区块头、区块所包含的交易数量以及一些或所有近期的新交易。

在每个区块中，对整个区块链起决定作用的是区块头。下表展示的是区块头中包含的数据项。

区块头的结构



数据项 描述 更新时间 大小

Version版本 区域版本号 更新软件后指定的新版本号 4字节

hashPrevBlock前一区块的Hash 前一区块的256位Hash值 新的区块进来时 32字节

hashMerkleRootMerkele根节点Hash值 一个区块中所有交易的256位Hash值 接受一个交易时 32字节

Time时间戳 从1970-01-01 00：00UTC开始到现在，以秒为单位的当前时间戳 每几秒就更新 4字节

Bits当前目标Hash值 压缩格式的当前目标Hash值 当“挖矿”难度调整时 4字节

Nonce随机数 从0开始的32位随机 产生Hash时 4字节

这里的hashPrevBlock数值就是区块之所以能够连接成区块链的关键字段，该字段使得各个区块之间可以连接起来，形成一个巨大的“链条”。每个区块都必须指向前一个区块，否则无法验证通过。这个区块链条一直追溯至源头，也就是指向创世区块。创世区块的hashPrevBlock值为零，或者说为空。

在区块头中最关键的数据项是一个随机数Nonce。这串数字是一个答案，而这个答案对于每个区块是唯一的：



这个答案很难获得。

有效答案有多个，不过我们只需要找到一个答案就可以了。

其他区块对有效答案的验证很容易。



因为问题很难解答，没有固定的算法可以求出答案，所以唯一的做法是不断尝试。找寻这个答案的过程就叫作“挖矿”，同时有很多人都在“挖矿”，他们互相之间是相互竞争的关系。

工作量证明

目前，要在比特币区块链系统上找到这串能够作为解答的编码，除随机尝试外没有更好的方法。生产这么一串正确的数字编码是需要消耗大量计算资源（CPU、硬盘和电源）的，而这个过程就是我们经常所说的POW（Proof of Work，工作量证明）。

如下图所示，工作量证明就是确保正确答案很难被获取，不过却很容易被验证的一种方式。



工作量证明的示意图

（来源：https://www.bitcoinmining.com/what-is-proof-of-work/）

换一种方式说，工作量证明很简单，它就像是一门很难的课程的资格考试。想要答对所有的试题是需要精力和时间的，不过如果试题全部是选择题，则验证答案是否正确是非常容易的。好事者可能会问：“如果我不知道答案，可以不断尝试啊！”的确，你可以试着不断提交答案，不过如果有100道题，而每道题有4个选择，那么答案的组合方式有4^100种。你是无法在有限的时间内把答案尝试出来的，况且，你能够尝试的时间只有10分钟。10分钟之后，会有100道不同的题目来等着你回答。

如果某个节点回答出一个合理的区块Hash值，那么说明该节点做出了工作量证明，确实经过了大量的尝试计算。我们是无法得出计算次数的绝对值的，因为寻找合理的Hash值是一个概率事件。当一个节点拥有占全网n％的算力时，那么该节点即有n/100的概率找到Hash值。

权益证明机制

POW是达成共识（consensus）的一种方式，不过它不是唯一的方式，还可以有其他的方式让各个节点达成共识，例如POS。

POS（Proof of Stake，权益证明机制）不同于POW之处在于，在POS系统上“挖矿”是以货币的持有数量为基础的。换句话说，在POS的情况下，一个人拥有虚拟货币的5％和在比特币系统上拥有系统5％的算力的效果是一样的。

对于POW和POS孰是孰非的争论在比特币区块链社区中吵得人仰马翻。究竟哪种方式更好或者是否还有更好的“挖矿”机制不是本书讨论的重点。有兴趣的读者不妨去研究一下区块链社区中的各种说法，自己来做判断。

“矿工”存在的意义

当“矿工”找出一串编码来解答问题的时候，整个比特币的用户群体会奖励那个造币者一定数额的比特币（目前是25个比特币）。正是为了这些奖励，大量的极客加入到开发比特币的过程中来。

因为每解决一个区块，都会得到新产生的比特币奖励，所以在区块头中包含了一个记录，记录中的比特币地址是有权获得比特币奖励的地址，也就是“矿工”的比特币地址。

读者可能会想到，如果用一台或者很多台计算速度很快的电脑，那么能否快速解决问题呢？中本聪已经考虑到这个问题，所以在他的系统设计中，问题的难度是随着时间变化而进行调整的。

下图中展示的问题的难度已经用指数的方式调整过了。随着时间的变化，“挖矿”的难度是呈指数级上升的。



比特币挖掘的相对难度

（来源：https://en.wikipedia.org/wiki/Bitcoin）

每个区块在新生产的时候，比特币的奖励数量在最初的时候是设定为50个，而每产生21万个区块后奖励数量会减少一半。目前开发出来的区块约有39万个，所以奖励的比特币数量是50个的一半，也就是25个，等到开发的区块达到42万个的时候，奖励的比特币数量还会再减半，变成12.5个比特币；达到63万个的时候，奖励数量会再次减半，变成6.25个比特币。以此类推。

区块链是所有比特币节点链接在一起之后形成的共享交易数据库，区块链中的节点都是通过上述的方式加入到比特币网络中的。所以，在区块链中包含了每一个在比特币系统上执行过的交易。根据这个信息，人们可以找到任何时候任何一个地址中的比特币数量。

在比特币区块链系统上的第一个区块被称作创世区块（Genesis block），它是由中本聪创建的。创世区块中包含了一条消息：

The Times 03/Jan/2009 Chancellor on brink of second bailout for banks.

（泰晤士报，2009年1月3日，首相府在第二次拯救银行的边缘。）

如果我们翻阅2009年1月3日的《泰晤士报》，则会在头版看到“Chancellor on brink of second bailout for banks”这条信息。



创世区块中包含的信息来自于2009年1月3日的《泰晤士报》

（来源：https://en.bitcoin.it/wiki/Genesis block）

这条信息说明创世区块的构建时间不会早于报纸出版的时间，而通常我们会把2009年1月3日作为创世区块创建的时间。

区块链上的每个区块都会包含前一个区块的Hash值，这就使得从创世区块一直到当前区块形成了一根链条。链条上的每个区块必定按时间顺序跟随在前一个区块之后，因为如果不知道前一个区块的Hash值则是没法生成当前区块的。

对于区块链中的任何一个区块，只有一条路径通向创世区块。然而，从创世区块出发，却可能有分叉。当两个区块生成的时间很接近的时候，可能会产生一个分叉。当分叉出现时，每个矿工节点会根据收到区块的时间，在先收到的区块基础上继续“挖矿”。哪个区块的后续区块先出现，则这个区块就被包括进主链，因为这条区块链更长，而分叉的另外一支就被废弃了。

如果有人想要改变一个在区块链中已经存在一段时间的区块，那么从理论上来说是有可能的，不过从概率上来说是不可行的，因为如果它被改变了，那么它之后的每个区块必须随之改变。在中本聪的算法中证明了这一点。如果各位读者有兴趣，不妨去阅读一下原文。





“矿工”，区块链系统上的核心



最早在区块链上做研究的是一群沉迷于密码学的极客，而这些人中的大部分对区块链产生兴趣是从在比特币上“挖矿”开始的。

在区块链上的“挖矿”工作有三大功能：



发行新的货币

维系货币的支付功能

保障系统安全



“挖矿”是在比特币区块链系统中产生新的货币的唯一方式。在比特币系统中的交易一定是加载在区块中的，如果没有“矿工”的存在，则新的区块不会产生，交易也就无法完成。如果系统上的整体算力比较少，那么侵入者会比较容易占据51％的算力，从而威胁到系统的安全，所以“矿工”提供自己的算力也是保障系统的安全。

2016年1月，支持比特币区块链系统运行的计算能力已经达到了800000000GH/s，代表其每秒能够进行8×1018次运算，相当于号称世界运行最快的计算机——美国的蓝色基因超级计算机每秒运算速度的28571倍。

当“挖矿”的难度持续上升，而获取的奖励变少时，“矿工”的日子是一天不如一天了。当奖励从50个比特币减少到25个比特币时，“矿工”的数量也减少了。现在的总区块数已经超过39万块，而等到总区块数到达42万块时，系统奖励会从25个比特币减少到12.5个比特币。这个时间点会是在2016年。



真实的矿工

我们可以观察到的是，和2014年相比，比特币网络上的节点数在显著减少。

从下图中可以看出，比特币网络上的节点数和一年之前相比，减少了837个，也就是减少了12.64％。这是一件令我们担忧的事情：如果节点数少到一定的地步，则会很难找到一个P2P节点去连接和同步网络数据，整个区块链网络甚至有可能会逐渐陷入瘫痪。



比特币网络上的节点数比一年前减少了12.64％

（来源：https://bitnodes.21.co）

下表列出了目前节点的国家分布。

区块链节点的国家分布

（来源：https://bitnodes.21.co/）



排名 国家 节点

1 美国 1949（33.40％）

2 德国 792（13.57％）

3 法国 419（7.18％）

4 荷兰 335（5.74％）

5 加拿大 271（4.64％）

6 英国 269（4.61％）

7 俄罗斯 170（2.91％）

8 瑞曲 139（2.38％）

9 中国 107（1.83％）

10 澳大利亚 105（1.80％）

有趣的是，虽然在“矿工”的比例和比特币交易的比例上，中国占比很高，不过在运行节点的比例上，中国只排到第9名，节点占比数只有1.83％。

“挖矿”需要消耗大量的电力，运行节点同样也需要资源，所以维护整个比特币网络是很耗费资源的。据估算，目前运行比特币网络需要的电力会超过1GW（100万千瓦），差不多相当于整个爱尔兰所耗费的电力。仅仅从能耗的角度来看，比特币网络其实是相当不环保的。当然我们分析问题不能只从能耗这一个角度出发，要考虑其带来的深远影响。

之前我们在讲述POW的概念时，也提到过取代性的证明方式，例如POS权益证明机制。在POS体系中，只有打开节点其上的区块才会获得利息，这就让很多本来不愿意长期维护节点的人，也会经常把自己的节点打开。

其实，笔者在阅读关于POW和POS之争的时候，对于“挖矿机”这样对于计算资源的浪费还是很心痛的。如果将这些计算资源用在更有价值的科学研究上，例如2.2节提到的SETI＠Home项目上，如果解决一个数学问题就能有概率获取一定的虚拟货币，那么这样不是两全其美吗？





2.2　点到点网络和区块链



区块链就是一个P2P网络，也就是点到点网络。在区块链网络中没有中心服务器，也没有中心路由器。如果任何一个或多个节点从区块链网络中丢失，则数据也不会丢失。





P2P技术解析



区块链的底层技术之一就是P2P技术。下面首先来看一下P2P技术究竟是怎样的。

这里的P2P指的是点对点的技术，而不是P2P贷款。P2P技术是一种网络技术，是与客户端/服务器（CS）模式相对应的一种网络信息交换方式。

在第1章中，我们讨论过区块链系统的三大特点：



去中心化

不需要一个管理机构

不需要第三方仲裁



碰巧的是，这三个特点同时也是以P2P技术为基础的系统所具有的特点。

由于P2P方式能够缓解传统CS架构中服务器端压力过大的问题，也不会有一点失效全局崩溃的问题，同时又能充分利用网络上闲散的计算和存储资源，所以P2P技术能被广泛应用于互联网的各个领域。

我们这里提到的P2P所利用的闲散资源主要有两类：

（1）计算资源

（2）存储资源

对于前者，用P2P来充分利用计算资源的代表当然非SETI@home项目莫属。



SETI@home项目

SETI@home是由美国伯克利大学发起的一项利用全球联网的计算机共同搜寻地外文明（SETI）的科学实验计划。你可以通过运行一个免费程序下载并分析从射电望远镜传来的数据来加入这个项目。从1999年开始，这个项目正式启动，面向全世界招募计算资源来加入外星探索，到2005年这个项目中止的时候，共吸引了543万名用户来参与，他们分析的积压数据数量是伯克利大学凭一己之力绝对无法完成的。

可能读者对存储资源的共享会了解得多一些。在P2P下载出现之前，大文件的下载和共享是一件非常令人头疼的事情。当700MB的文件传输到99％时突然断网或者Windows重启，你还得从头再来。BitTorrent，或者简称BT，就是一项P2P存储和传输技术。



BitTorrent

BT的操作是这样的：

（1）将文件切成分块，并将分块信息保存在一个流（Torrent）文件中。

（2）当你需要下载文件时，首先下载这个流文件，而这个文件也被称作“种子”。

（3）每个用户根据流文件中提供的信息，将文件的分块下载下来。

（4）用户在下载该文件的其他分块时，向其他用户共享自己已经下载的分块。

（5）当一个文件的每个分块都被下载到本地电脑中之后，这些分块就可以拼装成一个完整的文件了。

BT是无中心的，上述步骤（1）的发起者可以是P2P网络中的任何一个用户。当文件被多个用户下载之后，文件在P2P网络上就会有多个备份。需要这个文件的用户能就近获取文件的各个部分。

P2P技术和区块链技术是密切相关的。另外一个虚拟货币XRP（瑞波币）的发明者，Ripple Labs的创始人——Jed McCaleb，其本人就是P2P网络eDonkey（电驴）的发明者。

在最早的P2P系统中，系统上的每一个节点同时作为客户端和服务器端。在系统中没有中心服务器，也没有中心路由器。如果某一个资源从系统上的每一个节点中都消失了，那么这个资源也就再也无法被找到了。



很多网络视频公司是最早实践P2P算法的公司，因而也是最早对区块链技术感兴趣的公司。





中心化区块链的实现方式



当我们要通过分布式区块链系统进行转账时，假设Alice要发送10个比特币给Bob，简化的流程是这样的：

（1）Alice在系统上发布一条转账10个比特币给Bob的消息。

（2）这条消息被一个“矿工”Camen加到他的区块中。

（3）“矿工”Camen“挖矿”成功，把区块发布给区块链网络做验证。

（4）验证成功，区块被加到区块链中。

（5）Bob接收到Alice转账的10个比特币。

按照我们在前文的说法，这个过程平均需要10分钟，也就是一个区块被“矿工”挖出来的时间。基于区块链的比特币系统是完全去中心化，没有监管，没有仲裁方的；而传统的金融机构IT系统是有中心，有监管，有仲裁方的。

其实，我们并不需要在这二者之间做选择，不需要从一个极端走到另外一个极端。对于不同的使用场景，我们可以采用这两种方案的中间状态。在第7章会介绍半开放式分布式账本的概念，它就是基于两者之间的方案。

下图展示的是伦敦大学学院（University College London）的George Danezis和Sarah Meiklejohn两位学者在2015年提出的一种方案：在中心服务器上部署区块链系统，而用分布式系统来接受交易。银行的中心服务器上布置了区块链，其中的交易区块都是比较大的，终端用户看到的数据都是由中心服务器提供的。采集数据来源于很多被称为“miniette”的小节点，这些小节点互相沟通，构建小的区块并传送给银行系统的中心服务器。



RSCoin中心化区块链的系统示意图

（来源：参考文献Centrally Banked Cryptocurrencies）





区块链是分布式存储



我们可以认为，区块链其实就是基于P2P的一种分布式存储的方式。其核心思想在于让网络上存在完全相同数据的N个拷贝，当其中某一个拷贝的数据发生改变的时候，信息能够快速同步到其他的节点。

在比特币网络中，交易是对全网广播的，区块链存储的是比特币的完整交易记录表，网络上的每一个节点都有这个交易记录表的完整拷贝。这个交易记录表是对网络上所有人公开的，任何一个人都可以查看记录表的细节。

例如你可以查看https://blockexplorer.com/，如下图所示。

下图展示的是在比特币区块链上最新的交易，而每一个交易都被包含在某一个区块中。



比特币网络上的最新交易

（来源：https://blockexplorer.com/）

区块链作为分布式存储的独特点之一在于其可以对存储的数据记录设置规则。在一般的数据库中，这样的规则设定可以在数据库层面，而很难设定在记录层面。

正因为区块链算法本身最大的核心点之一就是区块链，所以用区块链来实现数据的分布式存储是一个不错的想法。不过因为完整的数据备份是以文本的方式分散在系统的各个部分，所以完本数据的数据量是一个问题。

区块链存储做的是全冗余，也就是说核心账本数据在每个节点之上都有一个拷贝。这样的系统可读性是最好的，不过写入过程就会麻烦很多。

在撰写本书的时候，区块链每秒只能处理约两笔交易，而这个数字对很多实时系统来说是远远不够的。对此，以太坊的联合创始人Vitalik Buterin是这么说的：

“区块链处理能力低下的主要原因是网络中的每个节点必须处理每一笔交易。因此，与其他节点越多越强大的去中心化系统（例如BitTorrent）不同，区块链节点越多反而性能越弱，至少交易处理能力越弱（因为网络扩张以后，延迟以指数速度增长，每个节点的处理能力却一点没增长）。”

在普通的分布式存储系统中存储的是数据，通常我们很难验证数据的来源和真实性。而在基于区块链的系统中，数据的状态和来源可以一并保存，我们可以验证某一条数据最后一次是由谁添加的（可能是匿名的）以及被添加的时间，还可以验证这条数据是否被动过手脚。





2.3　智能合约的技术实现



信任的原理是点与点的链接，存在于物理和数字空间，存在于真实世界与虚拟世界，它或许存在于某一个空间，或者存在于两个不同的空间，这两个空间有着天然的链接，是分布式的，没有中心化的存在。信任关系通过算法转化为代码，代码形成程序，程序驱动着链接，而信任的链接是在一个系统里，经过注册、登记、交易，一切都在程序里进行，一切都在0和1之间转化。这里没有权威，没有意见领袖。这是一个纯天然的社区，一个去中心化的社区，是协作式的，而其基础架构就是区块链技术。

这就是算法式信任的原理。

我们常说区块链系统是一个“Trustless”的系统。这里的“Trustless”说的就是区块链系统实现了算法式信任。你不需要信任任何人或者机构，一切都由程序来完成。

算法式信任是机构式信任天然的敌人。智能合约就是一种协议，这个协议连接的主体不再是人和物，而是物与物。

从下图中我们可以看到，智能合约和传统的执行方式是不同的。智能合约简化了整体的流程，通过程序语言来强制执行，而正是因为智能合约是基于区块链的系统，合约执行的结果还会得到系统的验证。



智能合约的简化、强制执行和验证

智能合约采用的是编程语言，而不是法律条文，因为智能合约是运行在区块链系统之上的。用一句话来说，智能合约就是“code is law”（代码即法案）。当我们约定了一个智能合约之后，即使是系统的运营方也是无法轻易改动它的。

智能合约的特点是制定合约、执行合约和验证合约的成本相对比较低，而且可以在多个记录上同时执行。在区块链中，智能合约的实现是可以落实到底层数据记录层面的。





案例：看涨期权的智能合约



在介绍了智能合约的大概念之后，下面以Call Option（看涨期权）为例来介绍智能合约是如何实施的。

看涨期权是指在协议规定的有效期内，协议持有人按规定的价格和数量购进股票的权利。期权购买者购进这种买进期权，是因为他对股票价格看涨，认为将来可获利。在期权到期的时候，如果股票市价高于协议规定的价格，则期权购买者可按协议规定的价格和数量购买股票。

从下图中我们看到，Premium（期权价格）是用户需要支付的期权价格，在支付了这个价格之后，买家和卖家就等于签订了一个合约。在合约到期的时候，买家可以选择是否执行期权，而卖家则没有选择，必须以规定的价格把股票卖给买家。



看涨期权的示意图

（来源：https://en.wikipedia.org/wiki/Call_option）

看涨期权买家Bob和卖家Alice针对一个股票ABC的智能合约是这样定义的：



合约中包含100股ABC股票对应的看涨期权。

合约对应的行权价（Strike Price）是每股45美元。

在期权到期（expire）的时候，如果ABC的价格在每股45美元以下（含45美元），那么期权自动作废。

在期权到期（expire）的时候，如果ABC的价格在每股45美元以上，那么Bob以每股45美元的价格从Alice这里购买100股ABC股票。这里有两种情况：





如果Alice账号里有100股ABC股票，那么从Bob的账号里转4500美元到Alice的账号里，从Alice的账号里转100股ABC股票到Bob的账号里。

如果Alice账号里没有ABC股票，或者不够100股，那么系统首先用Alice账号里的钱按照市场价购买100股ABC股票，然后从Bob的账号里转4500美元到Alice的账号里，从Alice的账号里转100股ABC股票到Bob的账号里。



在金融市场上各种金融产品的衍生品种中，看涨期权的交易是最简单的，这些衍生产品的交割本来是非常复杂的，如果我们能够以智能合约的方式把交易的方式描述清楚，区块链系统就可以自动把合约完成，而不会存在系统性的问题。





2.4　区块链系统的安全和隐私



区块链系统以及之上的所有应用都是用程序语言来编写的，而写过程序的人都知道，但凡是程序，都会有Bug的存在。有些Bug可能是逻辑上的错误，不过更多的Bug其实在业务逻辑和程序逻辑上是没有问题的，只是没有考虑到某些特殊情况的处理。例如我们设计了一套智能合约的逻辑，在开始运行了之后发现好像有漏洞。这时，有的黑客可能就会利用这个漏洞来赚取利益。

区块链系统也需要由人来编写程序，那么我们面临着下面几个问题：



我们用什么来保证系统本身是安全的呢？

如果有人在系统中隐藏了恶意代码怎么办？

系统会不会有后门？

系统为什么能够保护上面所有人的隐私呢？

系统为什么能够保证对所有的用户都是公平的呢？



这就是开源项目的美妙之处。比特币项目的源码目前托管在Github上共享，你可以从这里https://github.com/bitcoin/bitcoin/获取代码。目前这一项目是由比特币基金会维护的。如果任何人想要添加恶意代码或者试图从系统的漏洞中牟利，几乎是不可能的。

在传统的金融系统中，我们通常需要做身份验证和权限验证：



身份验证

权限验证



身份验证是向系统证明你是真实的用户，而权限验证是证明你有足够的权限来做对应的操作。

在区块链系统上，只要你能够登录系统，那么你就可以做支付、转账等各种操作，系统是不会向你要求额外验证的。

原始的区块链算法其实有一个弱点。在虚拟货币领域，如果任何攻击方能够掌握网络上51％的算力，就能够操纵货币的交易。除比特币外，其实还有很多其他的虚拟货币，当它们还没有太多人在使用的时候，掌控网络上51％的算力其实并不难，而这也是有些虚拟货币昙花一现的原因。

而区块链技术的去中心化导致了当51％的算力被黑客掌握时，系统的缔造者也回天无力，除非修改核心系统，否则他们是无法干预系统的运营的。而当他们修改核心系统的时候，区块链系统原有的公正和信任就被完全破坏了。

下面举一个例子。

在2015年9月12日的Blockstack峰会上，数字货币初创公司Onename做出了一个重大决定，其联合创始人Muneeb Ali在演讲中表示，Namecoin（域名币）的网络已不再去中心化，因为神鱼的挖矿集团控制了域名币60％～70％的算力。为此，Onename决定舍弃Namecoin的区块链，把他们的32000个应用转而切换到比特币区块链。在第8章中会介绍Namecoin的应用。

如果我们考虑把区块链技术作为多冗余分布式系统的底层框架，一旦黑客发现某种方式并合理地修改了系统上某些交易数据，那么这些虚假的数据也会被复制到其他的节点上，从而使得整个系统的数据都有虚假的部分。

笔者曾经和迅雷公司的技术副总裁刘智聪深入探讨过区块链技术。他是这么说的：

“区块链技术提供了一种机制，在无中心的P2P网络中实现了多副本写入的最终一致性。利用这个特效，可以在这个网络之上建立不属于任何人，信息公开、透明、安全（无法被篡改）的公共交易系统。这个技术有两个主要缺点，其中一个缺点是靠牺牲大量的计算/通信时间，以及相当大的写入延迟来达到多副本写入的最终一致性。比如往账本里写一条交易记录，信息量可能就有1KB，但最终被整个网络所接受，需要在网络上传输上百兆的数据。另一个缺点在于其算法根基上要求50％以上的算力是在按正常的逻辑工作，但基于该技术的产品在成长过程中，有可能被黑客操作大量的“肉鸡”实现控制50％以上的算力。这个问题的解决需要整个互联网上只有一个区块链网络，这个网络的规模足够大，可以尽量避免出现这个问题。而互联网的网络基础设施在本质上仍然掌握在政府手中，几个主要的大国如果需要，则可以对区块链中的大量节点进行接入限制甚至直接控制。

智聪提出的区块链系统上的两大缺点也是笔者在研读区块链系统的时候所注意到的。其中的第一条，关于系统资源的浪费，这是为了达成区块链系统的DACT特性所必须付出的代价。区块链社区里还有很多人在努力改善这个缺点，而如果考虑到在后文中会提及的有中心节点的分布式账本解决方案，则这个浪费会得到很大程度的改善。对于第二条，笔者认为不需要过于担心。如果存在这样的可能性，那么最好的办法就是完全不用互联网，不用手机，过与世隔绝的隐士生活吧！





2.5　区块链资源一览



在我们看来，区块链技术本身并不是一套完整的解决方案，它只是包含了很多特性的一种理论，一种技术再组合的创新。在开发实现上其也不拘泥于一种语言，可以用C语言、C＋＋或者Python等去完成。

关于区块链的研究和社区有很多，来自密码学、金融领域和技术领域的很多专家学者每天都在为区块链社区添砖加瓦。





给程序员的资源



程序员是技术的实际执行者，自2009年比特币问世以来，越来越多的技术爱好者参与其中，讨论研究着比特币和区块链的理论与核心技术。

很多技术发烧友的研究路线由代码开始，但区块链的源代码晦涩难懂，导致研究起来速度过于缓慢，下面笔者整理了一些参考资源，以便于感兴趣的读者快速入门。



CSDN（http://www.csdn.net）：技术者开发园地。

以太坊（http://ethfans.org/）：区块链技术研究平台。

Github区块链源码（https://github.com/bitcoin/bitcoin）：区块链技术源码提供平台。



如下图所示，对区块链感兴趣的程序员越来越多，区块链上的开源代码也越来越多，虽然比特币的价格在持续走低。正如我们在本书中一直强调的，虚拟货币和区块链未来的发展和应用本身并没有多大关系。



GitHub上和区块链相关的代码库和比特币价格的比较

（来源：http://www.kpcb:com/）

举例而言，我们在GitHub上检索“blockchain”时，有1060个结果展现，其中用编程语言JavaScript作为实现手段的排在首位（262个），Python排在第2位（114个）。在Github社区上，笔者整理了一下作为程序员可以参考的源代码：

（1）比特币

源码：https://github.com/bitcoin/bitcoin

（2）Openchain

主站：https://www.openchain.org/

源码：https://github.com/openchain/openchain

（3）Factom

主站：http://factom.org

源码：https://github.com/FactomProject/FactomCode

标签：文件存储

（4）OpenBazaar

源码：https://github.com/OpenBazaar/OpenBazaar

标签：电子商务

（5）Blockscore

源码：https://github.com/BlockScore/blockscore-ruby

https://github.com/BlockScore/blockscore-php

https://github.com/BlockScore/blockscore-python

https://github.com/BlockScore/blockscore-node

标签：身份验证

注：该源码有四种实现方式（Ruby、PHP、Python、Node），感兴趣的读者可以都试一试。

（6）LaunchKey

源码：https://github.com/LaunchKey/launchkey-ruby

https://github.com/LaunchKey/launchkey-php

标签：身份验证

（7）Blocktrail

源码：

https://github.com/blocktrail/blocktrail-webwallet

标签：数据API

（8）Codius

源码：https://github.com/codius/codius-host

https://github.com/codius/codius-engine

标签：社交通信

（9）小蚁

主站：www.antshares.com

源码：https://github.com/antshares/antshares

标签：众筹





区块链的社区和信息资源



以下这些社区和网站是关注区块链领域信息的读者可以仔细浏览的。

巴比特（http://www.8btc.com）：比特币和区块链的开放研究平台。

比特币资讯网（http://www.bitcoin86.com）：比特币相关信息汇集中心。

比特头条（http://www.bitett.com）：关于比特币和区块链的信息网站。

未央网（http://www.weiyangx.com）：互联网金融门户。

本节只精选了几个网站，如果读者意犹未尽，那么请逐一访问附录C中列出的本书的参考网站。





第3章　区块链在虚拟货币领域的应用




在比特币和各种主流互联网货币的背后，其实采用的都是区块链技术。本章主要介绍基于区块链1.0，也就是基于区块链技术的比特币和虚拟货币的应用。

亚里士多德曾经说过：

“金钱的出现不是出于自然而是出于人为的力量，我们有能力改变它或废弃它。”

如果让国家、银行等传统金融机构来发行或者推广电子虚拟货币，则它们显然对此没有兴趣。因为世界上有美金、欧元、人民币，何必再费神费力地搞出或者支持其他的货币呢？这也是在比特币产生之前，电子虚拟货币没有大规模流行的根本原因。



去中心化设计的比特币

（来源：http://dcebrief.com/）

去中心化设计的比特币，突破了国家、传统金融机构和各个商业组织的限制，使得数字货币本身控制了自己的发行，使其作为通用货币成为可能。

本章主要解答以下这些问题：



比特币是数字货币吗？

区块链技术究竟是如何应用在比特币上的？

比特币和法币有什么区别？

比特币是否是一个好的投资？





3.1　从加密货币到数字货币



虚拟货币领域的发展非常快，以至于目前对“虚拟货币”都还没有一个公认的官方定义。

IMF（International Monetary Fund，国际货币基金组织）在2016年1月给出了一份报告：Virtual Currencies and Beyond：Initial Considerations（《虚拟货币及其发展：最初的考虑》）。

在报告中，IMF把比特币定义为“加密货币”（cryptocurrency）。IMF对于虚拟货币是这么定义的：

虚拟货币（Virtual Currency）是价值的数字体现，是由私有的开发者们发行的，并且有自己的面额。虚拟货币可以用电子的方式获取、存储、访问和进行各种交易。虚拟货币的概念覆盖了各种“币”，从最简单的优惠券、航空公司里程数，到比特币等。

从下图中我们可以看到，比特币这类虚拟货币也属于数字货币的范畴，而在数字货币中那些以法币作为计量单位的就不算虚拟货币。例如如果央行发行了数字货币，那么它就不算是虚拟货币。



数字货币、虚拟货币和加密货币的关系

（来源：IMF内部报告）

比特币这类加密货币有以下的特点：



用电子的方式传递。

不以法币为计量单位。

可以转换成现实世界中的商品、服务和真实货币。

无中心。

用密码学的技术来验证。



简而言之，比特币是数字货币，也是虚拟货币，不过最主要的是它属于加密货币的范畴。反过来说，不是所有的数字货币都是虚拟货币，也不是所有的虚拟货币都是加密货币。

中国人民银行行长周小川说过，区块链技术是数字货币的一项可选技术。他同时还说，对于央行掌控的数字货币，会采用一系列的技术手段、机制设计和法律法规，来确保数字货币运行体系的安全，一开始就与比特币的设计思想有区别。笔者进一步诠释一下，此段话就是说：比特币的设计思想是无政府主义的，而央行发行的数字货币是有法定地位的。如果我们要往前推进区块链，则需要很清晰地把区块链和比特币分开，或者说在区块链1.0和区块链2.0之间画一条清晰的界线。





3.2　比特币背后的0与1



如果把比特币算法比喻成一个有奖答题的方程式，那么比特币网络上所有的人都在同时试图抢答各自的方程式。每一个方程式都有自己的答案，而且一旦一个方程式被某一个人所解开，则其他人就无法再次解开他们自己的方程式来获取奖励了。所有的人都会得到另外一个方程式来做解答。

每一个“矿工”手里都有目前所有比特币拥有者的公开信息和他们所拥有的比特币的数量，你也可以从https://blockchain.info/这个网站上随时查阅到你所拥有的比特币数量。



Blockchain.info的商标

除了是一个有价值的信息资源，blockchain.info还是世界上最大的在线比特币钱包网站之一，目前它的在线钱包数量已经超过了3700000个，每天通过blockchain钱包进行的交易超过50000笔。

在第2章中，我们详细解释了比特币和区块链系统背后的算法。如果你跳过了第2章，那么不要紧，下面我们会用更加简单的语言来解释一下比特币背后的原理到底是怎样的。





比特币区块链的原理描述简介



自互联网诞生之日起，发明一种脱离政府和银行监管，匿名并且便利的互联网货币，一直都是极客社区中的一个热门课题。

传统的解决方案是集中式地管理，采用“中央票据交换所”之类的解决方案，将所有的交易实时地汇总成总账。简单地说，这样的数字货币不仅仅存在于你的电脑、手机上，同时它在中央票据交换所也有一个备份，而且以中央票据交换所的数据为准。

这样，如果有人花掉一个数字货币，那么他就不能再重复使用此数字货币了。实时总账虽然让货币使用者无机可乘，但货币的发行就不得不控制在中央票据交易所手里。

比特币的原理，简单说来，就是在一个足够大的P2P网络中，有一个人发明了一个算法，在通过测试和验证之后得到了大家的认可。每一组新制造出来的比特币提供了把旧的比特币从一个账户转移到另一个账户的数学保证，而比特币其实就是能被这个网络认可的一串数字编码。第一个发现这组可用数字编码的人就是这串编码的造币者。

在比特币网络上有一个区块链，也就是一个完整的全局表，每个新的比特币都需要利用之前的信息才能产生。从概率的角度来看，如果尝试的次数足够多，则一般都能找到满足要求的数字。

每个想通过制造比特币赚钱的人，都在不停地在比特币网络上监听信息。如果有人发布了新的合法的数据块，则他就把它合并到本地电脑的全局表（区块链）里。

他不断地把下面三条数据合并在一起：



自己随机生成的数字

最新的全局表

那条自己获得25个比特币的奖励信息



然后计算编码，看看结果是否满足条件。一旦满足，他就把这个新的编码广播出去。当P2P网络上有足够多的人认可，他就成功了，也就获得了那25个比特币。如果按照每个比特币价值3000元人民币计算，他就得到了75000元。这个反复操作的过程就被称作“挖矿”。

这个用以产生比特币的P2P网络我们称之为比特币网络。在比特币网络上，每个节点都会记录从比特币诞生以来每笔交易的细节，并从中可以推测出：



每个比特币目前唯一属于谁

每个比特币是否可以从一个人转移到另一个人手中

每个人有多少比特币



下面举例说明。

假设下面的内容是账本的一部分：

……

……时间点T

Z向A转账100个比特币

A向B转账30个比特币

B向C转账10个比特币

A向D转账5个比特币

B向D转账5个比特币

C向D转账5个比特币

A向W转账20个比特币

矿工G挖出25个比特币

……时间点T＋10

……

如果A、B、C、D这4个人账本里的比特币数量在时间点T之前都是0，那么在上述这些操作之后，他们各自账本里的比特币数量大致如下表所示。

比特币账户余额示意图



账户 比特币数量

A 45

B 15

C 5

D 15

这里以账户B为例，他收到了A向他转账的30个比特币，然后向C转了10个比特币，再向D转了5个比特币，所以他的账户余额是15个比特币。

在目前的条件下，每小时只会产生大约6组新的比特币，而一组比特币的数量是25个。也就是说，在这个世界上，每小时大约只会产生150个新的比特币，最终比特币总数会达到2100万个。在总额固定的情况下，可想而知，“挖矿”的难度会越来越大。

在区块链上，所有的交易都存在于某一个区块中，从最近的区块一直链接到最初的一个区块，也就是创世区块。

如果你想要交易比特币，则先要在比特币网络上开一个账户。每个账户其实就是一对公匙和秘钥，只有账户的所有者才有秘钥。

如果你的比特币需要转手，就把比特币的数量加上收款人的公匙，用自己的秘钥签名，并转给收款人。每笔交易都需要公证人来担保交易的发生。这样，交易的发起者再想使用这笔钱就不可行了，而收款人也能合法使用收到的钱，或者转给另外的人。在比特币环境中，这个公证人就是整个比特币网络。

在发起这笔交易的时候，出款人必须把签过名的交易单广播到整个P2P网络上，使得每个节点都知道这件事情，而收款人会从P2P网络上不断地收到别人听到这个消息的确认信息。最终，当收到足够多的确认信息后，就认为出款人的确发起了这条交易。从此以后，收款人就可以自由地使用这笔钱了。

如下图所示，如果A要向B转账，则他需要向网络发出申请，当有足够多的节点确认之后，钱才能到账。从理论上讲，会存在一种可能，即如果A向B转账的这条信息一直被每个“矿工”忽略，那么他们之间的交易就无法得到确认。



比特币转账的示意图

正如我们在第2章中介绍的，总有一些比特币会消失，这主要是因为从公钥到密钥的过程是不可逆的。如果丢失了密钥，就没有任何人可以拿到和密钥对应的这些比特币了。





交易费



在第2章中我们讲述过，一个新的区块被加入到区块链中是因为有“矿工”们的存在，那么未来当比特币越来越难以被挖掘出来的时候，该怎么办呢？

有了交易费就使得“矿工”们有意愿把交易加入到区块中，从而使得这些交易被认可。

通常，每1000个字节（向上舍入）的交易会有约0.1mBTC的交易费（相当于0.000 1BTC）。例如，发送900个字节的交易会产生0.1mBTC的交易费，而发送1002个字节（向上舍入变成2000个字节）的交易会产生0.2mBTC的交易费。在比特币系统上一个通常的交易约有500个字节，所以交易费约为0.1 mBTC。按照今天每个比特币价值2500元人民币来计算，交易费约为0.25元。

如下图所示，如果忽略几波淘金狂潮中的一些凸起的数据点，则比特币系统上的交易费在整体上是呈上升态势的，从2016年开始基本会维持在50BTC以上。



比特币系统中的交易费

（来源：blockchain.info）

当然，我们还需要关注的一个问题就是交易费能否足够大，从而支撑整个系统的运行。目前来说还不需要为这个问题而担忧，不过在未来的几年中，这是比特币区块链社区需要解决的问题。





3.3　比特币001？比特币002？



正因为比特币是由一个协议而产生的，那么只要我们稍微改动一下算法，就可以生成一个新的算法，这样说对吗？

事实上很多人都是这样想的，因而在比特币之后，有数以百计的虚拟货币出现。只要有人愿意用有价值的物品或者其他货币来获取这些虚拟货币，就可以对这些虚拟货币进行定价。

我们可以在http://coinmarketcap.com/这个网站上看到一些货币的列表。

从下图中我们可以看到，在我们撰写本书的时候，目前有据可查的虚拟货币有664个，整体的市场价值为68亿美元。



前五大虚拟货币（来源：http://coinmarketcap.com/）



虚拟货币总市值

除了比特币，还有其他几类虚拟货币也值得一提。



Litecoin（LTC）发布于2011年10月7日，是目前市值最高的山寨币，不同于比特币使用的SHA256挖矿算法，LTC采用scrypt算法。

PPCoin（PPC）发布于2012年8月19日，在比特币原有技术上有所提升。使用POS（proof-of-stake），并加入coin age概念。

Terracoin（TRC）发布于2012年10月26日，总币量为4200万个。每一个区块的生成速度为两分钟，比LTC稍快一些。其在技术上没有太多特别之处，同时也类似于比特币，每4年产量减半。



一个“货币”之所以能够存在，是因为它能够用来交换一个等值的“货”或者服务，或者能够兑换成另外一种有价值的“币”。如果任何人或者组织可以无中生有地创造出一些币出来，那么它如何能够有价值呢？这个问题其实是比特币和其他虚拟货币社区中讨论得最多的问题。其实，无论是现实货币，还是虚拟货币，只要能够在某一个时间点“有用”，或者说能够“变现”，就有其存在的价值。





3.4　是投资还是投机？



经常和朋友讨论比特币和其他一些虚拟货币的投资，笔者的观点是：绝大部分比特币交易者做的是投机（speculation），而不是投资（investment）。

说一件商品或者虚拟物品值得投资，它本身必须具有一定的价值。比特币本身具有什么样的价值众说纷纭，不过笔者并没有看到太多有实际意义的说法。

比特币和其他虚拟货币有两个大的问题：

第一，由于虚拟货币的发行机构不是一个国家或者国家认可的银行，也不是私人企业或者根本没有发行机构，因此没有国家的背书，这对其被用户所接受和使用是有影响的。

第二，虚拟货币能够流通取决于其购买力的稳定性，波动过大的虚拟货币没有作为流通货币的竞争优势。

而这两个大的问题恰恰是由虚拟货币的本质特点所造成的。可以不客气地说，目前拥有比特币的人除少数爱好者外，绝大部分是为了投机。

美国芝加哥大学的法学教授Eric Posner则不同意市场上认为比特币是庞氏骗局的说法，他是这么认为的：

“一个真正的庞氏骗局是存在欺诈的，而作为对比，比特币应该算是collective delusion（集体妄想）”。

中国的股市从摸索中开始，一路坎坎坷坷走到了今天，时至今日，依然没法改变一个很核心的问题：中国人喜欢投机，但是对于投资是没有概念的。今天，超过50％的比特币交易是用人民币来完成的，由此可见一斑。

请看下图，这是从2013年9月3日开始一直到现在的比特币周K线图。这样大的波动是中国广大投资者喜欢见到的。大家在意的并不是比特币最终会走到什么价位，而是能否在一个低位买入，在一个高位抛出。最好每天都能以450美元购买比特币，然后以470美元卖掉，之后，比特币又再跌回450美元，然后再买进，周而复始……



比特币周K线图

（来源：OKCoin）

我们来看一下比特币和其他可交易的货币与商品的比较。

下图展示的是2015年比特币与其他部分货币和交易品的波动性对比。在取了方差之后，比特币的波动性接近70％，与之唯一近似的是原油的波动性，接近50％，而在货币中，波动性最大的巴西Real，也只有20％。



比特币和部分货币及交易品的波动性对比

（来源：IMF报告）

比特币的波动性使得它很难成为一种被日常使用的货币。如果想让比特币被更多的人和机构所接受，就必须得让它在更多的地方被使用。

在比特币社区内，有大量的狂热粉丝和理想主义者认为，比特币能够塑造一个不受任何人和政府左右的金融系统。笔者见到的中国的区块链研究者们也大多算是这个社区的，不过他们中的大多数在意更多的是区块链而不是比特币，在意的是技术被真实的世界所接受。正如区块链社区内的名人达叔所说：

“我更愿意和现实讲和。我相信区块链的实名化是一个难以阻挡的趋势，也是区块链进入主流应用的前提。”

如果半自由主义者和现实主义者们能够在社区内占据话语权，在比特币的开放性上做一些妥协，那么比特币就可能会有更多的价值，从而真正成为一个值得投资的商品。





3.5　不得不提的Mt.Gox



在比特币创始之初，人们就对它寄以厚望，认为这将是一个改变整个世界的技术。在最开始的几年，比特币是由一群疯狂的理想主义极客所推动的。虽然他们有梦想，不过他们在金融领域内的经验非常少，在这些人中，最出名的就是法国人Mark Karpeles。

Karpeles在2011年从Jed McCaleb（前文中也提到过的Ripple Lab的创始人）手中收购了比特币交易所MtGox，并将其迅速发展成为世界排名第一的比特币交易所。Karpeles（占股88％）也因此变得极其富有，甚至因而将公司搬到了寸土寸金的日本东京涉谷。



MT.GOX

2011年6月19日，黑客盗用用户的Mt.Gox证书，将比特币转移到自己账户中进行抛售，导致汇率下降1美分，而之前的汇率为15美元。此为Mt.Gox第一次被黑记录。此后的3年，黑客不间断地给Mt.Gox制造了无数麻烦。

自2011年起，Mt.Gox长年遭受黑客的攻击，直到2014年2月24日，Mt.Gox的CEO Mark Karpeles在博客中宣称将退出比特币基金会，Mt.Gox正式破产倒闭。

Mt.Gox内部流传出来的资料显示，因黑客攻击导致的损失约为85万比特币（其中10万比特币为Mt.Gox自有，75万比特币为客户存储在Mt.Gox平台上的），总价值超过5亿美元。

不过Mt.Gox的问题并不是区块链技术本身的安全性不够所造成的。Mt.Gox存在的问题极多，其内部泄漏的资料显示，Mt.Gox交易所甚至没有用过任何版本的控制软件，所有的程序员只是碰巧在同一个文件夹下编程，任何一位程序员提交的代码都有可能覆盖其他同事提交的版本。在整个交易所内，只有一个人有权限核准代码变更，这个人就是Karpeles，这意味着用户通过Mt.Gox发起的交易有可能要等数月才能完成，同时也意味着这其中无数的漏洞是无法及时被发现甚至永远不可能被发现的。

在Mt.Gox交易市场被关闭的时候，InterTrader的总经理Shai Heffetz这样说过：

“如今全球货币战争变得激烈而血腥，所有的国家都大量印制钞票并且扭曲数据以掩盖它们疯狂印钞票的事实。人们口袋里面的钞票或许还可以填饱肚子，但事实是，生活支出的代价在过去5年内出现显著的增加，持续的货币宽松并无法永续。比特币和其他的替代货币正在开始被认为是传统法币的可行性替代方案；因为比特币无法受到任何政府的操纵，全世界的掌权派开始忧虑并展开一波镇压；当被掩盖的通货膨胀事实渐渐被外界获知时，人们就会开始采信某一种独立的数字货币以取代价值遭到过度膨胀的传统法币。”

2015年8月，Mt.Gox总裁Mark Karpeles被日本警方正式拘捕，所以Mt.Gox的故事还没有算完结。





第4章　数据驱动，区块链与数据挖掘




关于数据的这个章节出现在本书中看起来可能有些突兀。在互联网上查找过区块链相关资料的读者可能尤其有这种感觉，因为很少有讲述区块链概念的文章会提及数据挖掘的概念。可以这么说，数据挖掘的概念和比特币确实有些遥远，而区块链领域中的大部分兄弟们都多多少少有些自由主义的倾向，所以他们中的很多人对于数据挖掘的观念是不太感冒的，因为他们可能认为数据挖掘和侵犯个人隐私好像是可以画等号的。

其实并非如此。我们在这一章中讲述的核心观点是“数据才是做一切决定的前提。”区块链技术要和大数据相结合才能够相得益彰。

数据分析在各类公司中都可以起到作用，一家公司要想成功，必须要让数据分析介入运营：



以数据为基础，智能地制定运营决策。

以数据为目标，有效地执行运营计划。

以数据为依据，优化商务过程。



笔者认为，所谓数据分析，就是指对数据进行审视、清理、转化、建模和处理，只是做这些步骤中的任何一个步骤也是数据分析。重要的不是数据分析或数据挖掘的概念，而是数据分析的理念在区块链系统上的应用。

本章会介绍：



金融和数据挖掘有什么关系？

区块链系统上的数据是怎样的？

如何在区块链系统上做数据挖掘应用？

区块链如何大数据化？

大数据如何区块链化？





4.1　大数据时代



2011年6月，美国数据研究中心IDC发布了年度数字研究报告Extracting Value from Chaos（《从混沌中提取价值》），在文中对于数据的预测提到了三点：



全球数据量大约每两年翻一番。

预计2011年全球数据总量将达到1.8ZB(1)。

未来全球数据量增速将会维持，到2015年全球数据量将达到近8ZB，预计到2020年全球数据量将达到令人恐怖的35ZB。



而同年10月，市场调研机构Gartner高德纳公司在分析2012年十大战略技术中就包括了“大数据”。

我们今天所处的互联网时代是Web 2.0时代，和之前的互联网最大的不同点就在于UGC（User-generated Content，由用户自主产生内容）。每个互联网用户不仅仅是一个信息的被动接受者，同时还是一个信息的创造者。除接受大量的信息外，我们每天还通过微博和微信产生大量的数据。





价值，大数据的第四个“V”



那么，究竟什么是大数据呢？

IBM提出了“大数据”的“三V”特征，即大量化（Volume）、多样化（Variety）和快速化（Velocity），这些特征正在给现在的IT企业带来巨大的挑战。所谓“三V”是因为这三个英文词Volume、Variety和Velocity的首字母都是“V”。

大数据的“大”指的不仅仅是数据量本身庞大，数据样式变化多和增量速度快也是“大”的一个体现。



价值（Value）是大数据的“四V”中最重要的一项

从2013年开始，大家意识到了大数据不只是一个理论上的概念，着眼于数据商业应用的专家们提出了大数据的“四V”概念。“四V”概念其实就是在原有的“三V”基础上增加了第四个首字母为“V”的英文词，价值——Value，其指的是企业要实现的是大数据的价值，也就是数据运营和应用的重要性。

在“大数据”时代，数据已经成为企业的核心资产，如何充分利用历史产生的和每天产生的海量数据，如何从海量数据中提取有价值（Value）的信息，如何把信息转化成商业智能的知识和规则，对企业生成竞争力乃至成败起到至关重要的作用。

从当年的《New Internet：大数据挖掘》开始笔者的观点就是：

数据是否“大”并不重要，重要的是能否从数据中挖掘出有价值的信息。原始的数据越丰富，能够挖掘出的信息就越有价值。





数据挖掘过程和应用



什么是数据挖掘呢？

古人云：“物以类聚”。这句话其实描述的就是数据挖掘中的一种算法——聚类算法。要看一个人是怎样的，只需要看他周围都有什么样的朋友。而从数据挖掘的角度来说，聚类算法要预测一个对象的特征，只需要看它周围对象的数据特征。

简而言之，数据挖掘（Data Mining）是有组织、有目的地收集数据，通过分析数据使之成为信息，从而从大量的数据中寻找潜在规律以形成规则或知识的技术。

本节简单介绍一下数据挖掘的过程和应用场景。

数据挖掘过程

一个数据挖掘项目的生命周期在不同的场景下并不是完全一样的。CRISP-DM是官方标准之一，也是对数据挖掘过程的一个全面评述。

如下图所示，CRISP-DM认为一个数据挖掘项目的生命周期包含6个阶段。这6个阶段的顺序是不固定的，我们经常需要调整这些阶段。这依赖每个阶段或是某个阶段中特定任务的产出物是否是下一个阶段必需的输入。

在下图中，最外面这一圈表示数据挖掘自身的循环本质，每一个解决方案发布之后代表另一个数据挖掘的过程已经开始了。在这个过程中得到的知识可以触发新的商业问题，而后续的过程可以从前一个过程得到益处。



CRISP-DM数据挖掘过程示意图

CRISP-DM的数据挖掘生命周期中的6个阶段，也就是上图中的概念解释如下：

·商业理解

最初的阶段集中在理解项目目标和从业务的角度理解需求，同时将这些转化为数据挖掘问题的定义和完成目标的初步计划。

·数据理解

数据理解阶段是从初始的数据收集开始的，目的是熟悉数据，识别数据的质量问题，首次发现数据的内部属性，或是探测引起我们产生兴趣的子集从而形成隐含信息的假设。

·数据准备

在数据准备阶段包括从未处理的数据中构造最终数据集的所有活动。这些数据将是模型工具的输入值。这个阶段的任务有的能执行多次，没有任何规定的顺序。任务包括选择表、记录和属性，以及为模型工具转换和清洗数据。

·数据模型

在这个阶段，可以选择和应用不同的模型技术，模型参数被调整到最佳的数值。一般，有些技术可以解决一类相同的数据挖掘问题。有些技术在数据形成上有特殊的要求，因此需要经常跳回到数据准备阶段。

·评估

到了这个阶段，你已经从数据分析的角度建立了一个高质量显示的模型。在开始部署模型之前，重要的事情是彻底地评估模型，检查构造模型的步骤，确保模型可以完成业务目标。这个阶段的关键目的是确定是否有重要的业务问题没有被充分考虑。在这个阶段结束后，对于一个数据挖掘结果使用的决定必须达成。

·发布

通常，模型的创建不是项目的结束。模型的作用是从数据中找到知识，并且所获得的知识要以便于用户使用的方式重新组织和展现。根据需求，在这个阶段可以产生简单的报告，或是实现一个比较复杂、可重复的数据挖掘过程。在很多案例中，这个阶段是由客户而不是数据分析人员承担部署的工作。

下面看两个在数据挖掘中常见的两个应用。

估测（Estimation）和预测（Prediction）是数据分析和数据挖掘过程中比较常用的应用。估测应用是用来猜测现在的某一个未知值，而预测应用是用来预测未来的某一个未知值。估测和预测在很多时候都可以使用同样的算法。估测通常用来为一个存在但是未知的数值填空，而预测的数值对象发生在未来，往往目前并不存在。

举例来说，如果我们不知道某人的具体收入，则可以通过与其收入密切相关的其他信息来估测，然后找到具有类似特征的其他人，利用他们的收入来估测未知者的收入和信用值。同样以某人的未来收入为例来谈预测，我们可以根据历史数据来分析收入和各种变量的关系以及时间序列的变化，从而预测他在未来某个时间点的具体收入会是多少。

估测和预测在很多时候也可以连起来应用。例如我们可以根据购买模式来估测一个家庭的孩子个数和家庭人口结构；或者根据购买模式，估测一个家庭的收入，然后预测这个家庭将来最需要的产品和数量，以及需要这些产品的时间点。这里的产品可以是实体产品和服务，也可以是金融产品。

估测和预测所做的数据分析可以被称作预测分析（Predictive Analysis），现在预测分析被不少商业客户和数据挖掘行业的从业人员当作数据挖掘的同义词。这两项技术也是金融领域中的用户最常使用的。





4.2　互联网金融，用数据说话



从2013年开始，互联网金融在中国这片土地上发展得如火如荼，其实这是互联网对于金融领域的渗透导致的必然结果，同样的变革也发生在旅游、航空、教育、物流、零售、医药等其他垂直行业。

金融业在互联网上创新的目的是可以直接获取用户的一手信息，增加用户的粘度，巩固并拓展银行与其目标客户之间的存取、货款、汇款、支付等业务关系。互联网金融可不是金融机构简单地“触网”。

我们信仰数据，我们相信金融的本质就是数据，而大数据技术就是能够驱动互联网金融这个横冲直撞的火车头永不停歇的发动机。





金融业的大数据挖掘



在良莠不齐地发展了三年之后，2015年，在十部委发布的《关于促进互联网金融健康发展的指导意见》中，将互联网金融分类为：互联网支付、网络借贷、股权众筹融资、互联网基金销售、互联网保险、互联网信托和互联网消费金融。

互联网与金融的一个共同的基因是数据。因为互联网是由数据构成的，而所有的金融产品其实也都是各种数据的组合。互联网产生的数据量很大，而且数据类型多；同样，金融行业产生的数据量也非常大，数据类型也相当丰富。这是一个大数据的时代。

每一种数据类型都有价值。在经过第一阶段的野蛮生长之后，互联网金融平台如果不考虑监管套利的因素，那么其在资产端和客户资源端其实都很难对传统金融有竞争优势。唯一可能让这些公司有机会胜出的就在于对数据的把握。

对金融行业来说，最重要的两个维度是客户和风险。找到最多和最合适的客户，同时把风险降到最低，是每一家金融机构的追求。如何达成这些目标？在我们看来，数据是唯一的方向标。要充分挖掘互联网行业、金融行业中各种形态的数据，让数据说话，用数据指导各种金融创新，用数据来控制风险。

传统金融主要靠资本赚钱，而互联网金融靠服务客户、满足客户需求赚钱。传统金融行业的竞争很激烈，而在互联网上的竞争则要更高一个层级！互联网中的“吊丝”和精英们从残酷的市场竞争中学会了只有以客户为中心，充分满足客户的各种需求，才能真正赚到钱。要聆听客户的需求，用大数据的思路变革传统的金融服务。

我们经常听到“大数据挖掘”，其实“大数据”和“数据挖掘”是两个不同的概念，前者说的是数据的规模，而后者说的是数据的使用。

在互联网上，我们有更加丰富和完整的数据，对参与金融的各方来说，信息相对来说是更加对称的。把金融市场运营充分互联网化，可以降低交易成本并提升效率。

金融大数据挖掘发展的主要方向，就在于在互联网数据开发的基础上加速挖掘金融业务的商业附加值，搭建出不同于银行传统模式的业务平台和数据分析平台。

在互联网金融领域，基于大数据的服务创新有很大的想象空间。我们认为，讨论大数据是否“大”本身没有多大的意义，能否充分把数据用起来才是关键。数据挖掘通用流程CRISP-DM的缔造者Tom Khabaza总结过，数据挖掘的九大定律中的第一条：“Business Goals Law”，说的就是每个数据挖掘解决方案的根源都是有商业目的的。

数据挖掘在金融业上有着充分的应用。例如，股票交易商可以利用数据挖掘来分析市场动向，并预测个别公司的营运状况以及股价走向等；又例如，采用数据挖掘中的关联规则挖掘技术，我们可以成功预测银行中不同客户的需求，一旦获得了这些信息，银行就可以改善对不同客户的服务项目。其实，现在银行天天都在开发新的与客户沟通的方法，而这些新方法的依据很多就来自于数据挖掘产生的信息和规则。

大数据技术，为信息的收集、存储和整理提供了一个更大、更快、更有效率的平台，并且让这些信息更流畅地匹配起来。通过运用这些技术，金融机构可以更好地辨识出个人和企业的行为特征，从而对其信用状况进行合理评估。





数据是做一切决定的前提



美国西北大学的Mark Jeffery在他著作的2011年畅销书“The 15 Metrics Everyone in Marketing Should Know”中说到，在他做了大量的对企业市场行为的调查之后发现，80％的公司做市场运营是不基于数据的，而其他20％基于数据做市场运营的公司中的大多数都成了各自领域的领跑者。

虽然我们能够获得的数据很多，但是现在的大部分企业都面临着一个尴尬的境地——Drowning in data．Thirsting for information．

（数据丰富，信息匮乏。）

快速增长的数据，已经远远超过了人们的直观理解能力，如果不借助强有力的工具，则很难弄清大量数据中所蕴含的知识。结果，做出的重要决策往往只是基于决策制定者的个人经验，而不是基于信息丰富的数据。

数据挖掘的存在就是为了填补数据和信息之间的鸿沟。麻省理工的Erik Brynjolfsson教授曾经说过：“有数据支持的（商业）决策才是更好的决策。”

如果数据分析和数据挖掘没有基于商业目的，则数据还只是停留在数据层面。只有通过处理和分析过的数据才能转化成信息，继而归纳成知识，然后才能应用到商业运营中去。

例如，在互联网金融借贷这个领域，如果我们有充足的数据，则计算出的违约概率会有很高的参考价值。而针对这个概率数据，我们可以设定该用户的信用额度。这个信息对于我们做借贷是非常有价值的。

企业要养成“数据驱动做决定”的习惯在刚开始可能很难，不过一旦养成这个习惯之后，你就会发现，做决定原来不会是一件令人纠结的事情。





商业智能



数据挖掘或者大数据研究的最终目的就是要实现数据的价值，而商业智能是在企业中实现数据价值的最佳方式之一。

商业智能（Business Intelligence，BI）的概念最早是由Gartner公司于1996年提出来的。当时将商业智能定义为一类由数据仓库（或数据集市）、查询报表、数据分析、数据挖掘、数据备份和恢复等部分组成的以帮助企业决策为目的技术及其应用。Gartner公司的Howard Dressner把商业智能定义为把数据转化成信息，并通过迭代发现（Iterative Discoveries）把信息转化成商业上可用的知识。

在我们看来，商业智能就是能够从（海量）业务和相关数据中提取有用的信息，把信息转化成知识，然后根据这些知识采用正确的商务行为的工具。也就是说，商业智能的根本作用在于把数据最终转化成商业决策的依据。



商业智能示意图

在本书中，我们提到的BI（商业智能）工具都是指能够在区块链系统上做大数据分析或者数据挖掘的工具。





4.3　区块链系统上的数据



我们在前面已经介绍过了，区块链系统是一个底层的分布式存储系统。在讨论区块链系统和大数据应用之前，我们先来看一下区块链上的数据。





区块链的仪表盘



Dashboard（仪表盘）的原意是一个包含各种测量仪表的平板，而在商业智能和大数据领域，仪表盘指的是直观展示度量信息，特别是一些关键性能指标的数据展示工具。

下面介绍比特币系统上的一些关键数据，如下表所示。

比特币系统上的24小时数据

（来源：blockchain.info）



开采区块数 179

区块生成间隔 8.04（分钟）

新币开采量 4475 BTC

交易费总量 54.20529097 BTC

交易次数 218920

转出总量 2833385.84166185 BTC

估计交易量 331577.74697724 BTC

估计交易量（USD） 123645341.85 USD

市场汇率 $372.9 USD（加权平均）

总交易量 $2134197.47

总交易量 5723.24 BTC

总矿工收入 $1688864.10

交易费收入占比 1.20％

在总交易量中的占比 1.37％

每次交易均摊成本 $7.71

难度系数 120033340651.24

哈希计算速率 1068073261.37 GH/s

如果我们只是看比特币系统本身，则上面承载的数据量并不算大。

截至2016年2月3日02:00，比特币系统上区块的总数量是396342个，约为40万个。每个区块的大小目前限制为1MB，所以从理论上讲比特币区块链系统的最大数据量为1MB×400000，大约为400GB。不过实际每个区块的数量大小不等，而早期所产生的区块是远远小于1MB的。

从下图中可以看到，第一个区块的大小只有0.2KB。



比特币区块链上第一个区块

（来源：blockchain.info）

如下图所示，第10000个区块的大小也只有0.2KB。



比特币区块链上第10000个区块

（来源：blockchain.info）

如下图所示，第100000个区块的大小也只有0.93KB。



比特币区块链上第100000个区块

（来源：blockchain.info）

不过根据最近的结果，近期生成的区块大小普遍都超过了900KB，以至于在比特币社区中出现了要修改区块大小限制到20MB的呼声。





区块链系统的数据瓶颈



从区块链的仪表盘上我们看到，在比特币区块链系统上的数据量并不算大。在blockmeta.com中查看一下具体数据。

从下图中我们看到，从比特币的第一笔交易，到笔者在写本节内容时，总的交易量不过为107692312条，平均每个区块中包含271.6条交易，而整个完整的区块链大小是54.04 GB。



比特币区块链系统上的数据

（来源：blockmeta.com）

作为对比，蚂蚁金融服务集团的数据显示，在2015年“双十一”期间，支付宝共完成7.1亿笔支付。支付峰值出现在凌晨0点5分1秒，达到8.59万笔/秒。

也就是说，整个比特币交易系统从创始到今天的所有交易笔数约为1亿条，还不到支付宝在2015年“双十一”当天交易笔数的七分之一。而按照区块链上每秒有7条交易记录的峰值计算，支付宝的峰值数据是比特币区块链的10000倍还多。

一个更好的对比可能是VISA信用卡在网络上的数据：

如下图所示，比特币的吞吐量和VISA信用卡在网络上每天1.4亿条的交易记录或者每秒16000条的交易记录相比，是可以忽略不计的。那么在今天，比特币区块链上的吞吐量究竟有多大呢？让我们来计算一下。



交易数据量的对比

（来源：http://tradeblock.com）

如下图所示，每条交易的平均大小约为590个字节（Byte）。如果区块大小限制在977KB，那么可以容纳的交易数量为1667条。按照10分钟产生一个区块的速度计算，每天可以产生144个区块，也就是最大能够记录240086条交易。将其除以每天的秒数24×60×60秒，答案是比特币区块链最高每秒记录2.8条交易。



对于比特币区块链系统吞吐量的分析

（来源：http://tradeblock.com）

更加糟糕的是，在早期的区块链客户端软件上，区块的大小设定为732KB（750000 bytes），所以如果按照这个设定，吞吐量会降到最高每秒只有2.1条交易。

因为用的是平均数，所以这里计算的是比特币区块链每秒平均处理能力，并不是峰值的情况。如果每条交易的字节数比较小，而正好又比较快挖出了一个新的区块，那么吞吐量会略有提升，不过在数量级上是不会发生变化的。

从下图中的曲线来看，比特币区块链上每天的实际交易量已经接近系统的瓶颈。如果区块大小和每条交易的平均大小不发生变化，则有可能会导致交易被记录的时间产生大量延迟。



每天的交易量

（来源：blockchain.info）

所以单独从系统本身来看，区块链系统在今天还没能够得到大数据的验证。下面的几个问题是我们需要通过实验来验证的。



区块链系统能否承载大规模的数据量。

区块链系统能否承载高并发的交易量。

区块链系统能否支撑高并发的检索和查询。



在比特币以外的实际应用场景中，包括互联网金融和电子商务，并发的交易量远超今天比特币区块链网络上运行的交易量，而更大数量的交易意味着有更大数量的数据。

按照中本聪的初始设计，交易的完整记录都是需要在网络上广播的。因而，庞大的交易规模和数据区块的全网广播产生的庞大流量是有一定冲突的。

在这里必须要提出笔者的观点：

实现实时交易系统不能光靠区块链技术本身，还需要其他的技术作为辅助。在目前，区块链技术更好的用途可能是在后台的交易清算和核算系统。

第2章详细介绍了区块链背后的算法设计。在原生态的区块链系统上，交易需要“矿工”确认才能真正入账。也就是说，虽然我们有理论上的每秒有多少条记录的数值，每笔交易依然至少需要大约10分钟一个新的区块生成的时候才能被确认。因而如果一个系统有实时性的要求，则区块链技术需要和其他的技术互相配合来完成这个要求。





从PaaS到BaaS，区块链和云计算



从云计算的发展历史来看，微软的动作并不够快。微软的Azure云平台在研发上起步较晚，在市场上落后于竞争对手Amazon的AWS，而后者已经成为互联网创业者事实上的首选平台。不过，如果仅从区块链技术的角度考虑，则微软的Azure发展速度倒是非常快。

2015年11月，据路透社报道，微软联合纽约初创公司ConsenSys，推出了基于云的区块链技术平台，提供BaaS（Blockchain as a Service）服务。

微软Azure的美国金融服务技术战略部门主任Marley Gray认为区块链以及相关的系统发展非常迅猛，他说：

“我们的企业用户将可以部署私有、半私有，或共同体区块链（Consortium Blockchain）网络，也可以通过Azure来部署公共的以太坊节点。我们期待，无论是‘云’端还是本地，或者是混合的分布式账本的开发、测试和部署领域，微软的Azure都将会做到最好。”

其实笔者最感兴趣的是微软提供的IDE（Integrated Development Environment，集成开发环境）。虽然区块链上的开源开发者们不见得对微软有多少好感，不过我们必须要承认无论是当年的Visual Basic，还是后来的Visual C＋＋、C#平台，微软的IDE能够提供世界上最好的开发、测试工具组合。

微软的BaaS平台目前的合作伙伴是ConsenSys，不过区块链技术在飞速发展，它在未来一定不会只有一家合作伙伴。笔者和微软云合作总监Alfred做过深入的探讨，微软从来在意的就是生态圈，它们希望能有更多的软件供应商在微软的Azure平台之上提供服务。BaaS提供的是基于区块链的服务，微软会把底层的区块链基础打好，而做各式各样基于区块链的应用则是合作伙伴们的事情。

ConsenSys遵循的是以太坊协议，用户可以输入https://www.ethereum.org/访问以太坊的首页，如下图所示。



以太坊前沿版本的标志

（来源：https://www.ethereum.org/首页）

如Ethereum Frontier（以太坊的前沿版）的首页所示，以太坊的重点是在“Decentralized”（去中心化）上。而其第二个关键词是“platform”（平台），也就是说以太坊的目的是要做一个软件平台，让更多的人能够在这个平台上开发更多的应用。

以太坊是一个基于区块链系统的平台，不过它不会是唯一的一个。我们期待更多的牛人加入这个领域，搭建出更多具有DACT特性的区块链平台。

在本书的第7章会提到半开放式的分布式账本。半开放式的分布式账本中的数据量比今天的比特币区块链上的数据量不是多一点，而是多几个数量级。在这样的情况下，采用全开放式的区块链系统是无法承载的。

按照比特币区块链系统全账本的数量为45GB来计算，当交易量提升100倍的时候，系统上的账本数量会快速到达TB（GB的1000倍）这个层级。在全网上同步1000GB的数据作为一个完整的账本对于系统的压力并不是中本聪当年所设想的使用场景。





借力于区块链的DACT特性



数据会说话，而且数据是不会骗人的。当然，我们说这话的前提是数据的来源是真实可靠的。

当我们有了足够的数据之后，我们就可以不再依赖主观判断，而让数据成为裁判。在理想情况下，如果我们能够追踪一切数据，那么我们的所有决策都可以理所当然地基于数据来做判断。



商务运营示意图

在理想情况下，整体战略、目标和商务驱动都是基于数据的，而所有的衡量标准和结果也都是基于数据的。

笔者在第1章中解释过区块链的DACT特性：



Distributed（分布式的）

Autonomous（自治的）

Contractual（按照合约执行的）

Trackable（可追溯的）



对在系统中执行商业智能来说，区块链的Contractual（按照合约执行的）特性是最关键的。而我们的商业智能会为区块链系统上运行的智能合约提供最可靠的数据支撑。

简单地说，智能合约做的工作其实如下图所示。



智能合约示意图

所谓智能合约，指的是当一系列条件满足之后，合约条款会被不折不扣地自动执行。也就是说，智能合约会使区块链系统拥有商业智能。





大数据对于区块链系统的安全性防护



在第2章提到过，区块链系统的安全问题其实并不是绝对的，特别是当面临的攻击是实时性的APT（Advanced Persistent Threat，高级的持续攻击）时。当面临APT攻击时，用户所面临的攻击和威胁将是长期的和持续的。

所谓“道高一尺，魔高一丈”，彻底预防APT攻击是不可能的。使用大数据进行监控是一个很好的方法。RSA执行主席Art Coviello就曾经说过：“我们应该从防御模式转移，大数据能让你更快速地检测和响应。”

有的时候，我们面对的攻击在严格意义上来说并不见得是传统意义上的攻击，只是可能存在的误操作或者潜在会引起争议的问题。因为区块链系统的DACT特性，在系统上的操作是不可逆的，所以运用大数据的方式来做防护是我们的唯一选择。

下图来源于Richard Gcndal Brown的博客。



哪个是真正的IBM股票

（来源：http://gendal.me/2014/12/03/identity-and-the-blockchain-key-questions-we-need_to-solve/）

在下图中，一个投资者想要购买IBM的股票，不过当他在区块链交易系统中输入“IBM”之后，除真正的IBM股票外，还出现了一堆浑水摸鱼的其他可交易的资产。如果他的选择是一个假的IBM股票，则系统本身是无法阻止他进行交易的。而且更糟糕的是，在区块链系统上，一旦交易发生，则是不可逆的！

不过，如果在区块链系统之上添加了对每个用户的用户画像和行为分析，我们就会知道他想要购买的其实是在NYSE上有交易的，市值约为1200亿美元的IT公司的股票。系统会要求他再次确认他是要购买位于Scamville的IMB Computers公司的股票，还是如下图所的IBM股票。



IBM股票的详细信息示意图

（来源：http://finance.yahoo.com）





4.4　区块链和大数据



区块链和大数据是两个在过去几年中都得到飞速发展的技术。2016年第46届世界经济论坛达沃斯年会论坛的主题为“掌控第四次工业革命”，包括人工智能、无人驾驶、区块链、量子计算等在内的科技前沿领域在会议中被反复提及。





区块链的大数据化



正如我们在4.3节中所讲述的，在今天，区块链能够承载的信息数量是有限的，离我们要用“大数据”的标准来衡量的地步还差得很远，不过，千里之行，始于足下，我们要一步步地来。

如果要让区块链承载大数据，那么目前我们所看到的这些区块链系统都还不具备这个能力。

下面是区块链系统的三个和大数据有矛盾，需要改进的特点：



分布式的

有隐私的

安全的



区块链系统是分布式的，而大数据讲究的是可规模化、可量化的数据；区块链系统是匿名的、有隐私的，而大数据在意的是个性化；区块链系统是安全的，信息是相对独立的，而大数据在意的是信息的整合分析。

区块链系统本身就是一个数据库，而我们所说的大数据指的是对数据的深度分析和挖掘，也就是说，数据分析和数据挖掘需要构建在区块链系统之上，把数据的价值发挥出来。

如果要做到以数据为基础来做决策，那么大数据的应用是区块链系统必须要完成的一个步骤。

大数据领域的同学们早就关注了区块链系统的发展。R语言是大数据领域中一种重要的编程语言。早在2014年9月Jan Gorecki就编写了一个可以用来分析比特币区块链的程序库，Rbitcoin。在https://cran.r-project.org/web/packages/Rbitcoin/中可以查看这个库的细节，研究大数据的同学可以引用这个库来对比特币区块链中的交易数据历史记录进行分析。

从区块链技术生态圈示意图中我们可以看到，如果我们想要把区块链上的大数据做好，则需要的不只是对区块链平台技术的改进，还需要在平台之上的大数据公司为区块链系统做数据分析和数据挖掘，以及提供最好的商业智能解决方案。





大数据的区块链化



大数据是一个通用的词，我们通常用它来描述数据集足够大，足够复杂，以致我们很难用传统的方式来做处理。

Oracle甲骨文的副总裁Neil Mendelson曾经对于大数据的安全性表示过深切的关注，他认为大家都在拼命提高数据存储的量和数据处理的能力，却鲜有人关注大数据本身的安全性。

区块链是一个诞生不久的分布式数据存储系统。它不同于以往数据存储系统的一个有趣特点在于，你无法对系统上的数据做随意的修改，而这个特点是之前其他数据系统所不具有的。

当区块链技术出现之后，笔者就在想这个问题：能否在大数据的系统上添加“区块链”的原理，从而使得原有大数据系统中的数据不能被随意添加、修改和删除呢？

如果我们考虑的是数据的全部内容，那么把所有的数据都放到区块链系统上是不现实的，也是不可能做到的。笔者认为这里可能有两种做法：



对于存放进来的历史数据源，因为它们是不能被修改的，我们可以对大块的数据做Hash处理，并加上时间戳，存进区块链中。在未来某一时刻，当我们需要验证原始数据的真实性时，可以对对应的数据做同样的Hash处理，如果得出的答案是相同的，则说明数据是没有被篡改过的。

只对汇总数据和结果做处理。这样，我们就只需要处理增量数据，那么应对的数据量级和吞吐量级可能是今天的区块链或者改善过的系统可以处理的。




————————————————————

(1) 数据用的存储计量单位依次是KB、MB、GB、TB、PB、EB、ZB、YB和BB，每个单位都是之前的1024倍，或者2^10倍，所以之前提到的1.8ZB是1.8×2^70 Byte。





第5章　金融世界中的信用和征信




如果说金融是经济的王冠，那么信用就是王冠上的宝石。宝石的绚丽程度决定了王冠之所以被称为王冠。

金融的核心就在于风控和信用，风控的精准性则在于对于数据的解读，信用本身也是数据的积累。所以，金融，特别是今天的互联网金融，就是以数据为核心的。

数据的缺乏和不完善其实是很多金融机构的软肋，而征信系统或者征信辅助工具的存在就是为了给金融机构提供数据。

本章为读者解读下面这些问题：



什么是信用？

什么是征信？

个人征信的数据有哪些？

企业征信的数据有哪些？

区块链能为征信做什么？





5.1　征信，躺着赚钱的机会



从借款的需求来说：

如果你买车、买房、需要贷款，那么从哪里可以借到钱？

如果一家企业拓展业务需要资金，那么它如何才能从一家投资机构融到资金？

而反过来，对于贷款方：

一家银行如何决定是否发放贷款给某个人？

一家投资机构如何决定投资某家企业？

借或者不借，最重要的决定依据是什么？

谁最有资格或者权威提供这个依据？

这个依据就是信用。

那么究竟什么是信用呢？说得直白一点，其实就是银行或者金融机构认为你“是否会”偿还债务。“是否会”要看两个方面：



一方面看你是否具有还钱的能力，

而另一方面看你是否有还钱的习惯。



对“是否会”偿还债务的评价称之为信用度，而能够收集整理每个人和每家企业信用度的机构就是征信机构。

根据汉语词典的解释，信用就是以能履行跟人约定的事情而取得的信任。所谓信用度，其很简单，用一句俗语来描述就是“好借好还，再借不难”。如果你曾经向银行借过5000元，然后按时还了，那么下次当你想要贷款10000元时，银行很可能会快速决定贷款给你。



以数据为本，用互联网的方式改变现有的信用体系，未尝不是一个控制风险，缓解（潜在的）金融危机，维护经济健康发展的思路。当然，其中孕育的巨大商机也是我们所关注的。

对信用的建设和维护离不开征信。让我们溯源而上，先详细了解一下征信究竟是什么。“征信”一词最早在我国出现是在《左传》中：

在《左传•昭公八年》中，有“君子之言，信而有征，故怨远于其身”之说。意思就是“君子说出的话，诚信确凿而又有据可查，因此怨恨和不满都会远离他的身边。”这里的“信而有征”就是有据可查的最早的征信的概念。

现代意义上的“征信”以及“征信机构”，在我国最早出现的时间是在民国初期，是由国外投资者引入的。

在现代意义上，征信即信用评估。

征信最为重要的作用就是为了防止在非即付经济交往中的交易双方受到损失。征信所提供的服务，就是向交易双方提供对方的背景和信用信息，防止交易双方互不信任，尽量避免诈骗行为，减少交易摩擦，促进交易的顺利进行。

要让征信服务在现代经济与社会的发展中起到作用，征信服务就必须要能够与商业活动做深度的结合，参与到经济的各个层面。要让征信服务真正有用，征信服务的供求双方不会满足于征信机构仅仅提供信用调查信息，而是需要征信机构能够在信用调查信息的基础上，对调查对象发表更为专业的信用评估意见。

简单点儿说，征信机构本身并不会为个人或者企业提供贷款，不过它们相当于在淘金风潮中卖水的人。淘金风潮过后，有的人挖到了很多金子，也有的人一无所获，不过不管别人怎样，卖水的那个人总是赚得盆满钵满。

每一家金融公司都需要信用数据，差别只是在于次数多少和规模大小而已。中国有5000万家中小企业和13亿的个人，这其中蕴含的对于征信的需求是非常大的。美国的整个信用市场规模大约在上百亿美元。把两国的经济因素考虑在内，中国的信用市场至少也应该可以到达上百亿元人民币的规模。

2014年6月，国务院发布《社会信用体系建设规划纲要（2014—2020年）》，我国社会信用体系建设进入全面推进时期。在此背景下，2014年年底，有50多家企业征信机构完成备案，2015年年初，有8家机构获准可以做个人征信业务。

不过，对许多金融机构来说，它们多年积累下来的企业和个人用户的数据是其发展壮大的核心支撑力量，让它们拿出来与其他机构相互分享谈何容易！而同时，它们又非常希望能够从别人那里拿到尽量多的数据。这是一个矛盾！

如果能找到一种新的征信模式，便于大家分享信用数据，一方面不威胁到企业自身的商业安全，而另一方面甚至能够从中得利，那么这真的就是躺着赚钱的机会！





5.2　信用为王，数据为本



信用即货币，即财富，即资本。

这是金融学中一个重要流派“信用创造学派”的核心观点。这个流派以18世纪的约翰•劳为先驱，以19世纪的麦克鲁德•韩及20世纪的熊彼特等人为代表。在这一学派的经济学家眼中，信用就是货币，货币就是信用。

18世纪的苏格兰裔金融家和投机家约翰•劳曾经这么说过：

“只要货币丰富，即能够创造一国之繁荣；只要有信用设施，即可以供应丰富之货币，给经济以最初的冲击；依靠这种冲击，就能够为法国产出大量的财富。”

约翰•劳想要通过发行国家信用支持的纸币，以振兴经济。由于这个思想过于超前于时代，以及过度投机而遭到惨痛的失败。不过有国家信用支持的纸币——法币（法定货币），却成了现代经济的基础。可以这么说，现代经济就是建立在信用之上的经济，而信用就是现代经济王冠上最璀璨的宝石。

我们认为，金融的本质就是通过获取、挖掘、分析数据，建立起一套信用风险模型，并且在这个模型的指导下开展各种金融服务。并且我们认为：

据，数据即信用。

不管是个人还是企业，他们的各种行为产生了大量的数据。通过分析挖掘这些数据，我们可以准确地了解他们的性格、生活状态、经济情况，以及最重要的——偿还贷款的能力。而这就是信用！没有什么比全面的数据更能描述一个人、一家企业的信用状态。

信用记录伴随每个人、每家企业的成长全过程。由于任何个人与企业都会无可避免地参与金融操作，小到缴纳水、电、煤气费用，大到巨额融资，信用记录始终贯穿其中。而有了不可逆的区块链征信体系方案，任何人都要仔细衡量一下不良记录带来的障碍与优良诚信带来的便利。借用时下流行的一句话就是“优良者一路绿灯，不良者寸步难行”。





个人征信



下面先来看一下美国的FICO是如何给个人信用打分的？

从下图中我们可以看到，FICO的信用分值来自于下面几个因素。



FICO人信用得分的组成部分

（来源：Pinterest）

信用偿还历史，权重35％

信用偿还历史主要是指客户是否存在历史逾期还款记录，这是影响FICO信用分最重要的数据类别。其主要包括逾期的类型（从信用卡逾期直到破产）、涉及的额度、逾期的时间，以及发生的时间。一个发生在今年逾期60天的还款记录对FICO的影响显然要大于发生在3年前逾期120天的还款记录。

信用账户数，权重30％

信用账户数主要用于分析对于一个客户，究竟有多少个信用账户是合适的，从而准确反映客户的还款能力。对贷款方来说，如果一个客户开了太多的信用账户，还款能力被用尽，则说明这个客户存在很髙的信用风险，有过度使用信用的可能，同时也就意味着他具有更髙的逾期还款可能性。但是，一个客户有信用账户需要偿还贷款，并不意味着这个客户的信用风险就一定高。这里需要用到统计分析的算法进行判定。

使用信用卡的年限，权重15％

使用信用卡的年限既包括最早开立的信用账户的使用年限，也包括新开立的信用账户的使用年限，以及信用账户使用年限的平均数、中位数等统计值。一般来讲，以上数值越大，越能增加FICO信用得分。

正在使用的信用类型，权重10％

正在使用的信用类型考察的是客户对金融工具的使用程度，主要分析的是客户持有信用账户的类型（包括信用卡账户、零售账户、分期付款账户、金融公司账户和抵押贷款账户等），以及各类型的信用账户数。

新开立的信用账户，权重10％

FICO认为，短时间内开设多个信用账户的客户的信用风险更高。该类数据就是评估客户新开立信用账户的情况，特别是对于信用历史不长的客户，这一项的影响更大。

美国人经常谈到的所谓的“你的信用得分”，通常指的就是FICO得分。该评分系统由费埃哲公司（Fair Isaac Corporation）开发，所以缩写为FICO。对于美国的银行和金融机构，基本上所有的信用风险分析都始于FICO信用评分分析。而对于一些规模较小、技术力量薄弱的小银行，往往直接就拿FICO得分作为其贷款审批的依据。

FICO得分的基本思想其实就是把借款人过去的信用历史资料与数据库中的全体借款人的信用习惯相比较，检查借款人的发展趋势是否跟经常违约、随意透支，甚至破产等各种陷入财务困境的借款人的发展趋势类似。

数据的魔力就在于它能把复杂的事情简单化。FICO得分化繁为简，封装了复杂的信用评估过程，最终用一个简单的数字就清晰地表征了信用的高低。

互联网，特别是移动互联网的发展，为我们全面收集个人、企业的经济数据和行为数据提供了极大的便利。我们需要用好这些数据，建立起更及时、更准确、更全面的征信体系。

在征信体系中，最基本的数据共享就牵扯到了国家、银行、个人、企业、金融机构，甚至医疗、保险、城管、水电、电信等方方面面的利益，这是一个极为传统的领域。公平、分享、公开和透明的互联网精神能够给这个领域带来怎样的新思路和冲击？

当我们预测一个人在信贷交易中是否会守约时，需要的信息是有层次的。

与银行信贷相关的贷款、信用卡、担保、票据承兑转让等信息显然是最重要的，而像房租、电费、水费、通信费、物业费等是否有拖欠的行为，影响相对较小，不过也是相关的。此外，在社会经济生活中，可能反映一个人信用状况的任何其他信息也都是相关的。例如：



现在在什么公司工作？

在公司的职位大概是什么？

每年的收入大概有多少？

在该公司的工作年限有多少？

是否有过往违法记录？

是否有法院强制执行的事件？



企业和个人的社保信息、住房公积金信息、行政许可和处罚信息、法院判决信息都属于征信系统收集的范围。

央行的个人征信系统采集的信息覆盖个人贷款、信用卡、担保等信贷信息，以及个人住房公积金缴存信息、社会保险缴存和发放信息、车辆交易和抵押信息、法院判决和执行信息、税务信息、电信信息、个人低保救助信息、执业资格和奖惩信息共计9类公共信息，涉及的数据项超过80项。

如下图所示，截至2014年年底，个人征信系统中采集的可以反映信用状况的公共信息占比最大的是公积金缴存信息，为51.14％，其次是社保信息，为42.99％，这两类信息占比超过90％，其他几类信息加起来才占6％。



2014年年底个人征信系统反映信用状况的其他信息采集

（来源：中国人民银行征信中心征信系统建设报告）

只有将来自不同数据源的多种类型的数据相互印证才能够全方位、多角度、更准确地判断信息主体的信用状况。





企业征信



对企业来说，与信用相关的数据和个人相比是有相当大不同的。

从下图中可以看到，对企业来说，与金融相关的数据主要来自6个维度：



企业与金融相关的数据示意图



银行信贷信息

银行信贷信息也就是过去的借贷历史。如果是跨金融企业的，就要包含打通各家关联银行机构的借贷信息。

政府税收信息

政府税收信息主要是指过去的纳税记录、营业执照相关信息等。

所属行业信息

所属行业信息包括所在行业本身发展情况和该企业在行业中的位置等。

企业本身运营状况

企业本身运营状况主要包括收入、利润、用户人数、客单价等。

市场调查信息

市场调查信息主要是指从线下了解的企业相关信息。

互联网口碑

互联网口碑包括了在互联网上大众对企业及其产品的各种评价。笔者之前做过一个“舆情监控”的系统，可以实时获取互联网上用户对于某个产品的评价，特别是差评(1)，从而及时做出反应。



这6个维度的数据有的是公开数据，有的是在企业征信数据库中可以查询到的数据，还有的是我们可以通过互联网来获取的数据。

央行的征信中心企业征信系统采集的信贷信息基本覆盖金融机构所经营的对公授信业务，包括贷款、票据贴现、贸易融资、信用证、保函、银行承兑汇票、公开授信等信贷业务，以及与之相关的担保、垫款、欠息、资产接入及资产处置、养老保险参保缴费、住房公积金缴费等信息，涉及的数据项超过200项。

如下图所示，在企业征信系统采集的除贷款外的其他数据中，关于公积金缴存信息占比超过了50％；其他几类信息均较小，除欠税信息、电信缴费信息和养老保险缴存信息外，其他几类信息占比均不足3％。



2014年年底企业征信系统反映信用状况的其他信息采集

（来源：中国人民银行征信中心征信系统建设报告）

这个情况和个人征信情况是类似的。数据源的单一导致信息很难做交叉比对。

做好征信，仅仅依靠官方的征信机构是远远不够的。目前，我国征信行业的发展并不乐观。央行在2014年发布的《中国征信业发展报告》中指出，截至2012年年底，我国有各类征信机构150多家，不过这些机构分布在不同的区域，在经济发达地区相对较多，而且机构之间的发展也不平衡。征信机构主要以从事企业征信业务为主，从事个人征信业务的征信机构较少。而征信业务收入和人员主要集中在几家大的征信机构中。

笔者认为，最重要的问题是观念的问题。征信真正要解决的问题是什么？

是对风险的控制。

那么什么样的征信报告才能让金融机构放心使用，拿在手上真正按照信用评级来指导信贷的发放？我们不能再胶柱鼓瑟了。

这是一个互联网的时代，在征信机构的征信数据库中，不应当仅仅收录企业工商登记、纳税记录、信贷记录、合同履约、司法判决等简单基本数据。

为了反映企业或个人的整体实力和信用状况，我们还需要整合更多维度的数据，例如：



企业发展历史

市场营销信息

产品销售信息

产品质量评估

同行竞品比较

管理者信息

高管行为数据

客户评价





5.3　用区块链改变征信体系



在一个征信体系中，对金融机构有价值的客户大略可以划分为三个部分：



优质客户（白名单）

中间地带的客户

风险客户（黑名单）



对金融机构来说，白名单是主要服务对象，意味着收益。对任何一家机构来说，白名单都是其生命线。而黑名单刚好相反，每家机构都需要仔细做风险控制，不赔钱即为赚钱，能有效地防范一个风险强于成功做成十单生意。

同时，对于中间地带的客户资源，我们都希望能把他们尽量转化为白名单成员，那么这就需要从多个维度、各种琐碎的日常行为中筛选出有用的数据点加以提炼，变成可供金融机构参考的具有含金量的数据。

在国务院印发的《社会信用体系建设纲要》中，关于金融领域是这样描述的：

“加强金融信用信息基础设施建设，进一步扩大信用记录的覆盖面，强化金融业对守信者的激励作用和对失信者的约束作用。”

这其中的描述就是对黑名单和白名单的一个应对指示。其中，“加强金融信用信息基础设施建设”这一句已经将目标锁定在大数据的终端采集上了。

目前的信用数据都是一个个独立的信息孤岛，互相之间并不打通。而在中国，最大的一个孤岛就是央行征信系统中的数据。

在研究了区块链技术之后，我们认为区块链是解决方案中最适合的一种。

笔者认为，央行对于开放征信系统的主要顾虑有两点：



如果把一些虚假的数据上传到央行征信系统的系统里，则可能会造成整个系统的失效。目前有些网贷公司业务操作不够规范，一些业务甚至是编造出来的，相应的数据是虚假的。当这些数据加入到央行征信系统之后，会造成整个系统的可信度下降。

小额贷款公司可能会利用征信系统查询信息的便利转卖征信资料。例如，作为试点城市的重庆，由于不少小额贷款公司借查询征信信息之名转卖个人征信信息，导致对接工作被迫叫停。



但是数据的共享是市场的需求，是征信发展的大趋势。其实不仅是央行对于网贷公司的数据有顾虑，网贷公司对于把自己的数据接入央行的系统也有顾虑。网贷公司如果把自己的数据导入了央行的系统，则极易导致自己的核心业务信息泄露，例如泄露给他们最大的潜在竞争对手——银行。

不积跬步，无以至干里；不积小流，无以成江海。想要一下子改变或者优化整个征信体系，是不可能做到的，无论用什么技术都是不可能的。

下面我们来看一下如何利用区块链天然独有的特性做一个征信系统。

有数据交换、数据共享就需要数据定价。

这里就可以有不同的形式。那么数据定价应该是由政府主导，还是由行业协会协调，抑或是完全市场化地交换？

每个企业拥有的数据是不同的，例如工商银行的数据规模将近300TB，覆盖4.1亿的个人客户和460万的法人客户的直接金融数据，这样的数据如何估值？

我们来看基于区块链的黑名单案例和白名单案例。之前，笔者和区块链圈子里的咕噜同学深入探讨过如何用区块链系统来做征信体系的问题，他在这个领域也有一些很独到的见解，很期望看到他在这个领域的尝试。





案例：基于区块链的黑名单



愚公移山，障碍是一步步移除的。目前，贷款机构对数据分享最紧迫的需求是对黑名单的分享。目前网贷公司对于欠债不还的这些人，除加入黑名单进行曝光外，还没有更好的方法。

不过，如果数据不共享，即使某人上了一家公司的黑名单，那么他依然可以从另一家公司借到钱。

作为中国P2P第一豪门的“陆金所”，其联合拍拍贷等10家网络信贷服务业企业成立了“网络信贷服务业企业联盟”，而它们首先计划共享的就是黑名单。

如果是传统意义上的共享，那么大家一起共享的结果是一个巨大的数据中心系统，参与的这些机构都可以在这个系统上进行查询，但这里可能存在的问题有三个：

（1）数据是可被修改的。因为是中心化的，所以这里就是源头，存在数据被篡改与数据丟失的风险。

（2）数据汇总和更新速度不可控。

（3）存在数据访问权限的问题。

（4）如果要保证查询速度，则系统的构建存在复杂度的问题，否则系统的运行会慢到不可用的程度。

对应的解决方法是：

（1）将中心化的存储变为去中心化的分布式存储。

（2）使用区块链技术，使得每个节点的数据是完全同步的。

（3）区块链技术使得数据是不可被篡改的。如果出现虚假数据，则可以迅速找到源头。

（4）设置数据汇总和更新规则。

（5）变统一中心节点查询为P2P的方式。

（6）设置权限访问机制，只有正确的密钥才能访问数据。



基于区块链的黑名单

（来源：http://www.financialhelperxo.uk/）

在本章的前两节中已经提到了个人与企业信息采集的几个维度，这是我们做数据分析的依据。各家机构将自身汇总的数据统一到一个平台下，同时能够按需求快速地获取数据。

需求

下面做一个简单的市场需求假设。对一家金融机构来说，其有以下几个需求。



需求1

系统能够给该公司提供信用调查和风控防范的数据支撑。

需求2

该系统需要是真实有效的，不会有被人为篡改的可能，该公司要有参与监控的能力。

需求3

该公司参与的方式不是被动地提供数据，而是主动地参与数据共享。

需求4

如果别人查询了该公司的数据，则还能够分享一部分收益。

需求5

该公司查询同行的数据速度越快越好。

需求6

同行提供的数据越新越值钱，旧的数据相对廉价。

需求7

信息并不对所有的用户开放，而是对相关的金融机构开放。参与的金融机构如果没有提供足够的数据，则需要付费查询或者限制查询。



针对上述问题，来看一下基于区块链的解决方案。

问题分析（基于区块链的黑名单征信系统）

对金融机构来说，对黑名单的数据存储和数据共享是迫在眉睫的事情。



黑名单是民间的叫法，官方称作信用不良记录。

在银行体系里，信用不良记录就是黑名单，也叫信用污点。而银行并不会一直关注消费者早期的信用不良记录，还贷逾期类的信用不良记录保存周期为5年，也就是说，只要你保持5年足额按时还款，即可回归清白之身。

我们也不提供无偿信息共享，毕竟“物美”而“价廉”的东西不是那么牢靠。我们需要有参与度，保持数据的多样性。

最后一点，我们需要尽量实时地分享数据，特别是信用不良记录数据。



我们可以借助区块链技术来实现这个系统：

（1）制定统一遵守的黑名单登记规则。

（2）有偿性提供各自的黑名单列表。

（3）以区块链公钥加密方式保证数据的可靠性。

（4）有偿性地进行数据查询。

（5）名单以分布式账本形式存储，确保数据不可被篡改。

这个系统有如下的特点：



公钥加密：通过密码学协议加密之后的加密数据统一提交拷贝数据，保证不会被篡改。

私钥解密：区块链中的ID按照权限设定，查询相关数据时验证身份ID，具备同等查询权限方可进行查询。

不可更改：一次查询也可被视为一次交易，并且为不可逆操作，确保查询源头可被追查。

等价交换：一家金融机构提供100万条数据，如果总计得分100万分，那么这就是它相应的查询份额，可查询同等价值的数据信息。

有偿服务：通过ID审核，具有查询权限的一个ID在查询金融机构A提供的这100万条可供查询的数据时，会增加金融机构A的查询份额。例如每被查询一次，金融机构A增加一次查询同等价值信息的机会。

获取积分：金融机构A提供了100万条数据，按照价值核定规则，其获得100万查询积分，每进行一次查询，扣除相应积分。当积分用完时，可以有两种途径进行积分获取：一是提供价值数据，二是付费购买积分。

解密查询：身份ID验证设定金融机构能查询哪一类信息，例如个人贷款信息、企业贷款信息、个人信用卡等，每一类信息价值不同，每次查询时扣除相对应的积分。

权限设定：当金融机构只想开放查询权限给具有相应查询权限的另一类ID时，数据对于不具有查询权限的其他成员是不可见的。





提交黑名单的流程

在这个黑名单系统上，我们需要设定一些规则。

时间规则

系统以存入的数据时间戳为标准，总的原则是时间越久远的数据，获取的分值越低，时间越近的数据，获取的分值越高。例如：



一个月之内的数据每条10分

三个月之内的数据每条9分

半年之内的数据每条8分

一年之内的数据每条6分

两年之内的数据每条3分

三年之内的数据每条2分

三年以上的数据每条1分



当然，究竟每条数据的分值应该分配多少还需要做一些具体的数据测算才能确定。

类别规则

系统区分个人、微型企业、小企业、中型企业、大型企业等类别，对应的类别数据价值的基准权重略有不同，例如按上述排序依次记为10、15、20、40、100等。在存入数据的时候，时间规则要和类别规则一起来确定存入数据的价值。

ID分配规则

每个区块链的成员有自己的ID，系统根据最开始约定的条件来规定每个ID的权限。例如有的成员只能查询个人数据，有的只能查询小微企业数据等。



查询黑名单的流程

查询规则

成员根据相应ID身份验证查询数据信息时，会被扣除相应的积分。获取的数据量越大，需要扣除的积分就越多。不过我们可以对每一条查询所需要扣除的积分设定一个上限。

更新规则

系统根据时间戳，动态更新数据信息价值核算，即不同时间点提交的相同数据价值有所不同，获取积分不同，而查询花费的积分也不相同。





案例：基于区块链的白名单



对于时下刚过热潮的P2P金融，其中乱象丛生，“跑路潮”在2015年集体爆发，究其原因，最大的问题可能是信息不对称。如果每个潜在的贷款机构不能确切地知晓借款者从其他贷款机构已经或者即将获得的信贷额信息，则多银行借贷关系的成本会逐渐加大。在此前提下，在上文中提到的黑名单便成了解决手段之一。

然而重病还需猛药治，光有黑名单是不够的，我们更加需要白名单。

在很多情况下，申请借款的个人或者企业都会同时向很多不同的贷款机构申请信贷，这种情况被称为多银行借贷关系。在英国和挪威等国家，可同时借贷的银行数量相对较小，平均数量少于3家，在荷兰、瑞士和芬兰等国家，平均数量为3～4家。但在包括中国在内的许多国家中，可同时借贷的银行数量就没有限制了。

从单个贷款机构的角度看，一个借款者的风险大小在于债权到期时借款者的还款能力，而这取决于他们的负债总额。然而，如果贷款机构不知道其他贷款机构发放的总贷款金额，同时都发放了贷款，那么借款者就有可能会过度借贷！

贷款者的借贷信息被称为正面数据，其与被称为负面数据的黑名单相对。而正面数据中最精华的部分被称为白名单，也就是优质借贷企业、个人的名单。这是每家借贷机构的业务核心。

缺乏正面数据的征信系统是不完整的。在2003年之前，中国香港是不共享正面数据的。在此之前据传发生过一个非常极端的案例，一个被称为“信贷之皇”的借贷人，在两年间，总共申请了72个信贷账户，而第一次拖欠贷款是在其第72个账户审核通过之后才发生的。正因为正面数据没有被分享，每家银行都不知道其他71个账户的存在，同时也没有看到他之前有拖欠贷款的情况，当然会基于他的个人信息批准他所申请的贷款。

商务部直属机构，国际贸易经济合作研究院正在酝酿制定《互联网金融机构信用评级与认证标准》，有望成为我国首个互联网金融机构信用评级和认证的国家标准，也就是所谓的P2P金融平台的“白名单”。

国际贸易经济合作研究院的调研数据显示，截止到2015年11月，跑路的P2P平台已经达到了1079家，这使得国家寄希望于“白名单”的出台能从根本上解决这一问题。

《互联网金融机构信用评级与认证标准》的立足点有三个：

其一：制定统一的信用评级与认证标准。

其二：建立统一的数据库。

其三：需要一个客观的第三方信息披露。

不过我们所说的白名单不应该是死的规定，而应该是活的规则；我们并不需要大而全的统一，而是具体到每个数据点的细则。统一的数据库如果是一个中心化的数据库，就会有在前面“黑名单”一节中描述的各种问题。而第三方的信息披露如果要保持完全中立，则只能通过利益完全不相关的律师事务所和会计事务所等，但这可能会引发出更多的问题。

下面我们用类似于“黑名单”一节中介绍的方式来实现“白名单”。我们可以将白名单一分为二：清白无前科与信用记录良好。无前科是戏谑的说法，说白了就是从来没有做过贷款申请之类活动的记录，没有记录当然也就没有不良记录。而信用记录良好指的是有过类似贷款还款记录，但均按时足额还贷，没有不良信用记录。

第一类“小白客户”其实对金融机构来说并不是其特别关注的。它们更加需要的是金融活动信息第一时间的共享。

第二类客户是每家金融机构的核心资产。数据显示，此类客户的忠诚度相对较高，通常很少选择多个金融机构进行金融活动。

需求分析

下面简单做一个市场需求的假设。对一家金融机构来说：



问题1

该机构是否可以用它们的白名单交换行业中其他公司的同等优质数据？

问题2

该机构是否可以用它们过去的历史记录来交换行业中其他公司的数据？

问题3

该机构提供的数据能否没有不良影响？

问题4

该机构可以怎样保护系统数据的安全性？

问题5

该机构能否只和部分机构做数据交换？

问题6

能否保证系统上的数据是不会被篡改的？



问题分析（基于区块链的白名单系统）

其实，金融公司之间进行某些信息交换已经成了常态，不过目前还没有一种方式能够很好解决我们在上面提出的这些问题。我们需要的是一种更好的信息共享方法，能够让金融公司提供一种有偿性的信息资源分享服务，同时能够获取有价值的信息。



每家金融机构不一定愿意共享它们最核心的用户数据，如果要分享，则它们需要能够换回一些等值的其他信息。

每家金融机构都会有一些沉积的历史数据是它们愿意分享的，如果分享这些数据还能够让它们获取一些等价的信息查询和利益，那么就完美了。

我们不提供无偿信息共享，毕竟“物美”而“价廉”的东西不是那么牢靠。

我们需要有较高的参与度，保持数据的多样性。

有些金融机构的数据共享要有权限设定，它们并不希望所有人都能够查询到它们提供的数据。



我们可以借助区块链技术来实现这个系统，下面梳理一下上面提出的需求和问题分析。

（1）采用无中心化的分布式信息存储与共享：公开透明的数据库保存了所有交易记录，记录中有交易的详细信息，并以密码学协议的方式杜绝了作假的可能。

（2）可以让系统中所有的成员都参与，提供信息的成员可以获得对应的积分奖励，查询信息的成员需要扣除对应的积分。

（3）有价值的信息可以帮助系统上的成员提供潜在客户。

（4）分布式账本提供了一种点对点查询方式。

（5）系统上是有权限设定的，每个数据提供方都可以限制哪些成员可以访问它们提供的数据。

这个白名单系统有如下的特点，大部分和之前的黑名单类似。



公钥加密：通过密码学协议加密之后的加密数据统一提交拷贝数据，保证不会被篡改。

私钥解密：区块链中的ID按照权限设定，查询相关数据时验证身份ID，具备同等查询权限方可进行查询。

不可更改：一次查询也可被视为一次交易，并且为不可逆操作，确保查询源头可被追查。

等价交换：一家金融机构提供100万条数据，如果总计得分100万分，则这就是它相应的查询份额，可查询同等价值的数据信息。

有偿服务：通过ID审核，具有查询权限的一个ID在查询金融机构A提供的这100万条可供查询的数据时，会增加金融机构A的查询份额。例如每被查询一次，金融机构A增加一次查询同等价值信息的机会。

获取积分：金融机构A提供了100万条数据，按照价值核定规则，获得100万查询积分，每进行一次查询，扣除相应积分。当积分用完时，可以有两种途径获取积分：一是提供价值数据，二是付费购买积分。

解密查询：身份ID验证设定金融机构能查询哪一类信息，例如个人贷款信息、企业贷款信息、个人信用卡等，每一类信息价值不同，每次查询时扣除相对应的积分。

权限设定：当金融机构只想开放查询权限给具有相应查询权限的另一类ID时，则数据对于不具有查询权限的其他成员是不可见的。



在这个白名单系统上，我们同样需要设定一些规则。它们与上一节基于区块链的黑名单系统上的规则基本上是一致的。在系统实施上的不同点在于，“黑名单”在更多时候是用于排查我们不能合作的对象，而“白名单”在更多时候是为了找寻潜在客户。

时间和金额规则

系统以存入的数据时间戳为标准，总的原则是时间越久远的数据，获取的分值越低，时间越近的数据，获取的分值越髙。例如：



一个月之内的数据每条10分

三个月之内的数据每条9分

半年之内的数据每条8分

一年之内的数据每条6分

两年之内的数据每条3分

三年之内的数据每条2分

三年以上的数据每条1分



不过，和黑名单中的时间规则不同之处在于，因为白名单中包含的是正向的借款信息，所以时间规则的重要性要和借款的金额数量作比对，时间规则的价值需要叠加借款的金额作为权重。一个月内借款100元和两年前借款100000元比起来，肯定还是后者的数据价值更大。

类别规则

系统区分个人、微型企业、小企业、中型企业、大型企业等类别，对应的类别数据价值的基准权重略有不同，例如按上述排序依次记为10、15、20、40、100等。在存入数据的时候，时间规则要和类别规则一起来确定存入数据的价值。

ID分配规则

每个区块链的成员有自己的ID，系统根据最开始约定的条件来规定每个ID的权限。例如有的成员只能查询个人信息，有的只能查询小微企业信息。

查询规则

成员根据相应的ID身份验证查询数据信息时，会被扣除相应的积分。获取的数据量越大，被扣除的积分就越多。不过我们可以对每一条查询所需要的积分设定一个上限。

更新规则

系统根据时间戳，动态地更新数据信息价值核算，即不同时间点提交的相同数据价值有所不同，获取积分也不同，而查询花费的积分也不相同。


————————————————————

(1) 我们尤其关注“差评”是因为在今天的互联网上，全五星的评论往往是不真实的。请见笔者翻译的《社交电商》一书。





第6章　金融的风险控制和安全




我们常说“Managing Risk，Managing Future。”也就是谁能最好地把控风险，谁就能掌控未来。

金融业，究其本质就是管理并且承担风险的行业，“风险控制”是金融业最根本的核心。遗憾的是，我们看到很多互联网金融平台，其实并没有完善的风险控制系统，在这些公司中，风险控制很多时候只是停留在概念层面，或者按照业内有些朋友的说法，“是停留在PPT层面”的。

风控体系就是关于动机及过程管理的体系，而动机和过程管理正是风控体系的基本逻辑。有没有发现问题，是人的设计。人的设计，是基于知识结构和经验判断的。基于案例和统计学的原理，就有了尽职调查。调查的根源是空间和时间的不确定性；调查的动机是为了使未来和现在达成共识。请注意，这依然是人的设计。正如所有的调查报告都是人写的，人参考的资料和数据也是人写的。那么，重点来了，人设定的程序，能不能被技术所取代？这个问题在过去可能是无解的，但如今它有了答案。

这个答案可能就是区块链。

本章主要为读者解读下面这些问题：



金融机构的风控究竟有多重要？

风控和征信有什么关系？

风控系统的原理是怎样的？

如何用区块链技术来降低操作风险？

如何用区块链来应对欺诈？

如何用区块链来应对逆向选择和道德风险？

区块链在珠宝领域的保险业上有怎样的应用？





6.1　风控和征信



中国有一句古话：人无远虑，必有近忧。还有一句话：凡事要“防患于未然”。中国的文化，崇尚的是平衡之道，制衡之说。金融业，同理可证！金融的本质是什么？是资金的融通。资金在融通的过程中，每一个环节都具有不确定性，而这个不确定性就是风险的基本因子。

对于金融平台，风险控制是最重要的。银行看起来是最能赚钱的机构，但它其实也可能是欠钱最多的机构，世界各地的银行80％以上的资金都来源于大众的存款，因此银行实际上是全社会最大的债务人。



有利润和损失就会有风险

（来源：http://www.writeopinions.com/）

只要一家公司试图通过运作来赢利，它就会面临风险。而这里的风险可能来自于以下几个方面。



内部操作

内部运营

交易方

第三方

市场



风险甚至还可能来自于商业模式本身。

风险控制可能是传统金融机构比新兴互联网公司更有优势的地方。现代银行已经经历过数百年的风雨，其每过几十年就会经历一次金融风暴，而每一次金融风暴都是对风险控制体系的一次磨炼和提升。

如下图所示，系统性的风险控制流程大致是这样的：首先要发现风险，然后做评判，随后是选择策略来控制风险，在监控了过程之后，最后总结风控结果，从而为发现新的风险打下基础。



风险控制流程

可以这么说，相比追求利润，银行更关心对于风险的管控。在风险控制方面，银行通过上百年积累的线下风险控制手段远非互联网金融公司仅在几年、十几年就能学到的，所以，和互联网金融公司相比，对于一些重要的资金业务，银行和其他传统金融机构是拥有绝对优势的。

当我们在考虑风险管控的时候，安全性、效益性和流动性是每家金融企业的三大根本价值目标。很显然，这三个价值目标，尤其是前两者——安全性和效益性，它们之间是有冲突和竞争的。不过总的来说，在金融领域，最关键的问题还是需要注重安全性，效益性一定排在安全性之后。

当一家金融机构资金周转不灵，缺乏流动性时，它就不能依靠负债增长或者迅速变现资产来获得充裕的资金，从而会影响其臝利能力。在极端情况下，流动性不足甚至会导致金融机构直接倒闭。



金融机构安全性、效益性和流动性三个价值目标的矛盾

金融机构的风险管控一方面要避免企业为了一味追求赢利和效益而不顾资金的流动性和安全性；另一方面又不能因噎废食，因为过分强调流动性和安全性而忽视潜在的金融效益。

其实在我们看来，风险管控和第5章讲述的征信是颇有相关性的。它们有以下的共同点：



都是基于信息，基于数据的。

数据越多，做决定的把握越大。

数据来源越广，做决定的把握越大。



举一个极端的例子，当我们能够覆盖所有的数据来源、有最新鲜的数据时，我们的风险控制或者征信都是有极大的把握的。

下面以互联网P2P借贷为例，如果我们能够充分了解借贷者或者借贷企业的详细信息、过往贷款申请和还款记录、目前所有在进行中的贷款数据等各方面的实时数据，那么我们面临恶意欺诈、过度负债、过度借贷等信用风险的几率就会显著下降。

如果一家贷款机构不能全面地了解企业和个人的信用状况，就会有两种可能出现：



为了防范风险，采取相对保守和紧缩的策略。

凭一些固定的规则和感觉做决定，使放贷的资金有较高的风险。



其实这两种方案无论哪一种都是不理想的，甚至会造成恶性循环。而只有当我们掌握了足够的数据，或者可以联通一个精准的征信系统时，才会使得我们的贷款真正有据可依。

如果所有的金融机构都加入到第5章讲述的黑名单和白名单系统中，那么我们就会有足够的数据来控制风险。不过在那之前，我们至少要先用好机构内部的数据。





6.2　风险就在于小概率事件会发生



如果亲爱的读者是学理工科的，那么应该学过概率论这门课。在上这门课时，你可能听过这么一句话：

“小概率事件不会发生”。

但是到了金融或者互联网金融领域，你需要彻底改变这个观点。小概率事件恰恰是我们需要防范的！因为在金融领域，小概率事件会发生。而我们在做风险管控的时候，最需要关注的往往是小概率事件，并且要控制小概率事件发生的比例。

因为小概率事件不但会发生，而且还有可能会频繁地发生。

所谓风险，指的是在一定时间内，发生不确定损失的可能性，也可以说是未来结果的不确定性或者损失。

仅从定义上我们就可以看到这里有三个不确定的地方：

（1）损失发生的可能性是不确定的。

（2）损失发生的时间点是不确定的。

（3）损失发生时，损失的量是不确定的。

很多金融产品和交易方式其实是存在各种风险的，而这些风险可能被互联网金融的创业者和创新者们有意无意地低估或者忽略了。同样，对投资者来说，因为回报过于吸引人，互联网金融产品的风险也被忽略或者低估了。





6.3　区块链是解决风控系统问题的答案



如6.2节所述，金融有三个要素：



安全性

收益性

流动性



而这三者有一个共通之处，即现在与未来在空间和时间上的冲突。冲突就是不安定的因素，必须通过权力的设计进行约束，而这个权力设计的约束就是控制。这个控制的过程，对应的是等价的交换原则，或者说是冲突性的防御性设计。

下面看一看这个防御性设计的原理。

首先，我们需要做评估。先看一下风险评估的定义：

在风险事件发生之前或之后（但还没有结束），对该事件给人们的生活、生命、财产等各个方面造成的影响和损失的可能性进行量化评估的工作。

也就是说，风险评估就是量化地测评某一事件或事物带来的影响或损失的可能程度。

从信息安全的角度讲，风险评估是对信息资产（即某一事件或事物所具有的信息集）所面临的威胁、存在的弱点、造成的影响，以及三者综合作用所带来风险的可能性的评估。作为风险管理的基础，风险评估是组织确定信息安全需求的一个重要途径，属于组织信息安全管理体系策划的过程。我们需要意识到，人是有动机的，而机器和程序只有指令。这是人和机器的重要差别。

下面是在风险控制之防御性设计的过程管理中所面临的问题。



要确定保护的对象（或者资产）是什么？它的直接和间接价值如何？

资产面临哪些潜在威胁？是什么导致了威胁？威胁发生的可能性有多大？

资产中存在哪些弱点可能会被威胁所利用？利用的容易程度又如何？

一旦威胁事件发生，则组织会遭受怎样的损失或者面临怎样的负面影响？

组织应该采取怎样的安全措施才能将风险带来的损失降到最低？



而解决以上问题的过程，就是风险评估的过程。

在进行风险评估时，有几个对应关系必须要考虑：



每项资产可能面临多种威胁

威胁源（威胁代理）可能不止一个

每种威胁可能利用一个或多个系统弱点



上面这些内容就是现代金融风控体系的重要原理。

风控体系就是关于动机及过程管理的体系。而动机和过程管理正是风控体系的基本逻辑。你有没有发现，这些都是人的设计。人的设计，基于知识结构和经验判断。基于案例和统计学的原理，就有了尽职调查。

然而调查的根源是空间和时间的不确定性；调查的动机是为了使未来和现在达成共识。请注意，这依然还是人的设计。正如所有的调查报告都是人写的，人参考的资料和数据也是人写的。那么，重点来了，人设定的程序，能不能被技术所取代？这个问题在过去可能是无解的，如今它有了答案。

这个答案可能就是区块链。





6.4　用区块链来控制风险



风险控制本身是一个很大的课题。做好风险管制，才是金融公司和金融产品能够有长期发展的关键。在互联网上，每个新兴事物的发生都使得我们向前走了一步，不过每个新事物都不是完美的，都会有漏洞出现。

我们可以借助区块链技术中的去中心化和去监管化这两个核心思想来帮助我们做好风险控制。

对于保险行业，区块链技术可帮助我们从保险业中的主要模型——风险共担，向替代型风险管理模型转移。基于区块链的风险管理模型，可能包括自我管理或风险管理协议，点对点保险平台，甚至有进一步的资金解决方案。

在第5章说过，在一家金融机构中，有价值的客户大略被划分为三个部分：



优质资源（白名单）

中间地带的客户

风险客户（黑名单）



对金融机构来说，白名单是其主要服务对象，意味着收益。对任何一家机构来说，白名单都是它的生命线。而黑名单刚好相反，每家机构都需要仔细做风险控制，不赔钱即为赚钱，能有效地防范一个风险强于做成十单生意。

同时，对于中间地带的客户资源，我们都希望能把他们尽量转化为白名单成员，那么这就需要从多个维度、各种琐碎的日常行为中筛选出有用的数据点加以提炼，变成可供金融机构参考的具有含金量的数据。

正如笔者在本章开头所言，一家金融公司的风险控制和征信体系上的征信是很类似的。





控制操作风险



所谓操作风险，指的是金融企业内部或者关联企业的人员将资金挪用或者监守自盗，从而给支付双方造成资金损失。如果牵涉的金额数目较大，那么风险可能会被扩散，转移到其他关联的互联网金融公司或者传统金融机构中。

在传统金融机构中，操作风险也是一直都存在的，例如在风险管控没有那么严格的互联网金融公司中，当有人员离职时，操作风险是更加有可能出现的。

如果我们的系统是没有人工干预的，那么我们当然可以把操作风险降到最低。

让我们再次重温区块链系统具有的DACT特性：



Distributed（分布式的）

Autonomous（自治的，共同约定的）

Contractual（按照合约执行的）

Trackable（可追溯的）



Distributed（分布式的）

基于区块链的分布式系统是分布式的，而且不止一个节点上有完整的账本，所以如果只是有人不小心误操作修改了某一个账本或者某一条记录，则系统后续的运营会自动把正确的账本同步到这个节点上。从而误操作会被自动修正。

Autonomous（自治的，共同约定的）

基于区块链的区块链系统是自治的，不需要一个中心的管理机构，也就是说，所有的节点都是按照一个规则在行事。就算是系统上某些节点失效，依然不会影响整个系统的正常运行，导致误操作的发生。

Contractual（按照合约执行的）

区块链系统是不需要第三方仲裁的，系统上所有的交易和过程都是按照一定的规则或合约来执行的。例如金融衍生品，它们的操作可能是金融领域中比较复杂的，在今天的实际操作中，仍然需要大量的人工操作和干预。一旦发现问题，可能就需要重复对账，其混乱和复杂程度让人难以想象。如果我们能够将区块链系统结合智能合约，那么当需要操作的时候，系统会自动完成，不会发生人工操作失误的情况。

Trackable（可追溯的）

区块链系统上的所有交易都是可追溯的和不可逆的。在应对操作风险的时候，可追溯是最关键的特性。任何一个节点上的账本都是整个系统中的一部分，所有的交易记录都是可追溯的。所以误操作发生的几率会非常低。而且一旦发生了误操作，则通过追溯历史记录就可以修正错误。





控制欺诈



风险控制的首要任务是防止交易欺诈。区块链技术的基本原理是：它能够通过一个分布式电脑网络来自动处理交易，通过加密手段来保障交易安全，让交易欺诈变得难以实现。

一切交易行为的背后都是协议，协议和协议组成了程序。安全性、收益性、流动性这三个金融要素全部通过区块链技术进行管理，全部弱化了人为操作，而这可以说是物联网金融的基本理念。

当然，理论归理论，实践归实践。当前，金融世界依然是人的世界，人是金融世界中最宝贵的资产。风险控制是金融世界中最为重要的元素，人依然是风险控制的主力军，并且不是一朝一夕就可以改变的。

信用卡公司包括各大发卡银行，每天都在和欺诈做搏斗。

从下表所示的尼尔森的调查报告中可以看到，在2014年，全球信用卡欺诈金额总数有163亿美元之多。

全球信用卡欺诈金额

（来源：2015年尼尔森调查报告）



年份 全球信用卡欺诈金额（10亿美元）

2000 $2.70

2001 $3.10

2002 $3.10

2003 $3.60

2004 $4.20

2005 $4.30

2006 $4.80

2007 $5.50

2008 $6.40

2009 $6.90

2010 $7.60

2011 $9.80

2012 $11.20

2013 $13.70

2014 $16.30

FICO声称，从金额上来看，美国每年约有0.1％的信用卡涉及欺诈，而做得最好的公司也只能把风险降低到0.05％。所以除信用外，FICO现在也开始提供能够检测欺诈的软件。

而据英国一家做第三方支付和风险服务的公司CyberSource统计，每年英国的网上商城会因为欺诈而损失其总收入的1.8％。

之前我们提到过，基于区块链技术的交易系统有两个特点：



不可逆的

可追溯的



再强大的支付工具，也难免会面临造假和重复支付的挑战。而区块链可以不依赖任何中心建立一个不能重复支付的系统，它规定每10分钟就要进行一次全网记账簿的同步，每个节点都记账，每一笔都要盖上时间戳，全网核实见证。让时间戳和全网所有节点做公证，使得造假的可能性几乎不存在。





控制逆向选择和道德风险



当我们在做金融风险评估，特别是互联网金融评估时，需要考虑的因素有很多，其中逆向选择和道德风险是我们必须要考虑的风险。

每个寻找贷款机会的人都有遇到不良贷款的风险。在信息不对称的条件下，那些不良借款者往往会采用各种手段骗取或者得到贷款机构或者个人的信任，从而导致过高比例的贷款投向不良借款者而非优质借款者。

在信贷交易上，最需要贷款的往往是资金链最紧张的企业，而它们也愿意付出最高的利率。而结果是它们会拿到最多的贷款。显然，如果这样的情况真的发生了，那么坏账率也就会比普通的情况要高。把坏账率考虑进整体的成本后，放贷的公司就不得不提升整体的利率，而这又进一步使得那些不是非常迫切需要资金的公司放弃向其借款，转而向别的渠道借款。这样又再次提高了在所有的贷款中高风险贷款的比例。

而这就是逆向选择！

在经济学理论中，逆向选择（Adverse Selection）是指由于交易双方信息不对称，导致市场价格下降，从而产生劣质品驱逐优质品，进而出现市场交易产品平均质量下降的现象。用一个通俗的说法就是“劣币驱逐良币”。

举例来说，对于一家金融公司：

（1）如果它们并不完全清楚了解借款方的实际信息，就会存在严重的信息不对称。

（2）当超过正常比例的不良贷款发生时，坏账率会超过应有的比例。

（3）为了保持赢利，可能不得不提升贷款的平均利率。

（4）愿意接受高利率的公司往往有较高的风险。

（5）这就出现了逆向选择问题！结果必然是过高比例的高风险中小企业获得了贷款！

全面的征信系统使得信贷机构可以有效甄别借款者（企业）信用风险的大小。当我们充分了解申请借款者（企业）的全部特征从而准确预测他们的还款概率时，可以合理优化贷款的对象并对贷款的利率做合理设置，从而降低逆向选择风险。

正是因为逆向选择的存在，在金融机构之间存在共享征信系统信息和数据的动力。因为金融机构共享借款者的违约信息，对借款的企业或者个人而言，这是一种纪律约束，提升了其违约成本。当某家企业或者个人没有还款或者还贷逾期时，这是一个危险的信号。如果银行把此数据记录到征信系统中，那么其他金融机构在给其放贷时会考虑到信用风险的溢价，从而给出更高的利率，甚至拒绝贷款。而如果存在这种征信系统，那么信贷市场整体的违约率和利率都会降低。

这里我们提到的“道德风险”（Moral Hazard）不是指因为“道德败坏”使得大家遭受风险的意思，而是经济学中的一个概念。

“道德风险”指的是经济合作中的一方改变自己本身的行为从而损害到合作的另一方。如果损失主要由经济合作中的一方承担，那么合作的另一方可能会做一些原本不该发生的事情。我们在日常生活中其实经常会遇到道德风险的情况。例如将一个销售人员的收入从底薪＋提成的方式转变成为标准工资，那么该销售人员卖产品的努力程度可能会下降。在金融的保险和投资领域，这样的案例非常多。

在P2P借贷领域，如果贷款方对于借款方的约束不够，而借款方一旦毁约所造成的损失没有那么严重，那么这里的道德风险可能会使得借款方在操作中做一些本来不会进行的危险行为，最终导致无法偿还借款。例如资金短缺的企业在突然获得大量的投资之后，从事了一些计划外的相对高风险的投资活动，结果投资失败，从而导致无法还款。

道德风险和逆向选择看起来好像都是因为合作双方的信息不对称造成的。那么它们之间的区别是什么呢？

逆向选择源于事前的信息不对称，也就是说在合作之前合作的一方就不打算按照约定履行合约；而道德风险源于事后的信息不对称，是在签订合约之后才发生的。

逆向选择和道德风险都是互联网金融企业需要特别注意避免的风险。

从本质上看，逆向选择和道德风险的存在都是由于信息不对称造成的。如果在系统中有充分的数据，那么这两种风险其实都是不容易发生的。在理想的情况下，如果我们有完善和实时的征信系统覆盖了所有的领域，那么我们的风控体系就变得非常简单了。

我们需要做的事情是：



对接征信系统的数据。

获取尽量全、尽量新的数据作为风控系统的输入。

在机构内部做基于区块链的数据系统，以保证数据的安全性和不可被篡改性。

建设多样化的数据模型，根据执行结果随时做调整。





案例：区块链的可追溯性在钻石追踪领域的应用



钻石恒久远，一颗永流传。

区块链的可追溯性特征可以辅助对钻石的追踪，以保证钻石产业链上的利益各方得到公正的对待。

区块链技术能够解决长久以来保险行业内长期存在的问题，预计每年将会节省超过3亿英镑的资金，以及能够解决钻石检测冲突和保险欺诈问题。

下面看一下目前保险行业存在的问题。

如下图所示，每年在全球因保险欺诈产生的损失超过450亿英镑；其中65％的欺诈请求是没有被监察到的；每年保险公司要花两亿英镑来应对欺诈；而仅在珠宝行业发生的盗窃事件中，保险公司支付的金额就超过1亿英镑。



保险欺诈是一个全球性的问题

（来源：http://www.everledger.io/）

总部位于伦敦的区块链初创公司Everledger将区块链应用于钻石的验证注册，其CEO Leanne Kemp说：“这个过程类似于在区块链上镶上珠宝。”

看到这里，读者应该知道了，区块链具有DACT的特性，也就是说：



区块链采用类似POW的算法和其他的一些共识规则，确保只有合法的区块才能加入到区块链中。

一个区块经过验证后链接到区块链中，就会永久被存储。

原生在互联网上的区块链数据库是不可被摧毁和不可被修改的，其所记录的信息字段是与生成时间关联并对应的，可信账链里面的信息具有唯一性，不可被篡改。



因此区块链可作为可靠的数据库来记录需要永久保存的信息。

如果我们试图在区块链上记录合同交易，相当于将合同保存在公共账单上，而区块链则承担起数字化管理资产的义务。如果我们使用区块链来记录钻石所有的交易，那么一颗钻石是无法凭空出现在市场上的。

Everledger使用区块链来追踪每颗钻石，从矿山开始一直到最终的消费者，甚至更远。基于区块链做的设计，Everledger提供的是一个永久存在的账本，用于保存钻石证书和相关的交易历史，为保险公司、钻石持有者、索赔者以及执法集团提供检验服务。

钻石是一个实在的物体，而区块链上存放的是数据，Everledger公司做的事情其实是把每一颗钻石数字化，并且永久保存的过程。在国际证书上的钻石信息部分中，从钻石的大小、重量、形状到每一个切工指标都有详细的说明，并且对描述的精确度要求极为严苛，不过如果只有这些信息，则依然无法唯一标示一颗钻石。

事实上，世界上任意两颗钻石都不是完全相同的，不过采用哪些数据点来做唯一标示是Everledger的核心技术所在，所以并没有明确的文档来说明他们的区块链中包含哪40个数据点，不过按照笔者的推测，无非是以下这些：



钻石的基本数据，包括重量（Caratage）、净度（Clarity）、颜色（Color）和切工（Cut）

钻石被切割成品之后的条形码（Serial Number）

在钻石外观上采集的数据点从而使得钻石的外形能够被完全重构

某个内含杂质的具体实际位置





通过40个维度的数据来唯一标识一颗钻石

（来源：http://svpicks.com/）

当采集的数据点足够多了，一颗钻石就可以被唯一标示。

目前，伦敦的Everledger公司在区块链上已经记录了超过90万颗钻石，其目的在于最终能够避免或者减少钻石行业每年因为欺诈而产生的损失。

因此，Everledger成为全球第一个获得移动互联网殊荣“Meffy奖”的区块链初创公司。





第7章　金融领域中的其他区块链应用




包括比特币在内的虚拟货币是区块链的一类成熟的应用，第5章和第6章提到的风控和征信是区块链技术的另外两类靠谱的应用。很自然地，区块链技术也能延伸到其他的金融领域中。区块链的DACT特性使得它在金融机构中能够得到很好的应用，从而补充甚至替换现有的一些传统IT系统。

比特币的狂热崇拜者们对于比特币的未来和虚拟央行的概念有无限的遐想，不过笔者并不认为这是靠谱的方向。笔者认为区块链技术在金融领域会有最美好的发展前景，而这并不等同于比特币本身的成功。

我们认为，区块链的首席应用领域毫无疑问是金融领域。

如今，无论是Visa、Master还是支付宝，都是中心化机构运营，货币转移要通过第三方机构，这使得跨境交易、货币汇率、内部核算、时间花费的成本过高，并给资本带来了风险。西班牙的Santander银行认为，到2022年，区块链技术能够帮助金融行业降低200亿美元的记账成本。

纳斯达克首席执行官Bob Greifeld在伦敦举行的欧洲“2015——为卓越贸易技术的金融新闻奖”会议上表示：“交易所使用区块链技术管理代理投票系统，是因为这种技术看起来能够在更短的时间内让交易变得更加透明”。纳斯达克计划让区块链参与更多交易的结算记账。

金融衍生品的操作提供了无限的可能性。从理论讲，这个领域应该实现完全的自动化。而事实上，现在仍然需要大量的人工操作和干预，而一旦发现问题，就可能需要重复对账，其混乱和复杂程度让人难以想象。

如果证券能够在一个基于区块链技术的系统上做发行和交易，在确定了对应的智能合约之后，我们可以将所有的金融衍生品合约搬到一个平台上完成，而这个平台会继承区块链系统的DACT特性，那么人工干预和重复对账这样的事情是不需要发生的。

本章主要介绍：



有中心和无中心的分布式账本区别在哪里？

什么是半开放式的分布式账本？

如何用区块链技术来处理可交易的金融产品？

如何用区块链技术来处理数字资产？

区块链技术如何应用到房地产领域？

区块链技术在艺术品领域的应用是怎样的？

用区块链技术来实现第三方支付和跨境支付是好的创业机会吗？





7.1　超级账本



Matthew Hancock，Ed Vaizey以及Linux基金会执行董事Jim Zemlin都认为区块链技术和分布式账本这两个概念是可以互换的。通过分布式账本，几乎任何有价值的东西都可以被跟踪和交易。Jim Zemlin认为：

“分布式账本正准备改变广大行业，从银行业、航运业到物联网等。区块链作为一种早期阶段，拥有改变我们的生活和业务方式的高度复杂技术的能力，它需要一个跨行业的开源协作计划，以促进这种技术的使用。”

笔者认为，把区块链仅仅作为一种分布式账本并不能完全覆盖它的全部应用场景；而同样地，分布式账本也不一定需要用区块链技术来实现。

无论是分布式账本还是本节中引入的半开放式账本，笔者认为都属于超级账本的概念。超级账本，有一个正面的引导性，容易记忆并能被识别为有科技含量的金融概念。笔者认为，超级账本是把区块链技术或者思想作为分布式记账来使用时的说法。





账本和分布式账本



按照百科的定义，账本是：

具有一定格式并由若干账页组成，以会计凭证为依据，对经济业务进行序时分类记录的本籍，也就是通常我们所说的账册。账本包括出纳账、现金日记账、银行存款日记账、存货日记账、进销存日记账、营业费用明细账、总分类账、管理费用明细账、应收单据明细账、固定资产明细账、无形资产明细账、实收资本明细账、短期投资明细账、低值易耗品明细账等。

任何一家以臝利为目的的企业或公司都一定要用到账本。会计领域的账本不在本书的讨论范围之内。在本节中研究更多的是如何在电脑和互联网上实现数字账本。



分布式账本示意图

（来源：IMF报告）

Distributed ledger，即分布式账本，也有文献称之为Shared ledger，即共享账本。这两个概念其实是一致的。账本做分布式存储的最大意义就在于共享，而如果要共享一个账本并允许多个节点对其进行操作，不用分布式几乎是不可能的。分布式账本的意义就在于它保证每个参与者都有一个账本的拷贝，并使每个参与者都确信自己的账本与别人的账本是同步的。

我们可以设想一下，如果分布式账本能够实现，那么对参与合同的每一方来说都能避免很多麻烦。下面举一个小例子。

快递公司和电商公司的共享账本

一家快递公司为一家电商公司提供快递服务。每个月，电商公司都会下很多订单到快递公司，有的通过电话，有的通过网络，还有的直接当面临时下订单。到月底时，根据双方的对账单来支付快递费。

快递公司和电商公司双方都会维护一个自己的账本来记录在这个月究竟发送了多少笔快递。很少会有双方的数字完全一致的情况，总是会出现这样或者那样的状况导致双方的快递单量不一样。

当出现了这样的情况，双方就需要进行协调和沟通。如果数额较少，那么问题不大。而如果数据有较大的出入，那么究竟以谁的账单上的数据为准就是一件很麻烦的事情。很可能需要对双方账单上的每一笔快递进行比较和核对，并查找原始单据来进行验证。有的时候可能还需要引入第三方来审计，从而会产生额外的费用。

如果这两家公司使用的是一个共享账本，那么这个问题就不存在了。在共享账本上，快递在输入的时候是双方都认可过的，那么到了月底，双方的共享账本是同步的，电商公司只需要按照账本上的数量进行支付就可以了。

如今，金融机构的清算系统其实是由一家或者多家第三方机构进行统一的账簿更新和验证。而区块链在本质上解决了传统依赖于第三方的问题。根据共同消费的概念，区块链技术把消费者和供应方直接连接起来，并完成自动结算，消除了中间人存在的必要。

2016年1月，DTCC发布了白皮书，名称是“Embracing Disruption——Tapping the potential of distributed ledgers to improve the post-trade landscape》（《拥抱颠覆——开发分布式账本的潜力，改善交易后的环境》）。



DTCC

DTCC(1)，Depository Trust & Clearing Corporation，即存管信托和清算公司，它是全球金融服务业的超级“巨无霸”。DTCC拥有近40年的经验，是全球金融服务行业首屈一指的交易后市场基础设施。2011年，DTCC处理了总价值约为1700万亿美元的证券交易。

DTCC的白皮书提出，尽管目前的金融市场结构提供了稳定、可靠的可追溯记录，可是金融市场结构仍然非常复杂、封闭，无法进行全年365天，每天24小时的数据处理。DTCC认为，一系列资产配上完整、可追溯的交易记录的分布式记账本才是真正安全的。

DTCC认为，区块链技术和分布式账本这两个概念是可以互换使用的，而分布式账本能够降低风险、提升效率，简化或者彻底替换现有的系统，而这个机会是百年一遇的。

有趣的是，《区块链新经济蓝图》的作者Melanie Swan在她的书中把DTCC归类为极度反对区块链的一类公司，因为这类公司实际上已经是这个没有规范化的领域中的垄断企业。全面使用区块链技术其实是在颠覆它们原先的行为模式。

这不免让我们想到当年全面成功转型的IBM公司，“大象也能跳舞”是所有大企业管理者的一个标杆。无论DTCC能否真的全面颠覆自己，但它们愿意尝试的精神是值得钦佩的。

下面来看英国劳工部（DWP）的例子。在集中式账本系统下，它们每年要支付约1660亿英镑的福利金，其中因为欺诈会多支付12亿英镑，因为申报者的错误会多支付15亿英镑，因为政府方的错误会多支付7亿英镑。在这些多支付的34亿英镑中有9.3亿英镑能够被追回，而其他的都损失了。如果采用分布式账本，则我们可能会：



减少欺诈损失

减少错误损失

提高服务的透明度

让服务覆盖更多的人提供性价比更高的服务





无中心和有中心的分布式账本



在分布式账本的白皮书中，依据DTCC的研究和分析，分布式账本能够在某些确定的领域改善现有结构，而这些确定的领域目前是手工或者半自动化的。与既有处理过程相比，新技术有着明显的优势。

在分布式账本上我们需要开发的系统包括：



主要数据的分布式管理

资产/证券的发行和服务

已确认资产的交易

交易/合同确认

记录和配比相对复杂的资产类型（目前没有有效的解决方案）

净额清算

抵押品管理

结算



无中心的分布式账本

在区块链早期的应用中，例如在比特币系统上，区块链系统是无中心的，我们称之为Unpermissioned ledger，即无中心的（分布式）账本。在无中心的分布式账本中，任何一个人都可以为账本提供数据，而每一个拥有账本的人都有一个完整且相同的拷贝。这里每个节点都是平等的，没有哪一个节点或者个人有特殊权益（permissioned）。系统的完备性是由很多人共同来维护的，而这些运营者们都是无中心的（unpermissioned）。

这是区块链系统的优势，而换一个角度看，这个优势又成为它的劣势。区块链系统的抗审查性极佳，用户之间可以匿名地进行转账，“矿工”们可以匿名地进行记账。

在真实世界中，金融产品是受到各国法律约束的。当极客们在热火朝天地讨论如何可以用区块链来实现跨境交易或者交割股票的时候，其实并没有考虑到在实际情况下法律的合规和约束。

有中心的分布式账本

当我们的分布式账本系统存在管理者时，情况就发生变化了。这时的系统其实是有中心的，应该被称为Permissioned ledger，管理者可以是一个或者多个个人或组织，可以是政府、银行或者运行这个系统的金融机构，而系统的完备性责任也就落在了管理者的身上。账本依然是共享的，不过只有有限的节点才有权力（permissioned）来对系统上的数据做认证。

当我们在使用有中心的分布式账本技术时，可以对每个账户做颗粒度非常细致的权限管理。例如，有的账户有查看全部账户记录的权限，有的账户有查看部分账户记录的权限，还有一些账户有添加记录的权限。

我们认为，对很多金融机构来说，有中心的分布式账本（Permissioed ledger）应该是它们更加感兴趣的技术，因为对它们来说，它们并不需要所有的节点都有随意修改账本的能力。只要有许可（permissioned）的节点和人能够有修改账本的能力就可以了，而这些节点就是分布式账本系统的中心。

DTCC的白皮书提醒我们两点：

首先，分布式记账技术还未成熟，未被证实。笔者的解读是，DTCC认为分布式记账技术目前还只有顶层设计，缺少下面的基础结构，还不能直接接入复杂的金融环境。这个观点很务实且诚恳，也是我们认同的。全面拥抱现有的分布式账本实现方式目前还为时过早。

其次，区块链技术可能不会是每个问题的解决办法，但我们可以将其看作一个替代方案。这一条同样客观而理性，也是我们在本书前文中曾经提到过的。虽然区块链技术有其独有的优势，但它无法在所有的领域挑战有先发优势的对手们。

DTCC的报告认为（优化过的）分布式账本必须有以下五个功能，否则无法取代现有的技术：



能够帮助强制执行数据格式和合约条件的工业化标准

能够帮助消除手工操作、数据交换和数据格式的转换

能够帮助降低完成交易的时间和风险

提供的透明度对于商业是有帮助的

对于整体的商业过程和数据的安全性是有提升的



DTCC加入了Linux基金会（Linux Foundation），并与Linux基金会一起发起了一个名为超级账本项目，推动区块链技术的合作项目。DTCC可以在创立公司管理、为技术制定标准的过程中起关键作用，并确保技术是开源的。

DTCC在荷兰和新加坡有两个数据库储存中心，所以交易数据的安全是DTCC的首要任务。从白皮书的内容来看，他们对区块链的投入已经是板上钉钉的事实，相信越来越多的金融服务巨头会跟随DTCC的脚步，加速在区块链技术领域的研究和实验。





半开放式的分布式账本



在云计算领域我们都知道，私有云（Private Cloud）的安全性是超越公有云（Public Cloud）的，而公有云的计算资源又是私有云无法企及的。那么，如果想要同时拥有这两种云的好处，则可以采用的方式是混合云（Hybrid Cloud）。



云的各种类型

混合云既可以利用私有云的安全性，将内部重要的数据保存在本地数据中心，同时又可以使用公有云的计算资源，更高效、快捷地完成工作。

在分布式账本领域，同样也有两种账本：



完全公开的分布式账本

完全封闭的分布式账本



比特币、以太坊和其他的加密货币都属于完全公开的账本，每个人在这里都可以查阅信息、提交交易、参与验证交易的可靠性。而完全封闭的账本实际上是有中心的，这个中心节点可以分配计算资源来验证交易。

我们在上一节讨论过有中心分布式账本和无中心分布式账本的利弊，其实我们需要做的是找一种类似的“混合云”，以取公有云与私有云之长的方式来分别获取两种账本的优势，我们可以称之为半开放式的分布式账本。

半开放式的分布式账本会有这样的特点：



用户是准入式的，但并不完全公开。

交易的完成基本是实时的。

依然可以从每个节点访问账本的完整拷贝，但其并不存储在每个节点之中。

分布式账本上不一定使用某一种虚拟货币的网络。

账本上的每一条记录是可追溯和可验证的。



我们提出了半开放式的分布式账本最主要的原因在于，全开放式的分布式账本固然有完全的DACT特性，不过它在计算资源和存储资源上的浪费还是比较严重的。对绝大部分应用场景来说，全冗余，或者说所有交易数据在每个节点上的完全存储是不必要的。如何在尽量保留DACT特性的同时节省计算资源和存储资源，是半开放式的分布式账本的目的。





7.2　可交易的金融产品



正如我们在本书开篇时说的，如果证券能够在一个基于区块链技术的系统上进行发行和交易，并且在确定了对应的智能合约之后，我们可以将所有的金融衍生品合约搬到一个平台上完成，而这个平台会继承区块链系统的DACT特性，那么人工干预和重复对账这样的事情就不需要发生了。

基于区块链的新的交易系统和传统的交易系统相比，其优势在于：



速度会提升

清算的风险会降低

交易中的失误会减少

价格和费用是透明的



我们认为，除货币外，可进行交易的金融产品都能用区块链来实现，例如：



股票

公共基金

人寿保险

众筹产品

企业年金

养老金

股权

期货

房产买卖

房屋租赁



以上列出的这些金融产品的共同点之一是都有一个价格，共同点之二是价格会随着时间发生变化，共同点之三是所有权可以从一个主体转移到另外一个主体。

在区块链技术没有被发明之前，上面这些金融产品的交易都是通过一个第三方平台或者一个中央机构来实现的。区块链技术的核心之一就是可以不需要一个权威的第三方，用户的信任基于的是这个平台本身。



NASDAQ，最先尝试区块链技术的股票交易所

（来源：http://www.thestreet.com/）

美国的NASDAQ（纳斯达克股票交易所）有一款产品ExactEquity，它是一款基于云的产品，主要是给私有公司做股票交易服务用的，不过其中分类账簿的记录还是需要手工完成。据CCN．LA报道，在2015年下半年，NASDAQ使用区块链技术来做分类账簿的记录，而被其替代的就是可能会出错的手工记账流程。

如果我们都认同这些有价值的金融产品都可以通过基于区块链技术的平台来实现交易，那么很多线下的实物当然可以通过技术手段来绑定一个线上的身份，从而进行不需要第三方中介的交易。





案例：智能合约在区块链保险中的应用



根据区块链和智能合约的特点，下面来探究一下区块链在保险市场中的商业应用，旨在帮助金融保险业的同行和读者们更清晰地了解智能合约的应用场景。

通过认真比较智能合约的内在驱动力量与保险业的痛点，我们可以很清晰地看到：

（1）智能合约降低了人工操作的风险。

（2）智能合约能够自动有效地处理保险过程，改变相关公司的业务方式。

（3）区块链技术很有可能帮助我们从保险业中的主要模型——风险共担，向替代型风险管理模型进行转移。基于区块链的风险管理模型，可能包括自我管理或风险管理协议，点对点保险平台，甚至有充分的资金解决方案。

（4）保险业的数字交易更高效，更安全，并且有效地降低了成本，可以取代纸质合约及文件。

Group Limited在2015年年初曾经发布一份研究报告，该报告大胆预测了区块链技术可能会给1.1万亿美元的保险业市场带来巨大的变革。研究报告分析了与个人保险相关的四个不同业务范畴：身份、空间、时间，以及相关互动。其中每一个点，都将给区块链应用提供一个新机会。在相关互动方面，研究人员发现，建立于区块链之上的智能合约，使投保人能够自行管理自己的保险产品。

基于区块链的身份账目，对保险业有用，甚至可能与利用生物特征做认证的官方数据库形成同等竞争关系。

在大多数安全漏洞中，黑客使用的方式是改变人们的身份或创建新的身份，他们经常制造假账户或冒充管理员。如果我们设计的是基于区块链的系统，并在这之上实现身份验证、授权和数据管理功能，那么大部分安全漏洞都会被补上。

在保险业，通过数字认证可以精简流程，实现对个人数据和历史披露的更好管理，从而建立保险公司与个人之间更直接、有效的关系。随着时间的推移，通过降低身份和索赔欺诈的数量，这将给保险业带来额外的好处。

基于区块链的保险业解决方案可以写成一组规则，并转变成一个去中心化自治组织（DAO），使得消费者能够不再依赖中间人而自主操作。解决方案的设计要同时做到：



完整性

安全性

降低成本



总部位于英国首都的主要国际保险市场——伦敦市场，为实现现代化，计划使用区块链技术来提高数据存取效率，并减少有关行政文书工作的成本。

2015年，伦敦市场主要参与者之一的劳合社（Lloyd's）在伦敦举行研讨会，强调将区块链及其他技术应用到保险市场中，并将其作为现代化计划——目标运营模式（Target Operating Model或TOM）的一部分。

劳合社的运营总监Shirine Khoury-Haq在一份声明中说，区块链技术有望提高保险市场的风险记录能力、透明度、准确度以及速度。

Khoury-Haq就保险市场对区块链的兴趣进行解释说：

“区块链具有改善保险公司风险记录方式的潜力，并提高了我们工作的速度、准确度和透明度。作为TOM讨论会的一部分，我们也想看看区块链是如何帮助我们解决我们所面临的行业挑战的。”

格雷沙姆大学（Gresham College）的退休教授Michael Mainelli提出了两个区块链用例，一个是区块链驱动的数字交易室，在那里可以安全地共享和记录文档，另一个是保险市场许可管理总账的新代币。

Mainelli表示，在线数字交易室可以显著改善企业在伦敦市的经营方式。虽然这种技术早已存在，但只有少数企业能够用好这种技术。使用基于区块链的在线交易室可以使伦敦市场的国际业务更具吸引力，这可能会推动劳合社及伦敦市场的业绩显著增长。

基于区块链技术的交易室可以不需要信任中介就能准确提供交易参与者共享的文件记录，而不再需要纸质文件。

保险市场的许可管理总账说起来要简单很多，其实它就是基于区块链做的一个分布式账本，这个账本会拥有所有区块链系统都有的DACT特性。





7.3　数字化的资产管理



在金融产品的应用上做进一步延伸，和现实世界中实际有价值的物品或者资产做映射，就有了“数字化资产”的概念。和金融产品所不同的是，当我们在线上完成了产品的交易时，还需要在线下完成资产的交割。

其实从我们进入互联网时代后产品的数字化就开始了。如果我们不能把产品成功数字化，就不能成功完成它的电子商务运作。对于同质化的产品，我们可以用这些属性来描述：名称、条形码、厂家、类别、子类别、MSRP（厂商建议价格）等统一属性，当然还需要加入属于这个类别的其他属性。

下面以汽车行业为例来介绍区块链在数字化资产管理领域的应用。





案例：汽车和区块链



下面以汽车来举例说明区块链是如何在数字化资产上运作的。每辆汽车，除有统一的商品属性名称、条形码、厂家、类别、子类别、MSRP外，还会有发动机型号、变速箱、车身结构、长宽高、最高车速、0-100km/h加速时间、油耗等数百个属性。不过只是完全描述了这些属性，并不能唯一地指认是哪一辆车。

所幸的是，汽车有VIN码（Vehicle Identification Number，车辆识别码）。VIN码由17个字符组成，包含了车辆的生产厂家、年代、车型、车身型式及代码、发动机代码及组装地点等信息。在路上跑的每一辆车都有一个唯一的VIN码。当一辆车从4S店到车主手中，或者从前任车主转移到新的车主手中时，都需要到车管所办手续。

如果我们在区块链上把VIN码作为汽车的唯一标识，在汽车从厂家被生产出来的那一刻就像是比特币被新挖出来一样，所有权是属于这个生产厂家的。当4S店或者经销商从厂家手中收购了这辆车，在区块链上就添加了一条记录，汽车的所有权从厂家手里转移到了4S店手中。同样，当一个买家从4S店手中购买了这辆车，在区块链上又添加了一条新的记录。

这个区块链系统是专用于汽车所有权交易和登记的，它具有区块链的DACT特性。在任何时间，任何地点，任何人都可以在上面交易。而正因为汽车的账本记录了每辆汽车从出生开始到当前的所有交易记录，你可以知道任何一辆车在任何一个时间点的归属。

如果我们在汽车里配上和这个区块链系统相通的数字芯片，那么只有车的主人才能够成功发动这辆车，因为只有他的密钥能够打开这辆车。

这个汽车交易系统有如下的特点。



公钥加密：使用密码学协议加密之后的加密数据统一提交拷贝数据，保证数据不会被篡改。

私钥解密：区块链中的ID按照权限设定，查询相关数据时验证身份ID，只有具备同等查询权限方可进行查询。

智能合约交割：这个系统会使用智能合约执行交易。当交易的条件全部满足时，系统会自动完成交易，不需要人工干预。

公开查询：任何人都可以查询这个系统，确认在任何时间点一辆汽车的归属。

数据透明：所有的交易记录都是全网公开的，无法被篡改。



智能合约的存在使得汽车的短期租赁手续变得非常简单。当租客支付了租金之后，智能合约会给他一个密钥，在租赁此间凭借密钥可以使用这辆车。而当租期到了的时候，租客会发现他的密钥已经无法打开这辆车了。如果他还想要续约，那么就需要启动另外一个智能合约。



Google的无人驾驶汽车

我们再设想一下，如果他租用的是Google和Ford公司合作设计的不需要司机的车，那么等租期到了的时候，根据智能合约上的约定，车会自己开回最近的车辆租用点。





案例：区块链为房地产登记提供解决方案



将区块链技术与房地产行业相结合能成就一项伟大事业。本节为读者介绍一个在房地产领域基于区块链技术的数字解决方案，而其针对的场景主要是对房地产所有者的登记，或者说交易的交割。

根据美国房地产资讯网站Homelnsight的数据，每个美国房地产主人每隔5～7年就会卖出他们的房子，平均一生中会搬11.7次家，而每次交易都是非常费时费力的。更加重要的是，每次交易都需要一个中立的第三方（escrow），这个第三方的费用通常是房地产价格的1％～2％。所以，如何能够借助技术的手段，方便地做房地产的交割对美国人民来说是一件有意义的事情。

下面来认识一个协会，IBREA（International Bitcoin Real Estate Association，国际比特币房地产协会）。这个协会的使命是试图创造出取代政府土地及所有权登记的基于区块链技术的数字解决方案。这个协会的名字有点长，所以在下文中我们就以IBREA来代指。



IBREA

IBREA研究的区块链技术在房地产行业的应用主要包括三种方式：



房地产购买

房地产托管

房地产所有权转移



房地产行业的主要消费群体是普通用户，所以，对一个应用而言，如何让普通用户使用就成了关键问题。如何让用户自觉、自愿地使用区块链这样的技术，似乎并不是一件容易的事情。于是IBREA的策略就变成如何让用户在不知情的情况下使用基于区块链的技术。

来看一下IBREA是怎么做的。它们首先将房地产所有权记录都存放在区块链系统上，这一过程就像把文件上传到文件共享服务器中那样简单。

当用户上传文件到区块链系统上时，用户需要证明自己是拥有该文件的第一人。而当用户复制该文件，进行所有权转让时，用户需要证明他们现在是拥有这个文件的。因此，基本来说，IBREA实际上是借助区块链技术，通过一个很难伪造的文档来防止欺诈。

当有人伪造了文件，这时，IBREA的区块链系统将帮助你证明你是拥有该文件的第一人。即使入侵者能够产生一个伪造文件，他们仍然不具有转移资产的能力，除非他们同时也获取了控制对应地产的专用密钥，伪装成你的身份。因此，这里其实是有双重保险的：



显示所有权的实际安全文件

可以转移财产的私有密钥



最后看一下用区块链来做房地产登记的合规问题。洗钱和货币欺诈是IBREA所关注的，在这一点上其和政府的利益是一致的。区块链提供的是数字解决方案，而这和平常政府土地所有权登记的传统做法可以作为用户自由选择的两种方式，并没有发生矛盾。

此案例是IBREA提出的对于房屋买卖的应用。其实借鉴“汽车和区块链”的案例，区块链也可以用来实现房地产的短期租赁和长期租赁。





案例：小蚁——基于区块链技术的资产数字化系统



小蚁系统是一个基于区块链技术的资产数字化系统。它实际上是一个能将实体世界的资产和权益进行数字化，通过点对点网络进行登记发行、转让交易、清算交割等金融业务的去中心化网络协议。

和上一节讲述的IBREA方案类似，小蚁系统的设计理念主要是针对清算这个应用场景的，小蚁的区块链仅用作登记发生资产变更的交易。在小蚁的区块链中，挂单、撤单等不产生资产变更的日志型交易不会被写进区块链中。清算型区块链牺牲了一部分非关键性的信息记录，目的是为了获得更好的系统吞吐量，提高系统的灵活性和用户体验。

通过一种去中心化交易机制——“超导交易”，用户能够以超越中心化交易所的体验，完成去中心化交易。任何用户都可以在交易所上进行挂单，在挂单成交后，交易所将成交的交易信息广播到小蚁协议网络中，并把信息写入区块链中。

例如某用户A通过“超导交易”卖出某公司股权，该用户无须把股权事先转入交易所，只需要在本地通过私钥对委托单进行签名，就可挂单。与对手盘成交后，对方的人民币款项将直接进入用户A的钱包，无须通过交易所中转。



小蚁是基于区块链的资产数字化系统

有兴趣的读者不妨去读一下小蚁系统的白皮书：http://8btc.com/thread-22624-1-1．html。

在白皮书中，小蚁的创始人达叔描绘了小蚁系统可以应用的场景：



股权众筹

P2P网贷

员工持股激励

签署电子合同

数字资产管理

智能合约



我们以股权众筹为例。在众筹完成后，初创公司可以用小蚁系统来管理众多股东的股权，用小蚁提供的去中心化交易机制进行股权交易。初创公司获得了市场估值、股权流动性，用户获得了退出机制。通过将股权登记在小蚁的区块链上，初创公司能够以“区块链IPO”的方式获得资金。

小蚁系统为个人和公司用户都提供了中国法律认可的身份认证方案。通过身份认证的账户所参与交易的电子签名受《中华人民共和国电子签名法》的认可和保护，等同于实名签章。身份认证是用户可选项，而非强制项。股权等资产的转让和交易，其实质是各方签署电子合同，受《中华人民共和国合同法》认可和保护。

与其他很多基于区块链的实验系统不同，小蚁系统内置了KYC（know your customer，用户身份认证）和AML（anti-money laundering，反洗钱）接口方案，因而第三方支付、银行等金融机构可以合规地使用小蚁协议。

考虑到遗失密钥的可能性，小蚁还设计了一种资产找回机制——即使你遗失了某个地址的对应私钥，你仍然可以无须借助第三方就能找回其中的资产。

笔者和达叔讨论过，如果要让小蚁系统真正合规，则实名化不是系统的可选项，而是必须要满足的要求。





案例：区块链在艺术品领域的应用



在7.1节中我们讲述了区块链分布式账本，那么它的可追溯特性能否应用于艺术品市场呢？当然可以！

我们把这个艺术品区块链案例放在第7章是因为有价值的艺术品其实应该归类于资产。对有一定资产的人来说，艺术品往往是他们整体资产配置的一部分。

本节探讨的是一个旨在为参与艺术品市场的个人及组织提供技术性帮助的解决方案，以帮助艺术品市场保持其纯洁性，维护艺术家和收藏者的利益。

伪造品充斥着整个艺术世界，虽然传统许可证的形式可以帮助你创建一个可交易的商品，但实际上购买者无法分辨许可证的真伪，而凭一个许可证也无法分辨作者是否创建了多个艺术品的副本。

区块链技术可以提供一个解决方案，用来替代纸质的许可证。正如本书一直介绍的，区块链是第一个去中心化且可信赖的数据库，它可以可靠地跟踪虚拟财产的所有权。



《蒙娜丽莎》，达•芬奇的举世名作

传统数字艺术品的授权是不透明的，其往往依赖于某种物理形体，通过签印许可的纸张证书来制造稀缺性，这是其可上市进行交易的必要条件。然而这种方式在让数字艺术品拥有了稀缺性的同时，也破坏了数字艺术品所需要的其他特性，比如如何让它在世界范围内进行传播，以及证明数字签名的真实性。而基于区块链的许可证方式，则可以保留数字艺术品和稀缺性双重特点。

除了个人艺术家们，浸淫于艺术世界的大型机构发现这个机会后，同样也参与了进来。下面收集了一些近期艺术品领域的区块链应用的事件，以帮助读者理解区块链分布式账簿以及可追溯的特点。

第一个事件

奥地利现代艺术博物馆（MAK）成为第一家购买比特币艺术品的博物馆，并因此成为当时的头条新闻。博物馆的策展人马里斯·沃斯（Marlies Wirth）在接受采访时表示：

“分布式经济的想法已经步入了互联网领域……这对我们而言同样是有趣并且相关的。”

虽然目前仍旧处于初期阶段，但似乎区块链这种分布式共识总账系统应用将继续在艺术家们中蔓延，中间人的消去对他们而言往往充满了致命的吸引力，这不仅是因为利益，更在于对于自己作品的掌控权。

第二个事件

Masha McConaghy博士是柏林艺术产业中初创公司Ascribe的创始人和管理人之一。在接受CoinTelegraph的采访时，她列出了2015年运用区块链技术的艺术项目，称“2016将是有趣的一年”。她认为在自然艺术世界中需要很多清楚的出处，而区块链技术在这方面可以扮演重要的角色。在德国，特别是Gurlitt收藏品被发现之后，起源研究成了最重要的课题。不受管制的艺术市场需要透明度和监管，而区块链可以帮助解决许多问题。



Ascribe的创始人Masha McConaghy博士

（来源：http://cointelegraph.com/）

第三个事件

荷兰柏林艺术家日Harm van den Dorpel成功推出一个数字画廊。该项目旨在帮助艺术家出售他们的作品，而这些作品是“可下载的对象”，并且允许使用比特币作为付款方式中的一种。

第四个事件

Cointemporary是展示和出售艺术品的在线平台。该平台专门为一个单独作品展示10天，其间以固定价格的比特币出售作品。在作品被出售或者超过10天的期限时，平台会在接下来的10天中展示另一件作品。Cointemporary是由两个维也纳艺术家Valentin Ruhry和Andy Boot设立的，开创了通过比特币销售艺术品的方式，并且最近有更多属于区块链的数字艺术。这个平台表示“他们要把2016年只献给数字作品”。



展示和出售艺术品的网站Contemporary，创始人Valentin Ruhry

（来源：https://www.ascribe.io/）

第五个事件

N3uro作为一个销售想法的市场上线了。从字面上看，这个平台捕获人们的想法，然后通过记录这些想法作为有限的数字版本来出售，也就是说他们卖归属于区块链的大脑扫描。N3uro官方网站称：“这些有限的数字版本可通过版权和合同法的结合，而使用比特币区块链来登记所有权。”

第六个事件

Plantoid是以区块链为基础的机器人，它可以通过用人们捐赠的比特币来生长、开花，甚至复制自己，评论家们称之为一个跨越物理和电子世界的DAO（基于区块链的自治组织）。Plantoid可以使艺术成为“创造和自我复制的生物”。把Plantoid和Skynet（在电影《未来战士》中统治全球的计算机网络）做对比可能会言之过早，不过这应该算是一个相当有趣的发明。



能够复制自己的艺术品Plantoid

（来源：http://www.coindesk.com/）

第七个事件

有几个奖项是颁发给运用区块链技术来保护艺术品的艺术家们的，例如柏林艺术奖、Sluice和Portfolio Review。柏林艺术奖是针对当代艺术的年度奖项，对城市中的所有艺术家都开放。Sluice是由一名博物馆馆长和教育家发起的，旨在帮助艺术家展示和交流。Portfolio Review是一个为艺术和文化作品做介绍和交流的开放论坛。Masha McConaghy博士希望“2016年会有更多的艺术奖项颁给区块链”。

第八个事件——即将发生的事件

在艺术产业中，有几个运用区块链和比特币的新项目即将在2016年到来。23vivi是一个针对稀缺艺术作品的线上市场，该平台计划于2016年第一季度推出。应用区块链来保护数字艺术的ArtCity不久也将会重启。Lumen艺术奖也计划推出它自己关于数字艺术的市场。

总结一下，区块链技术对艺术产业非常有用，它可以帮助解决知识领域的产权登记和追溯的主要问题。分布式记账系统可以帮助难以伪造的艺术作品取得财产权，也许这就是为什么有那么多艺术项目的创业公司正在应用区块链做各式各样的应用尝试。





7.4　第三方支付和跨境支付



支付，包括跨境支付是我们很容易想到的两个区块链应用场景，毕竟比特币这个虚拟货币是区块链上最成熟的应用，而一个货币最大的作用就应该是支付。

我们可以搭建平台，以比特币或者其他虚拟货币作为媒介来实现实时的跨境支付。通过一个基于虚拟货币的平台，商户可以接收全球客户的比特币付款，并可以在任何区域采用当地的法币结算，从理论上讲整个过程是不产生任何费用的。

第三方支付对金融领域来说，不仅仅是一个资金的入口，而且还是业务的核心和发展的起点。所谓的第三方支付，就是在企业与银行之间建立一个中立的支付平台，为资金流转提供流通的渠道。提供这些服务的企业就是第三方支付公司，而提供服务的平台就是第三方支付平台。

不同于传统支付账户，在第三方支付流程中，资金信息和消费信息是分离的。第三方支付最大的意义之一就在于它是商品流、资金流和数据流对接的交汇点。

现代金融模式中有三个重要问题：



信息不对称

交易成本

风险定价



而在第三方支付账户这个交汇点上，这三个问题都可以得到一定程度的解决。

比特币和其他虚拟货币系统在跨境支付这个领域有独到的优势，特别是小额支付，因为比特币的转账可以在10分钟之内就被确认。而跨境支付本身是有固定费用的（约15美元），支付成本高，而且转账的周期也相对比较长。

不过我们认为，在中国，在这两个领域上做区块链应用是创业者需要慎重考虑的，因为这两个领域都涉及金融监管的问题。



如果想要在互联网上做支付，则你会需要第三方支付的牌照。

如果想要做跨境支付，则需要外管局的批准，否则你的互联网创业公司会被归类到地下钱庄。无论转账金额是10000美元还是1美元，没有执照都是不可以的。



假设我们不考虑合规和合法的问题，来看一下跨境支付领域的问题。

在比特币区块链领域做跨境支付的关键就在于用比特币或者其他虚拟货币作为传递的工具。



通过比特币系统做跨境支付的流程

如果支付的双方本身不是底层虚拟货币的拥趸，那么我们必须得注意货币兑换率的变动，引入资金池或者引入对冲机制。如果没有资金池或者对冲机制，那么在做跨境支付的时候，下面这个场景很可能会发生：

第一步，A和B确认要做一笔5000美元的汇款。

第二步，A向平台提交5000美元的汇款。

第三步，平台把5000美元换成比特币，兑换率是每个比特币500美元，所以换成10个比特币。

第四步，平台内部把美元从A的账号发送到B的账号，在8分钟后被确认。

第五步，平台把比特币换成美元发送给B。不过这时候，每个比特币450美元，所以只能换成4500美元。

这里的500美元去哪里了？

当然，如果是小额支付，那么问题不大，只要在短时间内没有发生大幅的震荡，损失的金额就不会太多，不过依然不会是无成本的。


————————————————————

(1) 事实上，DTCC可能就是我们前文提到的清算系统中最大的第三方机构。





第8章　金融领域之外的区块链应用




正如我们在本书中所说，区块链的应用绝不止于金融领域。我们一直在密切注意各种可以应用区块链的场景。

其实在任何原本有第三方中介或者中心系统的平台上，都可以考虑用区块链技术来加以替代。

本章介绍的是区块链在金融领域以外的应用。其中会介绍：



究竟哪些应用场景是区块链技术比较适合的？

NameCoin（域名币），区块链在域名服务上的应用是怎样的？

La'Zooz想要如何再次颠覆Uber的模式？

音乐版权与区块链智能合约是怎样不谋而合的？

区块链在物联网上的应用可以是怎样的？

区块链可以怎样应用在健康医疗领域？

如果不用区块链的技术，只是用区块链的思想，那么我们可以做些什么？





8.1　区块链2.0技术的价值



2010年，中本聪曾经设想过他的区块链设计可以应用的场景，例如：



委托付款服务

第三方仲裁

需要多方签约的合同等



不过群众的想象力是中本聪先生想象不到的。现在有很多人在设想各种区块链的应用场景，其中涉及各种各样的领域。

更进一步，如果我们学习的是区块链技术的设计理念，借鉴的是如何做可追溯的分布式账本或者多冗余的无中心框架，那么可以应用的场景就更加广泛了。

无论我们做的是什么样的产品，用来适合怎样的应用场景都是我们首先需要考虑的。我们的出发点不应该是“区块链能够做什么样的产品”，而是“在这个场景下需要一个产品，而这个产品适合用区块链技术来实现”。

笔者认为，凡是在传统场景下，有过多的中介参与，以及过高的中介成本或者追踪成本和高信息安全的需求，都会有区块链技术的用武之地。



区块链可以用来搭建很多不同的系统

（来源：LEGO Blockchain）

下面看一下在应用领域中有哪些功能是区块链可以发挥作用的？

（1）有需要被公开的记录的。

（2）有需要被安全存储、不能被篡改的私有记录的。

（3）原先有一个中间人或者中间机构的。

（4）有共享经济或者说共同消费概念的。

（5）有相关联的可交易的实体的。

（6）访问是需要身份验证的。

（7）有需要自动执行的合约的。

其实上面这些功能几乎覆盖了所有行业，无论是政府机关、健康医疗、制造业、娱乐业、军工业、法律业还是慈善业，都有区块链的用武之地。





8.2　区块链的五十个应用场景



下面简单列出区块链可能有的五十个应用场景，这也是2015年陈刚同学在“高戎汇资本”微信公众号上曾经为读者们展示过的内容。

第一个场景：互联网金融。

第二个场景：法庭辩护和举证的识别。



区块链可以在法庭辩护和举证上得到应用

（来源：http://www.coindesk.com/）

第三个场景：民间公证。

第四个场景：知识产权保护以及网络照片及视频真实性识别。

第五个场景：股权众筹平台投资份额登记。

第六个场景：教育领域学位、学术证明。

第七个场景：区块链保险。

第八个场景：艺术品真伪识别及交易。

第九个场景：第三方支付与数字钱包的互融互通。

第十个场景：技术开发的源代码保护。

第十一个场景：音乐版权保护。

第十二个场景：钻石追踪。

第十三个场景：基因储存、追踪及医学。

第十四个场景：去中心化的云搜索技术。

第十五个场景：物联网标配的个人云助理。

第十六个场景：智慧城市的技术架构。

第十七个场景：零售业商品追踪。

第十八个场景：房地产流程管理。

第十九个场景：全球公益组织的协同。

第二十个场景：反洗钱。

第二十一个场景：真正大数据公司。

第二十二个场景：智能家庭解决方案。

第二十三个场景：个人生命成长记录。

第二十四个场景：金融公司资产管理平台。

第二十五个场景：股票及金融衍生品交易所结算。

第二十六个场景：小微企业云智能财务管理系统。

第二十七个场景：国际贸易去中心化共识。

第二十八个场景：国家法币货币政策的决策工具。

第二十九个场景：商业银行清算新体系。

第三十个场景：四大会计师事务所审计应用。

第三十一个场景：国家及地区税务审查及结算。

第三十二个场景：购物中心当日结算应用。

第三十三个场景：遗产登记。

第三十四个场景：国际货币基金组织的技术“G点”。

第三十五个场景：奢侈品的全球限量版登记及查询。

第三十六个场景：跨境电商结算数字钱包。

第三十七个场景：可视化数据应用技术。

第三十八个场景：国家车辆管理。

第三十九个场景：智能交通。

第四十个场景：移动互联网APP信息孤岛的“链”接。

第四十一个场景：VR虚拟现实内容平台的储存及应用管理。

第四十二个场景：区块链社交。

第四十三个场景：区块链“云办公”。

第四十四个场景：区块链“知识管理”。

第四十五个场景：区块链工商登记及查询。

第四十六个场景：各大银行陆续推出自己的“加密数字货币”计划。

第四十七个场景：区块链与工业4.0。

第四十八个场景：区块链与智能机器人。

第四十九个场景：云图书馆。

第五十个场景：区块链公益慈善管理。

毋庸置疑，这里的第一个场景——“互联网金融”是我们在前几章都在着重讲述的。在本章的后续章节会陆续介绍区块链技术在其他场景下的应用。





共享经济和区块链



在本书的第2章介绍过，区块链技术是基于P2P（peer-to-peer，点到点）的技术。

P2P其实是共同消费（Collaborative consumption）在金融领域的一个延伸。共同消费的定义是参与者们共同分享产品或者服务，而其中的每一个个体并没有对这些产品和服务有自己独立的所有权。P2P的概念是从互联网上延伸出来的，因为在P2P借贷出现之前，还有P2P音乐、P2P视频、P2P住宿、P2P租车、P2P购买等。

共同消费这个概念最早是在1978年由Marcus Felson和Joe L. Spaeth提出的，2007年英国的Ray Algar再次提出此概念。2010年Rachel Botsman和Roo Rogers重新包装和倡导了这一概念。

把共同消费的概念再往上拔高一层就成了共享经济。其实笔者更加喜欢共同消费这个概念，因为大家在提到“共享经济”时所描述的几乎都是消费场景，例如“坐车从北四环到三元桥”，“在亚龙湾附近的民居住一个月”等。不过“共享经济”好像是被更多人接受的一个词语，所以本节的标题也就改成了“共享经济”。



三个火枪手

（来源：http://www.cadytech.com/dumas/）

共同消费这个概念的主旨是“我的也是你的”，倡导的是新社会经济环境下的消费革命理念。笔者最早看到这个概念是在大仲马的经典之作《三个火枪手》中：

Un pour tous．Tous pour un．

（人人为我，我为人人。）

当大家都能够遵循原则来做一些事情的时候，共同消费的概念就能够被充分实施。

2010年，这个理念被美国《时代》杂志评为改变世界的十大理念之一。这个概念出现在金融危机的背景下，社会中心财产和资源的使用率严重不足，此时要刺激消费者通过点对点的市场重新连接，以产生新的工作、新的收入流和新的社区网络。

共同消费，换成一个更容易理解的说法就是“共享的社会”。Uber和Airbnb都是共同消费概念下的产物。共同消费的概念可以延展到生活的每一个部分，例如：



理财

投资

保险

环保

医药

服装

饮食

住宿

交通



众所周知的Uber或者滴滴打车都是共享经济在交通领域的实际应用案例。下面来看一下Airbnb——一个提供短租共享服务的平台，它是共享经济在住宿领域的应用案例。

下图展示了Airbnb的商标的含义：

People（人）＋Places（地方）＋Love（爱）＋Airbnb



Airbnb图标的诠释

（来源：Airbnb设计团队）

笔者是比较喜欢Airbnb的这个商标的，不过网上有丰富想象力的网民们对这个商标的诠释颇让人啼笑皆非。具体他们是怎么说的，读者可以上网查一下，这里就不介绍了。

在Airbnb这个短租社区上，用户可以通过网络或手机应用程序发布、搜索度假房屋租赁信息并完成在线预订。Airbnb中的房东在全球190多个国家共34000个城市向你分享他们的居住空间。在Airbnb上，你可以分享各种类型的房源，你可以出租整幢海滨别墅，也可以出租起居室角落里的一张气垫床。



Airbnb为大家提供短租服务

（来源：Airbnb官网）

除了Uber和Airbnb，共同消费或者共享经济的成功案例还包括面向全球的在线工作平台AAwork、P2P货款平台Prosper、共享饮食平台Eatwith等，在此就不一一列举了。

对共享经济或者共同消费而言，区块链都是一种很好的实现方式。

从理论上来说，无论是Uber（或滴滴打车）还是Airbnb，在严格意义上都不算是“共同消费”，因为中间有一个以赢利为目的的运营商的存在，并不符合“人人为我，我为人人”的崇高理想。

不过从笔者的角度来看，商业利益的存在是有意义而且合理的，纯粹只是为了理想而做的项目，鲜有成功案例。在下面介绍的La'Zooz就是这样一个并不太成功的案例。如果以太过理想化的思维方式期望依靠人们的主观能动性来推进平台的发展，那么必然会遇见骨感的现实。





案例：La'Zooz，共享经济的一个尝试



前面讨论了共享经济和共同消费的概念。共享经济其实很适合用区块链技术来实现，例如Airbnb（提供短租的平台）或者Uber。

La' Zooz是一个寻找共乘的平台。在La' Zooz看来，Uber依然不够理想化，他们想解决的问题类似于Uber或者滴滴打车，而唯一的不同点在于没有中间公司的介入。La'Zooz平台将根据实时交通需求来同步空座位，以“公平的价格”为到达相似目的地的人们创造优秀的共乘体验。

La'Zooz由社区所拥有的分散式交通平台和利用交通工具中未使用的空间来创建各种智能交通解决方案。通过使用区块链技术，La'Zooz让开发者、用户和支持者在一个“公平份额”奖励机制下协同工作。



La'Zooz是共享经济的一个尝试

（来源：http://www.lazooz.org）

La'Zooz网络节点分布在参与者的手机和电脑上。不同于比特币区块链，La'Zooz并不需要在每个节点上都做“计算量的证明”，而是用一种新的虚拟币“zooz”来做“移动的证明”。也就是说，获取原始“zooz”币的过程不是通过“挖矿”，而是通过开车驾驶。“zooz”币的价值是由系统上所有的参与者共同决定的。在最开始的时候，因为系统上并没有太多人通过驾驶而获取“zooz”币，可能会很容易就获取“zooz”币，而当参与的人越来越多时，则很可能需要驾驶很长时间或者在一段很少人驾驶的路上行驶才能获取同等价值的“zooz”币。

当你打开一个安装了La'Zooz系统的手机并开始行驶时，你会获得一定数量的“zooz”币；而当你想要让这个网络中的某一个人载你去一个目的地的时候，你就得用“zooz”币来支付。

和其他共享经济系统一样，一个项目必须要形成一定规模才可能有价值。例如当你打开La'Zooz终端，最近的一个司机离你的位置有1000千米时，这是没有意义的。去中心化的设计导致没有一个居于中心的企业或者机构在运营这个系统，其完全倚仗的是参与者们的热情和共享精神，因而La'Zooz至今离爆发式增长的临界点还比较远。

我们需要以商业化运作的思考方式来运作这些项目，因为理想是不足以支撑项目的长远发展的。

除La'Zooz外，互联网2.0时代中的一些共享经济产品也都有对应的去中心化解决方案，例如：



OpenBazaar是去中心化的Craigslist，是美国最火的分类信息广告网站，或者也可以说是美国的58同城或赶集网。

Twister是去中心化的Facebook。

Gems是去中心化的Twitter。

Swarm是去中心化的Kickstarter，是美国最大的众筹网站。





案例：域名服务



从全球范围看，域名服务是一个不错的全球范围的应用场景，因为从理论上说，域名服务商不应该隶属于任何一个国家，而是属于全世界。在域名服务上实现去中心化最大的好处在于，信息可以不受任何人或者组织的监管。从早期在比特币和区块链社区中自由主义为主流人群的角度出发，很自然地，域名服务就成了非虚拟货币领域的早期应用之一。

今天的现状是，ICANN（The Internet Corporation for Assigned Names and Numbers，互联网名称与数字地址分配机构）控制了域名的发行。如果你想要一个顶级域名，例如.raymond或者.jerry，那么你需要向ICANN发出申请。如果你想要用一个ICANN已经认可的顶级域名来注册一个网站，那么你需要向一个ICANN认可的DNS域名服务商提出申请。

买卖域名对绝大部分人来说都不会是一件频繁去做的事情，所以在这个领域中发生的很多事情其实并不太为人所知。其实，域名注册机构的一些行为会导致用户域名的丢失或被盗，而这些行为并没有任何机构能够监控或者协调。据传不少域名登记机构和注册公司都从事过一些有争议的行为，例如当某个域名刚刚被某位客户搜索时，注册商会立即将该域名抢先注册占为己有。

DNS是什么

下面简单解释一下DNS的概念。DNS（Domain Name System，域名系统），在互联网上作为域名和IP地址相互映射的一个分布式数据库，能够使用户更方便地访问互联网，而不用去记住能够被机器直接读取的IP数字串。

估计没有人能够看明白或者记清楚http://220.181.57.217是什么网站吧？不过当你在浏览器的地址栏中输入上面这串数字时，你就能访问到百度。上述的地址和http://www.baidu.com/是完全一致的，而能够记录这个映射的数据库就是DNS。

Namecoin（域名币）是一个基于区块链技术的分布式域名系统，其原理和比特币是一样的。中本聪最早给Namecoin起的名字是BitDNS。

这个开源软件首次发布的日期是2011年4月18日。Namecoin试图通过使用类似比特币的区块链来提供名称注册体系。用户可以把他们的称谓与其他信息注册到一个公共数据库中。Namecoin最大的用途是被认为可以用来做DNS系统，把一个类似于bitcoin.bit这样的域名映射成电脑可识别的IP地址。

在Namecoin的环境中，如果有人想把一个用户的域名窃为己有，则唯一的做法就是拿到这个用户的私钥。

Namecoin项目的顶级域名是.bit，例如维基解密就有一个以.bit为后缀的域名网址——wikileaks.bit。

Namecoin和其他普通的域名服务商之间是不通的。如果想要访问某一个以.bit为后缀的网站，那么必须要运行一个去中心化的DNS软件。可以在浏览器中使用.bit的代理服务器，也可以使用一些插件（在Google Chrome和火狐上都有对应的插件）。否则，当你试图打开以.bit为后缀的域名时，浏览器会报错。

而如果你想要注册一个以.bit为后缀的域名，那么也必须得用特殊的域名注册服务商才行。下面以一个顶级的域名服务商godaddy.com为例，如果你想要搜索一个普通的域名，那么你看到的结果如下图所示。



bitcoin.com域名已被售出的信息

不过，如果你想要注册一个以.bit为后缀的域名，那么搜索结果如下图所示。



bitcoin.bit域名的信息无法被获取到

其实，不管你输入的.bit域名是怎样的，搜索结果都是相同的，因为GoDaddy并不知道如何解析翻译以.bit为后缀的网络地址。

Namecoin项目和很多早期的区块链项目一样，一直都不温不火。原因之一是系统的设想者们本身过于理想化，不但没有把它当作一个商业项目来运营，而且对于以区块链为基础系统的商业行为有天生的排斥。





案例：音乐版权与区块链智能合约的不谋而合



下面介绍一些在全球已经发生的音乐版权和区块链的案例，帮助读者朋友更深刻地理解音乐版权与区块链是如何不谋而合的。

第一个事件

在2015年，有一款适用于音乐产业的区块链DRM（Digital Rights Management，数字版权管理）解决方案上线。这个DRM解决方案名为eVue，其开发者Bryce Weiner今年41岁，在比特币和金融科技领域从业多年。曾经流传过一份名单，上面列出了最有可能是中本聪的10个人，其中有一个人就是Bryce。

在涉足区块链技术产业之前，Bryce曾经做过音乐节目主持人。Bryce在接受媒体采访时说，该区块链应用将开发唱片工业协会（RIAA）所需要的解决方案，不仅会为现存的商业利益服务，还会为独立艺术家们提供平等的竞争平台。该认证系统可以用来追踪用户一生中所购买的所有音乐产品，即“终生”身份证明，eVue会使用跨平台解决方案来认证用户的唯一身份。

Bryce Weiner说：

“当你购买唱片时，你不需要因为有了新的电唱机而重复购买。我们会把这个理念融入到数字内容中去的。”



区块链和音乐，一个革命正在发生

（来源：http://ujomusic.com/）

第二个事件

由企业家Phil Barry领头的Ujo Music宣称，他们正在区块链之上重建音乐行业。Ujo的目标是希望能够解决流媒体音乐和艺术家付费问题。Ujo Music作为音乐版权管理平台，可以让歌曲的创作者与消费者建立直接的联系，从而省去了中间商的费用提成（例如iTunes收取的30％费用提成）。

更进一步，歌手甚至可以将自己作为一个公司，在WeiFund进行IPO上市，如此一来，持有歌手股份（代币）的投资者就会分得歌曲今后的销售收入，他们是音乐人天然的铁杆粉丝团，帮助歌手推广音乐也不仅仅是出于经济动机，同时也是出于情感上的支持。试想一下，当你在周杰伦还在酒吧唱歌的时候，或者TFBOYS刚刚组团的时候就持有他们的代币，从而你就会伴随着他们一同成功！同时代币也是歌手们与粉丝团之间互动的媒介，例如歌手可以让持有代币的粉丝优先购买演唱会的门票和歌手的限量版CD。如此，粉丝经济便真正有了“经济”的概念。

除此之外，Ujo还想把智能合约作为歌曲清单的自主大脑，从而能够更好地将歌曲背后的艺术家和创作者分类。

第三个事件

尚处发展期的PeerTracks想要打造一个新型音乐流平台，在这个平台上，用户可以直接付款给艺术家，而无须中间人。PeerTracks还希望能在艺术家和用户之间创造出更直接的互动。

第四个事件

许多音乐人正选择区块链技术来提升在线音乐分享的公平性。目前有两家公司正通过直接付款给艺术家和利用智能合同来自动解决许可问题。

第五个事件

多伦多的工业摇滚乐队22HERTZ，由Ralf Muller创建，他们将乐队新单曲的版权用编码的形式编进区块链中。这首歌将被打乱成散列，然后被附加到OP_RETURN(1)功能中——一个标准化功能，可以允许数据被传递到区块链中。

与音乐艺术家相关的一场革命即将到来，这就是基于区块链的智能合约，它能够改变业内人士和数据的交互方式。当然，区块链技术如果想要能在音乐产业有充分的应用，则需要解决的技术问题也还有很多。

音乐版权是永恒的话题，要让音乐人更有激情地参与音乐的创意与制作，版权保护是根本。区块链在音乐版权领域的价值不容小觑。

格莱美奖得主ImogenHeap是这么说的：

“对艺术家而言，我们正处于一个历史中的伟大时刻。一场革命正在发生——能够让艺术家们在更大的范围内掌控自己的音乐和他们想表达的内容，这就是区块链。”





8.3　物联网的应用



机器学习与智能物联网领域是笔者在研究区块链时最早想到的实际应用场景。当然，IOT（Internet of Things，物联网）的概念很大。从广义上来说，本书中提到的所有案例都可以归类到这个领域中来。

顾名思义，IOT是建立在互联网上，把所有的事物联系在一起的泛在网络。IOT中的“Thing”是一切事物，可以是任何一个普通物理对象。

例如中国一直努力建造新的现代化基础设置来配合迅猛发展的城市化进程，通常我们俗称为“智慧城市”的建设。“智慧城市”就是一个物联网的项目，而在这个项目中有很多地方是可以使用区块链技术的。例如：



确保智慧城市基础设施的安全

确保采集的数据是安全的不被篡改的

基于区块链的系统能够提供更高的透明性和可审计性

能够减少行政和审计费用



在本节中，我们把物联网的概念局限到非金融领域、有具体实体相关的概念中。下面举两个案例，一个是制造业的案例，另外一个是健康医疗领域的案例。





案例：制造业和区块链



在这个案例中，我们来看一下区块链技术是如何应用在制造业领域，让一些小的企业可以合在一起共享数据，以达到大企业才能具有的数据分析能力的。

不考虑商业模式和营销的问题，制造业对数据的需求主要在提高产品质量和降低生产成本上。例如在品质管控方面，从制造过程中找出影响产品品质最重要的因素，以期提高作业流程上的工作效率；从汽车或游艇的哪个部分容易出故障的数据中，找到改善发动机的维修周期的方法，从而降低返修率；或是在供应链上采集数据，找出可以节省的环节来降低整体产品的生产成本。

如下图所示，当一家超大型的生产型企业想要做一个基于物联网的应用，则它们有充足的人力、物力做大数据采集、筛选、分析、挖掘，例如可以采用机器学习的方式来做分析，之后得出的方案用以指导生产线，或者提供整合的数据进行更加深度的机器学习。



用数据来改良制造业

这里最关键的问题在于数据的采集和整理。如果要让数据真正有价值，那么它们采集的数据点需要有一定的基数，例如有10000个点在长期产生数据。

同样的情况，如果一家中小企业想要做同样的事情，则它们是没有足够的人力、物力和时间来完成数据采集工作的。不过如果100家从事相同行业或者生产类似产品的企业合在一起，那么它们是可以互相合作的。这100家企业合在一起做数据共享，构成的系统有以下特点。



每家企业负责提供数量不等的真实数据点。

每家企业都有数据的一个完整拷贝。

任何一家或者多家企业脱离这个体系并不影响系统的正常运营。

所有的数据添加都有完整的记录。

如果有一家新的企业想要加入这个体系，那么它们需要首先把自己的数据提供出来，才能共享其他企业的数据。



当我们列举出这个系统的这些特点时，使用什么样的技术手段来实现它的功能已经呼之欲出了。是的，我们可以以区块链为基础来做数据共享。

当我们应用区块链来实现这个系统的时候，每一家企业都是这100家企业组成的系统中的一个节点。它们共享自己的数据，同时也得益于其他企业在整个系统中贡献的数据，并共同从数据分析和挖掘的结果上得益。





案例：基于区块链的健康档案



下面先来看一段小故事：

小李是一个旅游爱好者，同时又是一个虚拟币幻想症患者，这是一种类似绝症的病症，发作起来会很痛苦。

一天，小李开车到另一个城市旅游，途中突然呼吸急促，小李知道，这是身体出问题了，他急忙停车并拨打了120。就近的救护中心根据小李的手机号码了解到小李的患病史和以前的诊断记录，救护人员根据这一情况带足了相应的抢救药物并在10分钟后赶到现场。

经过紧急抢救，小李暂时安全，然后被送入当地的医院。当地医院的医生用自己的ID获取了查询小李存放于医疗区块链上信息的权限，然后对小李进行了进一步治疗。

小李醒过来之后了解到发生的一切，也知道了自己的治疗费用已经由医疗保险智能合约自动支付完毕。

虚拟币幻想症的根治是一个世界性课题，研究机构有很多。小李选择加入了一个网络社区，里面都是患有虚拟币幻想症的病友，他们自发成立了一个虚拟币幻想症研究成果转化基金，众筹了一笔资金。在用自己的ID签署智能合约后，研究机构获得权限查看每个人的病症信息和以往的治疗方案。研究机构用这些数据作为研究依据，产生新的治疗方案并追加到患者的区块链医疗信息中。而获取个人病例与提供治疗方案的费用也已经通过智能合约的形式进行了费用抵销。

每一年，都会有无数像小李这样的病例被写入到区块链医疗信息中，由此产生的大数据分析结果也同步转化为新的治疗方案，为解除患者的痛苦做出贡献。

在过去的几年中，我们看到无数的方案介绍这朵“云”和那朵“云”如何可以便利地存储健康医疗数据。其实，在云端存储病人的信息，包括个人信息、病情、诊断方案和检查结果等，在技术上早就不是问题了，可以选择的供应商也有很多。而最大的并且没有解决的问题其实是如何做好安全性、隐私性和实用性的折中。



区块链技术可以用在医疗健康领域

今天现有的电子健康档案（EHR）通过卫生服务记录、健康体检记录及疾病治疗与调查记录这三方面获取信息，然后进行统一汇总，以求做到一方录入，多方使用的目标。不过现有的系统存在以下问题。



集中式系统和分布式共享天生就是有矛盾的。

没有哪家医疗机构愿意无偿提供自己的数据。

目前的体系依然是以一家医院或者一个社区为基本单位，无法真正有效地做到一方录入、多方使用。不同的医疗机构无法互相获取患者的健康档案和历史记录。

无法避免患者信息被泄露。

无法避免患者的隐私被篡改。

当安全性和隐私性有足够的保障时，访问的便利性又有了问题。



事实上，笔者认为，区块链技术能够为医改提供很好的解决方案，特别是在医疗健康领域更是有着先天的优势。

在基于区块链的信息系统上，一切信息都有着ID匹配和权限获取的制约，这既能保证患者信息的公开透明，又能尊重和保护患者的隐私。基于区块链的系统还能保证数据不被篡改，以免对患者造成危害。

在本案例最初的场景描述中可以看到，如果做不到真正的信息公开透明，小李就无法及时获得妥善医治。这种情况在我们的生活中其实很常见，每个人在不同的医院都需要挂号建立档案，换一家医院就要重新再来一遍同样的检查流程，而最主要的是以往的治疗历史记录无法得到利用。

在理想状态下，健康医疗档案系统的使用场景应该是这样的：

（1）为所有的医院和专业诊所构建一个统一的区块链系统。

（2）在这个系统上每个人都有一个公开透明的健康档案。

（3）每个健康档案只需要建立一次。

（4）根据就医场所的不同，数据的唯一性能够得到保障。

（5）根据时间戳，新的就医场景会不断累积完善健康档案、医疗方案及保健方案。

（6）个人健康档案可以根据权限匹配规则有偿提供给医疗研究机构进行病历分析和医学研究。

我们的健康档案区块链系统采用无中心化的P2P思想，从而免除了需要对中心化存储的信任问题，能够依据开源共识协议，自动安全地交换记录数据。我们将就医记录、诊疗记录等信息写入区块链中，数据就具备了不可被篡改的特性。任何时候，对慢性重症患者来说，他们最希望听到的就是自己所患重疾的医疗方案取得了进展，并能够及时享受新的科技发展带来的好处。这个健康档案系统提供有偿的数据服务，患者们对研究机构开放自己的健康档案，同时也获取了研究成果的优先使用权。

下面简单列举一下在这个健康档案系统上的一些规则。

权限规则

系统分为医、患、药三大类别，进行ID匹配，不同权限具备相应的查询与写入资格。

查询规则

系统根据相应的ID身份验证查询数据信息，对于没有足够权限的ID，数据是不可见的。

更新规则

系统根据时间戳，动态更新数据信息，包含健康档案信息和医院药物采购信息。

结合大数据分析之后，我们的健康档案区块链系统将会变得异常强大，所有相同病症患者的医疗信息在被统一采集、梳理、分析、挖掘后将会出现由量变引发质变的效果。

今天已经有些人在本案例最开始讲述的场景中的部分做尝试了。例创业公司DNA.bits，他们会把病人的DNA信息放到区块链上，然后有权限的医生和研究者可以通过自己已经验证的私钥访问这些信息。





8.4　OpenChan—区块链技术思想应用的典型案例



比特币是目前最成熟的区块链实际应用，没有之一。自诞生之日起，比特币迅速扩张却无人维护，这也是被很多“矿工”或者发烧友所津津乐道的，但如果从魔鬼代言人的角度来说，则笔者认为这其中隐藏的风险巨大无比，无法用自我安慰的方式去掩盖。我们不能只看见比特币阳光灿烂的一面，它背后的阴影面积有多大还是要计算一下的。

在本书中，我们多次提及，我们在意的是区块链技术的设计理念，如果仅从区块链技术上借鉴如何做可追溯的分布式账本或者多冗余的无中心框架，那么可以应用的场景就更加广泛了。

与笔者同为ex-Microsoft（前微软）员工的Flavien Charlon同学创建了Coinprism公司，并在2015年推出了开源的OpenChain产品。

虽然被归类为区块链创业公司，但他做的技术从严格意义上来说其实不能算是区块链。用Flavien Charlon自己的话来说，“Openchain不是blockchain（区块链），而是区块链的近亲。”

在OpenChain的数据结构中，交易依然是链接在一起的，只不过交易列表不再组成一个个的区块。区块链和比特币的信徒们可能会认为这样的应用就不再算是区块链应用了。不过在笔者看来，技术手段本来就是为了商业应用而存在的。为了坚持一个理念而不愿意对技术加以斧的想法是不正确的。



借鉴区块链思想来做分布式系统

（来源：OpenChain.org）

Flavien Charlon把区块的概念从区块链中剥离出来的原因在于效率。正如我们在前文中看到的，把交易加入到区块这个过程是需要时间来完成的，虽然这个时间并不太长，但是对某些实时性要求比较高的应用来说是不可忍受的。那么为了让区块链的设计思想能够应用到这些应用中去，只能做一些折中的方案，OpenChain就是一个很好的尝试。

OpenChain也是一个开源的项目，有兴趣、有技术背景的读者可以在这里找到它们的源代码：

https://github.com/openchain/openchain。


————————————————————

(1) 这里使用OP_RETURN来存储数据的方式是被比特币社区中有些人所诟病的。在他们看来，区块链就是用来存储金融交易数据的，不能用来存放其他无关的信息。





第9章　区块链技术的预测和展望




如果说2015年是区块链的元年，那么2016年应该是区块链应用的元年。

2016年1月，在埃森哲发布的《埃森哲2016年技术展望》报告中提到，在针对全球3100多名业务与信息技术高管的调查中发现，全球经济的33％受到了数字技术的影响。同时，86％的受访者认为在未来3年中，其所在行业的技术变革步伐将显著加快，甚至将以空前的速度在推进。

在埃森哲的报告中，83％的受访者认为，信任是数字经济的基石。而区块链技术就是铺垫这个基石的有效手段。

随着越来越多的人对于区块链技术的关注和投入，区块链技术本身一定会愈加成熟。



2016年是区块链应用元年

（来源：http://www.the-blockchain.com/）

2015年年底，PWC（普华永道）的Jeremy Drane和Cathryn Marsh发布了他们对于区块链在金融领域应用的预测：

（1）当传统金融机构在探索它们与客户、供应商和竞争者之间全新的合作机会时，会尽量试图保护它们原有的核心数据和能力。

（2）大型金融机构会在战略层面框定区块链技术可以介入的领域，从而控制风险。

（3）市场参与者们会开始围绕着交易层面来做正式的开发。

换句话说，在2016年，各家金融公司可能会经不住诱惑，纷纷踏入区块链这个领域，而且它们的介入不会只停留在概念层面，会在比较深入的“交易”层面的场景上尝试使用区块链技术。

创业公司ConsenSys的联合创始人Andrew Keys提出了2016年关于区块链和分布式技术的16项预测（原文地址在http://www.coindesk.com/16-blockchain-tech-predictions-2016/）。下面特别摘录了他的预测内容，并直接采用比特头条（www.bitett.com）翻译的版本以分享给读者们。

（1）使用区块链或者分布式账本术语的人将认识到他们其实在说以太坊。

以太坊将开始展示它的威力，基础协议已经不需要花费更多的精力了（在2015年7月31日已成功推出1.0版本），开发者将更多的精力放在去中心化应用的开发上。

除此之外，以太坊浏览器比如Meta Mask和Mist，uPort钱包以及自主身份入口（self sovereign identity portal）将会被全世界99.5％的非编程人员使用，因此普通用户不用采用命令行来使用以太坊。

每个以太币的价格在2016年2月29日将会超过1.15美元。

（2）可扩展性将会成为公共区块链技术的杀手锏。

就这一点而言，以太坊将会使自己变成当之无愧的领导者。

比特币会有自己的侧链和闪电网络，但是这些都需要对底层协议进行改动，要实施的话则会需要很长的时间。

其他的系统，像DAH（Digital Assets Hyperledger），虽然有可扩展性，但是没有一般的分布式智能合约的功能。

以太坊有状态旁路（State channel）和雷电网络（Raiden network）两种解决方案。雷电网络类似于闪电网络，但在小额支付和线下交易方面，它比闪电网络更加灵活。基于区块链的设备需要智能合约来提供解决方案，相信不久以后在以太坊中就可以使用这些机制了。

以太坊将采用更具优势的POS机制来代替比特币效率低下、浪费资源的POW机制，对此进行的研究已经有一年多了。

在一年多的时间里，以太坊一直在研究分区地址空间（sharding address space）的解决方案——实现内交易只需要被一部分验证者确认，验证者只需要验证一部分交易。现在以太坊的交易速度最高达到25次／秒，还没有迫切面临扩展性问题。在以太坊2.0中将会达到VISA和美国运通网络级别的交易处理速度。

当这一切发生后，我们可以看到像IBM这样的科技巨头将使用以太坊作为基础来搭建它们的物联网（Internet Of Things，IOT）平台。

（3）我们在2015年知道了区块链是什么。

2016的流行语将会是智能合约、梅克尔树和权益证明（POS）。

（4）公共链和私有链将共存。

采用私有链和联盟链的区块链解决方案的创意将会明显增加。并且许多的商业解决方案会在私有链和以太坊公共链上展开。

（5）人们将会进一步认识到上一代互联网将要崩溃瓦解。

分布式文件系统（IPFS）将会席卷世界。

（6）2016将是区块链编程遍地开花之年。

在世界500强公司中会出现更多的使用PoC（概念验证）和MVP（最小化可行性产品）的区块链样板项目。

（7）PoC（概念验证）和MVP（最小化可行性产品）将成为“区块链即服务”方案的一部分。

云服务企业，例如微软的Azure平台，将会为开发者提供一个平台，使得它们将注意力集中在解决公司痛点问题上。

（8）监管者会逐渐理解并喜欢上区块链技术。

在2008-2009年的金融危机后，美国商品期货交易委员会和其他的监管者为未清偿的互换交易制定了抵押品规则。

这些规则可以被嵌入到一个自动抵押品中，再平衡系统的智能合约自动执行，以确保监管的透明和执行。这些规则可以被嵌入到智能合约中，实现一个自动的抵押再平衡系统，保证监管规则被遵守。

可以想象一下，在经济危机中，监管者可以实时看到所有交易方的交易方向和支撑交易的抵押品。

（9）律师事务所将开展编写智能合约的业务。

（10）我们可以学习什么是自主数字身份（Self Sovereign Digital Identity），以及怎样拥有我们的身份。

像Joseph Lubin, Christian Lundkvist以及Vinay Gupta这样超前的思想家将会掀起一场翻天覆地的变化。

（11）比特币仍将是一个相对较小的货币。

比特币仍将是一个优秀的价值转移协议，此外无它。但是，其价格会因减产和中国的投资者的关注而上升。

Coinbase将会成为第一个区块链独角兽，比特币的价格在2016年2月29日会突破475美元。

（12）银行会继续申请专利及建立内部的区块链技术。

即使它们是联盟的成员，也会继续这样做。

（13）Linux基金会的“公开账簿计划”（Open-Ledger Project）将会促进区块链技术的变革。

（14）政府开始意识到区块链技术的潜力。

政府将把区块链应用到各个领域——从所有权登记到身份系统。

（15）关于区块链的炒作不会停止。

这个世界开始理解区块链可以打乱任何事物。

（16）身为区块链世界的一部分的每个人，最好保持谦虚。

CEO、银行家们、会计师、律师们将会学到有许多需要理解消化的技术知识，而电脑科学家会将法律、审计、商业开发和经营管理事务外包出去。

Andrew Keys是ConsenSys协会的主管，也是创业公司ConsenSys的联合创始人、ConsenSys顾问团成员。在创业之前，他在UBS从事股票分析。因为ConsenSys公司是基于以太坊技术的生态圈的一部分，所以Andrew对以太坊的推崇备至当然是毋庸置疑的。不过对于他对以太坊的相关预测，请读者自己思考一下是否应该全盘接受。除此之外，他的其他的预测是笔者高度认可的。

在这16条预测的基础上，针对当前市场中即将诞生的一些区块链应用，笔者提出一些补充性的预测。

这些预测可能会发生在2016年，也可能会略迟一些。这些预测是否能够实现，请大家拭目以待。

（1）区块链成为中国P2P公司的良药。尤其是具有市场规模且有较好品牌的互联网金融平台会陆续开展区块链领域的尝试，其主要用于征信与风控体系的建设。区块链征信会成为新的流行。

（2）分布式账本和可追溯将是两个最大的应用入口。

（3）使用区块链来进行权益登记会流行起来。

（4）区块链专项投资基金陆续诞生。

（5）以区块链为主题的孵化基地陆续诞生。

（6）资本对区块链的投资加速，区块链的创业会成为创业咖啡馆的热门话题。

（7）上海会成为区块链创业与投资的热土。





附录A　比特币“矿工”的一天


在正文中我们描述了“矿工”是传统比特币区块链系统的核心组成部分。“矿工”在为系统创造价值的同时还赚到了钱。下面我们为有志从事“挖矿”行业的读者们演示一下非专业“矿工”是怎么操作的。

钱包

同我们平时所使用的货币一样，我们首先需要通过钱包或者账户来存储我们的钱。对于比特币，我们必须要使用某种形式的比特币钱包来存储相关的数据。

比特币钱包可以让你拥有专属的比特币地址，让你同全世界交易。用你专属的比特币地址可以从其他人那里接收比特币，也可以向其他人支付比特币。就像电子邮件一样，即使在我们离线时也可以接收比特币，而且所有的钱包软件都是相互兼容的。为了避免带来重大的损失，选择好的比特币钱包尤为重要。

比特币钱包有如下几种存储方式，并且各有利弊。



在线钱包

在线钱包可以让你在任何地方都能使用比特币，而且你也不需要花费太多精力保护你的钱包安全。但是，在选择在线钱包服务时必须要慎重，因为你的比特币将存放在那里。

桌面钱包

钱包软件需要安装在你的电脑中，你拥有钱包的完全控制权。当然，你也需要备份、保护自己的比特币。

移动钱包

移动钱包让你可以随身携带比特币。你可以通过移动钱包轻松兑换比特币，还可以在实体商店中通过扫描二维码或使用NFC技术提供的“接触支付”功能轻松实现付款。



下面介绍一款具有代表性的比特币钱包。

Blockchain是一款目前最受欢迎的操作简单的在线钱包，它混合了桌面客户端的功能，提供了更高的安全性，通过存储你的钱包的密钥在浏览器中登录交易。同时其客户端还提供了可以下载和备份你的钱包到你的电脑中的功能，让你的数据安全且不会遗失。

首先我们要登录blockchain的地址：https://blockchain.info/。blockchain.info网站有多种语言支持，也包括汉语在内，不过它并不区分简体中文和繁体中文，而是只有“汉语”——也就是只有简体中文一个选项，不认识简体字的港澳台同胞估计有点不方便了。



在首页上可以看到目前为止最近所生成的比特币的区块数量和每个区块的数据量大小。

我们选择钱包，进入到比特币钱包的主页面，在这里我们可以选择创建新钱包或者登录已有的账户。下面单击【创建自己的免费钱包】按钮。



进入钱包注册页面。



输入邮件信息和密码，确认之后，会进入到如下图所示的页面。



这个页面非常重要，务必要把页面上提示的文字信息保留好，如果未来一旦出现忘记密码的情况，则可以凭此信息找回所有的账户信息，当然也包括最重要的比特币。

继续单击“继续”按钮，又回到了钱包的主页面，这时会发现系统已经为我们自动生成了钱包身份码，然后再输入前面我们设置的密码，就可以登录系统了。



现在在线的比特币钱包就注册完了。同时画面上显示的那一长串字符就是我们未来收发比特币的钱包地址，别人可以通过这个地址给我们发送比特币。

“挖矿”

下面开始我们每天正式的工作——“挖矿”。

当然，目前我们还只是一个刚刚入门的业余“矿工”，手头的工具也很有限，可能只有一台普通的使用多年的组装电脑，幸运的是，这台组装电脑还有一个独立显卡，我们就先用它开始我们第一天的“挖矿”工作。

关于“挖矿”的详细原理这里就不做重复介绍，只需要知道首先我们需要的是选择一个矿池。

下面以bitcoin.cz为例进行说明。

进入mining.bitcoin.cz/home页面进行注册，然后下载“挖矿”工具。



输入用户名、邮箱地址和设定密码注册。

注册完成后，系统会发送确认邮件到注册的邮箱中，这时我们需要进行邮箱确认。在邮箱中的确认邮件上单击激活链接之后，再重新登录系统。这时，我们看到了如下图所示的界面。



下载GUIMiner“挖矿”工具，打开后的主界面如下图所示，然后选择好服务器，输入我们在前面注册的用户名、密码，选择我们要用来“挖矿”的CPUIGPU，此处我们选择的设备是独立的GTX 750显卡，然后单击“开始采矿！”按钮。



开始时，似乎什么都没有发生。



但是48小时以后，账户上似乎出现了什么，没错，我们“挖”到比特币了，当然只有一点点。



在看了以上这个“矿工”手记之后，专业的“矿工”们估计会跳出来对我们“挖矿”过程的非专业性和“挖矿”工具的选择做各种鄙视。不过笔者认为比特币和区块链不是一回事儿，研究比特币和区块链也不等于探讨“挖矿”的技巧。

根据附录A的流程，读者可以设置自己的比特币钱包并且尝试着“挖矿”。





附录B　专业词汇表


Advanced Persistent Threat：即APT，高级的持续攻击。

Alexa网站排名：从流量的角度对网站进行的排名，是互联网上公认的比较公正的一种排名方式。

AML：Anti-money laundering，反洗钱。

Baas：Blockchain as a Service，区块链即服务，为企业提供区块链服务的封装式解决方案。

Bitcoin/比特币：比特币是一种虚拟货币，它不依靠特定的货币机构发行，而是依据特定的算法，通过大量的计算产生。比特币使用整个P2P网络中众多节点构成的分布式数据库来确认并记录所有的交易行为，并使用密码学的设计来确保货币流通各个环节的安全性。

Call option：看涨期权，是指在协议规定的有效期内，协议持有人按规定的价格和数量购进股票的权利。

censorship resistance：无法审查，这是比特币的一个特点。

创世区块（Genesis block）：在比特币区块链系统上的第一个区块被称作创世区块（Genesis block），它是由中本聪创建的。

CDS：Credit Default SWAP，信贷违约互换，Blythe Masters发明的金融产品。

众筹融资（Crowdfunding）：利用网络良好的传播性，向网络投资人募集资金的金融模式。

DAC：Decentralized Autonomous Corporation，去中心化的自治公司。

DACT：Distributed, Autonomous, Contractual和Trackable这四个词的英文首字母。

DAO：Decentralized Autonomous Organization去中心化的自治机构。

DAS：Decentralized Autonomous Society，去中心化的社会群体。

Dapp：Decentralized application，去中心化的应用。

DRM：Digital Rights Management，数字版权管理。

第三方支付：在电子商务企业与银行之间建立一个中立的支付平台，为网上购物提供资金划拨渠道和服务的企业。

对冲基金（hedge fund）：是指通过买空卖空，或者使用金融期货和期权等金融衍生工具以高风险投机为手段并以赢利为目的的金融基金。

Distributed Ledger：分布式分类账本。

DNS：Domain Name System，域名系统。

DTCC：Depository Trust & Clearing Corporation，（美国）存管信托和清算公司。

分布式数据库（Distributed Database）：用计算机网络将物理上分散的多个数据库单元连接起来组成一个逻辑统一的数据库。

Fiat Currency：法币，即法定货币。

Hash：哈希散列，密码学里的经典技术。把任意长度的输入通过哈希算法，变换成固定长度的由字母和数字组成的输出。

Hash/s：缩写H/s，运算性能参数，即每秒能处理的Hash数，100MH/s就是1秒钟能够处理1亿次Hash数。

ICANN：The Internet Corporation for Assigned Names and Numbers，互联网名称与数字地址分配机构。

IDE：Integrated Development Environment，集成开发环境。

IMF：International Monetary Fund，国际货币基金组织。

IOT：Internet of Things，物联网。

机器学习（Machine Learning）：研究计算机怎样模拟或实现人类的学习行为，以获取新的知识或技能，重新组织已有的知识结构使之不断改善自身的性能。

KYC：Know Your Customer，用户身份认证。

Ledger：分类账本。

mBTC, milliBitcoins：Bitcoin的千分之一。当一个比特币可以兑换500美元时，1 mBTC≈0.50美元。

Merkle Tree：默克尔树，是一种二叉树，由一组叶节点、一组中间节点和一个根节点构成。

逆向选择（Adverse Selection）：由于交易双方信息不对称导致市场价格下降，从而产生劣质品驱逐优质品，进而出现市场交易产品平均质量下降的现象。

NASDAQ：National Association of Securities Dealers Automated Quotations，纳斯达克（全国证券交易商自动传报协会）。

P2P技术：一种网络技术，是与客户端／服务器（CS）模式对应的一种网络信息交换方式。

Permissioned ledger：有中心的（分布式）账本。

Pow：Proof of work，工作量证明。

普惠金融：是联合国于“2005年国际小额信贷年”提出的新概念，是指一个能有效为社会所有阶层和群体提供服务的金融体系。

Satoshi: Bitcoin的百万分之一。当一个比特币可以兑换500美元时，1 Satoshi≈0.0005美元。

商业智能（Business Intelligence）：采用数据库或数据仓库技术进行商业信息的收集、集成、分析和报告以帮助做决策的应用与实践系统。

Shared ledger：共享账本，同分布式账本。

Digital Signature：数字签名，一个可以证明所有权的数学机制。

Smart contract：同智能合约。

SME：Small and Medium-sized Enterprises，中小企业。

数据挖掘（Data Mining）：有组织、有目的地收集数据，通过分析数据使之成为信息，从而从大量数据中寻找潜在规律以形成规则或知识的技术。

算力：为了找出新的比特币，只能通过计算机随机的Hash碰撞，而一个挖矿机每秒钟能做多少次Hash碰撞，就是算力。

虚拟货币：Virtual Currency，价值的数字体现，是由私有的开发者们发行的，并且有自己的面额。

Unpermissioned ledger：无中心的（分布式）账本。

VIN码：Vehicle Identification Number，车辆识别码。

征信：是通过独立的第三方机构为个人建立的信用档案，采集、记录其与信用相关的信息，并提供信用数据信息服务的一种活动。

征信机构：能够收集、整理每个人和企业信用度的机构就是征信机构。

智能合约：能够执行合约条款的计算机化的交易协议。





附录C　参考网站一览




网址 说明

http://www.8btc.com 巴比特，比特币和区块链的开放研究平台

http://8btc.com/thread-22624-1-1.html 小蚁白皮书

https://www.ascribe.io/ 互联网初创艺术品公司Ascribe的网址

http://szabo.best.vwh.net/index.html Nick Szabo论文集

https://en.bitcoin.it/wiki 关于比特币的维基百科

http://www.bitcoin.org 比特币官方网站

http://www.bitett.com 比特头条

https://bitcoin.org/bitcoin.pdf 中本聪关于建立比特币的论文

http://www.bitcoin86.com 比特币资讯网，比特币相关信息汇集中心

https://blockchain.info/ 比特币在线钱包，同时也是账户信息查询网站

https://blockexplorer.com/ 比特币区块的查询网站

http://blockmeta.com 巴比特社区旗下的数据服务产品网站

http://www.bloomberg.com Bloomberg彭博资讯官方网站

http://ccn.la 重定向到https://www.cryptocoinsnews.com/，关于比特币的资讯网站

http://coinmarketcap.com/ 展示虚拟货币市场规模的网站

http://www.csdn.net CSDN，技术者开发园地

http://dcebrief.com/ 数字货币资讯网站

http://ethfans.org/ 中文的以太坊粉丝网站，区块链技术研究平台

https://www.ethereum.org/ 以太坊，一个开源的软件平台网站

http://fiatleak.com 展示比特币实时流向的网站

http://www.fico.com 美国信用调查公司FICO的官方网站

http://www.forbes.com/ 福布斯中文网是服务于高端商业群体的财经资讯门户、评论和内容网站

http://www.freecreditscore.com/ 美国检查信用分值的网站

http://www.ft.com Financial Times官方网站（金融时报）

http://www.gallup.com/ 盖洛普咨询公司官方网站

https://github.com/bitcoin/bitcoin 区块链技术源码共享网址

http://www2.goldmansachs.com/ Goldman Sachs公司官方网站（高盛）

http://finance.ifeng.com/ 凤凰网的财经频道

http://www.iresearch.com.cn 艾瑞咨询公司官方网站

http://http.www.lazooz.org La'Zooz，一个共乘的应用程序

https://www.lendingclub.com/ 美国著名的P2P借贷公司网站

https://www.openchain.org/ Openchain的首页

http://www.prosper.com/ 美国著名的P2P借贷公司网站

http://setiathome.ssl.berkeley.edu/ 美国加州伯克利大学的SETI@home项目官方网站

http://www.simafore.com/ 一家做数据分析的公司，Sima Fore的官方网站

http://spendbitcoins.com 显示所有支持比特币消费地点的网站

http://ujomusic.com/ 一家基于区块链的音乐网站

http://www.weiyangx.com 一家互联网金融媒体网站

http://www.worldbank.org 世界银行的官方网站

http://finance.yahoo.com/ 雅虎的金融网站

http://www.zopa.com/ 全球第一家P2P借贷公司网站





附录D　参考文献一览


Meiklejohn S．et al，A fistful of bitcoins: characterizing payments among men with no names，Internet Measurement Conference 2013，pages 127-140

Satoshi Nakamoto，Bitcoin: A Peer-to-Peer Electronic CashSystem，2008

Badev, A and M．Chen，Bitcoin: Technical Background and Data Analysis，Finance and Economics Discussion Series，2014-104，Board of Governors of the Federal Reserve System，December 2014

Melanie Swan，Blockchain: Blueprint for a New Economy, O'Reilly, 2015

George Danezis，Sarah Meiklejohn，Centrally Banked Cryptocurrencies，IACR Cryptology ePrint Archive 2015：502 （2015）

Lessig L.，Code and other laws of cyberspace，Version 2.0，New York：Basic Books，2006

Mark Jeffery，Data-Driven Marketing: The 15 Metrics Everyone in Marketing Should Know，Wiley，2010

Laurie B.：Decentralised currencies are probably impossible （but let's at least make them efficient），2011

UK Government Office for Science，Distributed Ledger Technology: beyond block chain, A report by the UK Government Chief Scientific Adviser, 2016

DTCC，Embracing disruption: Tapping the potential of distributed ledgers to improve the post-trade landscape, 2016

Adam Back, Matt Corallo，Luke Dashjr, Mark Friedenbach，Gregory Maxwell，Andrew Miller, Andrew Poelstra, Jorge Timón，and Pieter Wuille，Enabling Blockchain Innovations with Pegged Sidechains，2014

Mike Goldin，Ethereum: Bitcoin Plus Everything, https://medium.com/@ConsenSys/ethereum-bitcoin-plus-everything-a506dc780106, Jan，2016

Richard Gendal Brown，Identity and The Blockchain: Key Questions We Need to Solve--What are the architecturally-significant use-cases for identity？ December, 2014

Brynjolfsson，Erik, Hitt，Lorin M．and Kim，Heekyung Hellen，Strength in Numbers: How Does Data-Driven Decisionmaking Affect Firm Performance？ April 22，2011

Carlota Perez, Technological Revolutions and Financial Capital: The Dynamics of Bubbles and Golden Ages，UK: Edward Elgar Publishing Limited，2002

Dong He et al.，Virtual Currencies and Beyond: Initial Considerations，IMF, Jan．2016

Tapscott，D．and A．D．Williams，Wikinomics: How Mass Collaboration Changes Everything, Penguin Group，2008





推荐语


（推荐语排名不分先后。）

很高兴又一次读到我们协会CIO谭磊同学的专著。区块链技术如果能够在物联网领域得到充分的应用，则可以为中国的制造业提供很多新的机会。期待看到2016年区块链的蓬勃发展。

——中国工业设计协会会长　刘宁

在我们这个互联网技术圈子里，谭磊同学是最能写东西的。在作家圈子里，谭磊同学是最懂技术的。很高兴看到谭磊同学的又一本新作。

——中国互联网技术精英俱乐部iTechClub理事长，1024学院创始人　吴华鹏

今天的区块链，如同20世纪90年代时的互联网，和2000年前后的移动互联网。它代表了从地平线上扑面而来的未来。作为支撑共享经济和物联网时代的核心基础设施，区块链技术和协议架构在金融行业的影响仅仅是一切的开始。在我们的职业生涯之内，区块链和它日益丰富的应用场景，将会从根本上改变我们对财产、经济乃至社会的认知。恭喜谭磊和陈刚在理念上为大家立起了一个风向标！

——顺丰恒通支付CEO，支付宝前CSO　舒明

金融的本质是风控，风控的核心是信用的建立。区块链可通过程序化记录、储存、传递、核实、分析信息数据，从而形成信用。相比传统的信用形成方式，区块链可省去大量人力成本、中介成本，其所记录的信息更为完整并难以造假。比特币只是区块链1.0，而智能合约是2.0，区块链的较高应用是对应到物联网，做到实时确权。

区块链所涉及的“去中心化”并不意味着没有中心，而是分中心，每个人成为自己的中心。金融脱媒就是一个去中心，从间接金融到直接金融，最后到自金融，也叫人人金融。区块链将是未来金融体系中不可或缺的基础设施建设或者Protocol（协议），也一定是互联网金融的下一个风口。

在可预见的未来，区块链深刻地影响着包括金融业在内的多个行业，制造跨领域合作机会，提高资源配置效率，助力产业转型升级。对技术的积极应对或是被动升级，也将导致各行业内部的重新洗牌。

本书高度概括了区块链的本质，深入浅出地描述了区块链在各领域的应用，让读者准确地了解它的价值和意义。

——中融信（深圳）前海金融信息服务有限公司董事长兼CEO，贵州应收账款交易中心董事长，天使投资人　周艺

古往今来，从技术到价值的历程中都闪烁着人类的三种可贵精神：乐观、好奇、执着。

本书从技术和应用两个层面对区块链进行了详细的描述和广泛的探讨，字里行间充满了对于新技术可能创造出的新价值的向往和期待。

探索新事物需要勇气和坚持，如果有同行者，或许可以少一些艰难和孤独。

阅读本书，不仅可以获得信息，分享洞见，也会感受到作者探索的快乐，并为之鼓舞。

——波士顿咨询公司（BCG）合伙人兼董事总经理　张越

区块链是一个从2015年起进入大众视野的一项互联网技术，它对于隐私的保护和安全性是比较吸引我的。我一直也在密切关注区块链技术在健康医疗领域的潜在应用。Raymond同学的这本书来得正是时候。

——复星医药互联网业务发展部总经理　黄邦瑜

本书系统地介绍了区块链技术的核心理念与技术细节，并揭示了该技术在不同领域的应用前景，是我读过的有关区块链技术最全面、最好的书籍。本人从事互联网金融和支付结算领域多年，书中对于区块链技术在金融领域颠覆性创新的分析，让我能够重新认识金融的本质，并启发和驱动我深入思考如何利用新技术去优化和改变传统的固有体系，从而让我们的世界变得更加美好。这是本书带给我的最大价值。相信不同的读者一定能在书中获得启发，找到灵感，以全新的视角审视自己的专业领域，使新旧思想碰撞出科技创新的火花。

——顺丰金融服务事业群CTO　柯晓琦

区块链“去中心化”的特性及其广泛应用，将颠覆我们现在所认知的互联网世界，比特币只是起点，区块链技术才是海面下巨大的冰山。相信在中国发展区块链的历程上，陈刚与谭磊合著的这本《区块链2.0》必当取得它的一席之地。

——beBit （倍比拓）咨询公司大中华区总经理　陈鼎文

连夜拜读了谭总即将出版的《区块链2.0》手稿。区块链技术的爆发，将颠覆现有世界的互联网治理规则，预示着互联网信息技术的退幕，IT的概念也随之消失。区块链是肩负着创造“完美世界”使命的技术，承载着自由和平等的梦想，是万物网的存在基因，推动人类社会文明更高级的进化。

在金融领域，区块链通过算法式信任的实现，重塑交易结构，重塑信任；是解决金融风控，降低交易成本的终极金融科技模式；实现“现在即未来”，让相信未来成为一种能力。技术的突破带来了文明的进化，将使人类进入人机文明的共存。算法与程序主导的新文明让人类进入一段忧伤的时光，人类进入强人工智能的世界，万物相联，一切的价值资产皆为代码，以算法存在于万物之中。桌面互联网和移动互联网二十多年的光辉好景已经迎来夕阳的最后日照。科技的进步将我们带入物物相联的新世界。这个全新的智能世界将由数据和算法驱动。金融科技是商业社会变革的基础力量，区块链技术的去中心化思想在理论体系上逐渐成熟，接下来就是商业场景的应用。

我在感叹技术的伟大力量的同时，也对谭总及诸位专家在春节期间仍然不辞辛劳的敬业精神和毅力非常敬佩。历史总是由极少数人默默地推动和创造的！

这是第一本关于区块链研究与商业应用的书。预祝谭总成功！

——中国投资协会创业与风险投资专业委员会副秘书长　罗翔文

Raymond是为数不多的真正懂大数据的专家。在这本关于区块链的专著中，他所表述的观点是我在其他关于区块链的文章中没有看到过的。

——蚂蚁金服—支付宝CDO　李津

要深刻理解比特币，就必须要了解比特币的核心——区块链技术。目前这个领域的书籍非常少，谭老师的新书及时填补了这个空白。而且还结合了大量的金融知识进行展开，起于比特币而不止于此，推荐给所有想从比特币中触摸到新金融时代的人阅读。

——迅雷科技副总裁　刘智聪

信任是数字经济的基石，也将是区块链技术对金融业带来的最大红利。若能将区块链与大数据、混合云有机结合，新金融将很有可能真正实现对传统金融的弯道超车。

这本及时、应景的专业著作并没有高高在上，而是通过生动的语言、丰富的案例把区块链与各行各业的普通读者连接起来。这也许正是作者的初心：让产业装上区块链的翅膀，然后走上风口。就像当年的“互联网＋”那样，“区块链＋”可能会是转型者与创业者的最佳攻略。

——泰然金融集团副总裁　姜宏生

虽然目前区块链还处于试验阶段，但是我们无法忽视它可能给未来社会带来的巨大变革。很快，区块链将成为金融行业中最常见的一种底层数据处理技术，并在众多领域都表现出广阔的应用前景。《区块链2.0》应该是目前最系统、最专业且通俗易懂的介绍区块链技术的一本书，值得一读。

——比特币交易平台“火币网”联合创始人董事　杜均

这是一本区块链的教科书，谭磊和陈刚将区块链这一金融科技创新概念结合应用场景、大数据、征信、风控做了前瞻性的诠释。

——阳光金服董事长、新三板在线CEO　石义强

互联网和金融这两者有一个显著的共同基因，就是数据。而区块链技术恰是一门数据的技术。区块链打破传统、重塑信任，更难得的是它与各行业有着广阔的应用空间，尤其对于互联网金融公司未来竞争力的探索，有深远的启发。

——翼勋金融联合创始人、总经理　王晖

跟Raymond第一次见面时，我刚从东京回国不久，算起来已经8年了。有幸跟Raymond共事一段时间，受益匪浅。之后拜读了他的《互联网金融》《数据掘金》等大作。Raymond对技术的热爱与思想的高度是我很钦佩的，此次这本《区块链2.0》涉及的领域与技术也是我热衷参与的，期间我与一些海外的小伙伴们聊过多次，基本上来说，这本书的首创地位是毋庸置疑，书中展现的应用场景亦令人神往。

我在做区块链技术研究期间与Raymond多次交流，也得到了很多帮助。区块链能做很多事情，现阶段也存在很多障碍和问题，若一切都已成型，都已完美商用，那我等存在价值何在？解决问题，让其不断浴火重生，才是我辈神向往之的景象。

愿与Raymond、与诸君携手！

——青岛瑞盟兄弟CEO　栾绍春

我们服务过的大量广告客户呈现明显的垂直行业化和移动电商化特征，所以我们提供的核心竞争力是数据化服务，我很看好区块链在我们客户服务中的应用。

——索未科技联合创始人　周铮

Raymond非常敏锐，无论是在技术上，还是在商业上，常常能最先找到最新的发展方向和趋势。读他的书，就是跟上的最好方式。

——互融资本创始合伙人　程励箭

春节期间有幸收到谭磊哥新作的邀约。“区块链”是挺前端的概念，对此，我一直持支持观点。区块链技术使得DAC成为可能。DAC是一种能够从根本上颠覆人类社会组织模式的东西。我相信它对社会的影响，相信它会超过工业革命，成为互联网给世界带来的最为深刻的变革。至此，恭祝谭磊哥又一新作问世。

——梅菲尔德集团中国区独立合伙人，秀域集团CSO，天使投资人　火山

春节期间与“Jerry大叔”互相通过微信问候，得知这位勤奋的金融大叔在假期中还在奋笔疾书，再一问才知道大作即将问世，这绝对是大家所说的“互联网速度”，两个月前才说起让Jerry能否找时间，给大家普及一下比特币所运用的“区块链”技术到底是什么。

如果说2013年是“互联网金融”的元年，那么当你看完这本书后就会理解2016年绝对会是“区块链”应用的元年。“区块链技术”也将是“互联网金融”真正往“技术金融”进化的基石。

两位大叔最让我钦佩之处，在于他们用最通俗易懂的文字，将复杂的区块链技术生动地展示在读者面前，同时大量的场景应用案例又启发读者对未来无限的遐想。

所谓“大道至简”，正是两位作者深厚的技术背景，加之长期的金融从业底蕴，才使我们有幸以此书叩开“区块链”这一代表未来的技术的大门。

下面从本书中摘录一段深深吸引我的原文，开启我们的未来之门：

“在2016年1月18日，陈刚同学曾经在其微信公众号里写了这样的一段文字：

某一天，你看到一套别墅作为数字资产被登记在某个区块上，在你搜索这套不动产资产信息的时候，区块和智能全息投影设备连接，一切在可视化地立体呈现。你戴上VR头盔，已经如别墅主人一样体验了这套别墅带给你的体验。你仿佛已经在虚拟现实的世界里，坐在主人卧室里柔软的沙发中，海风，向你扑面而来。

你登录一个智能设备，用视网膜扫描（来自于区块链上的）一串符号，即可收到来自美国关于迈阿密海边别墅交易成功的电子确认函。一切交易轻松完成，交易数据被储存在区块上。

随后你在（基于区块链的）票务网站上订购了往返美国性价比极高的头等舱机票。

一周后，你在别墅前用视网膜扫描大门密码，门打开了。”

——添米财富创始人、CEO　张祺

在过去的20年，随着互联网技术的快速发展与全行业数据的互联互通，各个产业都实现了经营与运作的全面科技变革，但金融交易领域由于受到了保守的集中性风控因素的影响，颠覆性的变革进展缓慢，并逐渐成为各个产业科技化发展的瓶颈。

区块链技术的诞生，实现了从集中性金融管理到分散式数据风控管理的变革，这不仅给金融行业带来根本性的变革，同时也将加快其他各个产业领域交易结算方式的变化，以应对数据科技时代更加快速、高效和准确的经营管理，因此称它为划时代的金融科技创新并不为过。

本书的作者一直专注于金融领域新科技的研究和应用，本书对区块链这个革新性技术进行了详尽的阐述，是当前这个领域最完整的参考书籍，无论是金融从业者还是科技领域的创新者，阅读本书一定会受益匪浅。

——易钱庄联合创始人　谢飞

区块链拥有改变世界的力量，它也是互联网金融的基础和价值核心！对众筹行业来说，众筹和区块链很好诠释了去中心化和共享经济。对涉及的股权众筹、债券众筹、权益众筹、支付环节、资产管理、众筹大数据等，都会起到更重要和颠覆性的作用。

我们可能预见到的是，以区块链为代表的金融科技对于传统金融和全球货币体系带来的冲击会更大。反复翻阅此书，能感受到与智者交流的创新和远见！

“区块链的春天来了”，你准备好了吗？

——中筹网金CEO　叶伟杰博士

对区块链技术的讨论主要来自于数字货币的衍生，而比特币是一个最佳的应用场景。在未来，数字货币是全球金融发展的趋势，不可阻挡，我国也在着手研究，在最近《财新周刊》中关于周小川的专访中也着重提到了这一点。但我们要认识到，区块链不等于比特币（对于颠覆法币这件事情目前在国内也行不通，也轮不到我们来干），它是一个以去中心化为核心理念的技术，我们真正要理解的是它的底层算法和设计理念。对金融行业中的从业者而言，一定要记住的是金融＝风控，所以区块链对于征信、风控领域的应用将是未来的热点。而具体到互联网金融，数据是核心，真正的创新来源于这里。例如对第三方支付而言，通过减少中心的荷载，降低整个系统的记账成本和核算成本，但同时能保证正确性，这种区块链分布式记账理念是目前最被认可的商业应用案例。区块链的本质是一种科技，它改变的是世界对于信任、对于规则的定义，而这些是金融的根、金融的基础，所以区块链的应用和颠覆也将最先从金融领域开始，这是趋势，不可逆。但是我们也应该深刻意识到区块链应用的范围不局限于金融领域，其在健康医疗、食品安全、能源电力、房地产、艺术品等各领域都有商业应用前景。综上所述，结合我们公司目前的业务发展，区块链在第三方支付系统中的应用是目前在我国金融生态土壤里最有可能结果的商业案例。这类技术的研究开发不仅能理论上解放我们公司系统的荷载，提高经济效益，同时能广泛商业化运用在各大支付公司、商业银行中。进一步，可能替代目前我国现有的中央集权的支付结算体系。同时，在我们公司目前拥有的数据基础上去做一些风控类的区块链商业应用，不失为第二步选择。本书内容翔实饱满，涵盖了各行业现在对区块链技术的理解，值得推荐！

——WeX微汇金融副总裁　何俊

微软在意的是生态圈，我们希望能有更多的软件供应商在微软的Azure平台之上提供服务。BaaS提供的是基于区块链的服务，微软会把底层的区块链基础打好。很喜欢Raymond同学写的这本关于区块链的书，其深入浅出地把一个复杂的概念讲得如此简单。

——微软云合作伙伴总监Alfred Wang

谭老师的这本《区块链2.0》令人耳目一新。一气读完之后，我瞬间就理解了区块链的概念。这是一本值得一读的好书。

——倚康信息总经理　吴晓帆

非常感谢谭磊和陈刚二位老师再次成功扮演“技术布道者”角色。本书的价值不仅限于让我们全面理解“什么是区块链及其技术”，更为难得的是，它为我们开启了行业最佳实践的“无门之门”。作为在线游戏行业的从业者，我从本书中获得了很大的启发，相信未来区块链技术在游戏道具交易等核心场景中将为玩家提供更安全、放心的服务。

——腾讯互娱运营部总监　涂彦

2015年，全国医院门诊就诊量超过80亿人次，陪同人员超过60亿人次，医疗健康行业迎来了一个大数据爆发时代，区块链作为核心数据技术也将会迎来一个高爆发时代。

——禾连健康数据服务总监　李嘉骅

在大量的传统行业完成互联网化、电商化的过程中，困难最大的是如何搭建好数据平台，而区块链技术的出现将极大化解这个问题。谭磊和陈刚的这本书值得一读。

——大度营销管理咨询CEO　周彤

区块链基础技术起源于比特币商业化过程，但伴随着人类对数字商业价值的不断探索和深耕，我们越来越发现区块链能广泛应用于科学支配数字资源。很荣幸成为《区块链2.0》的首批读者，更有幸受邀为其写推荐语。感谢本书的两位作者对区块链做出了系统性的解析，让读者能从深入浅出的字里行间发现“区块链”远不止“技术”标签这么简单。相反，“区块链”代表的是未来云科技与大数据商业应用泛众化的广阔商业前景。将“区块链”简单地等同于互联网金融科技显然是片面的，“区块链”的方法论与实战探索正在快速驱动更多的商业利益，尽管这种商业利益也许并不会迅速被消费者所感知，而实质上却无所不在，开始向互联网数字商业全面渗透。感谢两位作者，为从业者带来如此精彩的诠释，相信《区块链2.0》将帮助互联网与人类变得更好，带来更具颠覆性的产业升级空间！

——牵牛信息科技总裁／联合创始人　袁俊

我很佩服Raymond对于互联网金融的深度理解。之前他为顺丰金融的供应链建设提出了非常棒的指导意见和执行策略。期待Raymond在区块链领域大展宏图。

——顺丰金融供应链金融前负责人　张慧

通过比特币，我们看到了区块链应用的巨大能量。谭兄的扛鼎之作揭开区块链神秘的去中心化分布式底层结构，告诉我们区块链建立人脑智能和机器智能的全新接口和共享将深刻影响人类的未来。区块链2.0时代已经到来，而你我正身处在其中！

——聚秀资本董事总经理　武夫

谭老师和陈老师的这本书把一个新的概念描述得非常清楚，让我们看到了区块链技术在未来的发展方向，以及这个技术可以在各个领域中的应用。这本书内容翔实、逻辑清晰，是一本值得一读的好书。

——城云科技中小企业云事业部总经理　吴仓杰

谭磊老师的每一本书不仅给我知识上的启发，而且给我的思想上带来了无限遐想的空间。我们正处于科技改变世界的激动人心的时代，谭老师论文般严谨的行文风格帮助我们对区块链如何改变金融格局产生新的认识。

——IBM中国区金融行业高级经理　吴炜



Table of Contents

前折页

书名页

版权页

总序　区块链与互联网秩序

推荐序一　金融的天　信任的石来补

推荐序二　对未知世界保持谨慎的狂热

推荐序三　金融创新众生相背后的不变初心

序言　互联网金融第二弹

前言　金融大叔的梦想

目录

引言

第1章　从理想到现实，区块链的前世今生

1.1　区块链究竟是什么



寻找中本聪





区块链的DACT特性





智能合约





1.2　以比特币为基石的区块链1.0模式



比特币是最成功的区块链应用





比特币和法币





1.3　辐射无限可能的区块链2.0



区块链应用不等于比特币的应用





区块链可以应用的行业和场景





区块链在中国





区块链的春天





1.4　区块链大事记



1.5　本书内容



第2章　区块链技术解读

2.1　区块链的技术原理



账户地址的产生方式





区块链的算法和设计





区块组成区块链的方式





“矿工”，区块链系统上的核心





2.2　点到点网络和区块链



P2P技术解析





中心化区块链的实现方式





区块链是分布式存储





2.3　智能合约的技术实现



案例：看涨期权的智能合约





2.4　区块链系统的安全和隐私



2.5　区块链资源一览



给程序员的资源





区块链的社区和信息资源





第3章　区块链在虚拟货币领域的应用

3.1　从加密货币到数字货币



3.2　比特币背后的0与1



比特币区块链的原理描述简介





交易费





3.3　比特币001？比特币002？



3.4　是投资还是投机？



3.5　不得不提的Mt.Gox



第4章　数据驱动，区块链与数据挖掘

4.1　大数据时代



价值，大数据的第四个“V”





数据挖掘过程和应用





4.2　互联网金融，用数据说话



金融业的大数据挖掘





数据是做一切决定的前提





商业智能





4.3　区块链系统上的数据



区块链的仪表盘





区块链系统的数据瓶颈





从PaaS到BaaS，区块链和云计算





借力于区块链的DACT特性





大数据对于区块链系统的安全性防护





4.4　区块链和大数据



区块链的大数据化





大数据的区块链化





第5章　金融世界中的信用和征信

5.1　征信，躺着赚钱的机会



5.2　信用为王，数据为本



个人征信





企业征信





5.3　用区块链改变征信体系



案例：基于区块链的黑名单





案例：基于区块链的白名单





第6章　金融的风险控制和安全

6.1　风控和征信



6.2　风险就在于小概率事件会发生



6.3　区块链是解决风控系统问题的答案



6.4　用区块链来控制风险



控制操作风险





控制欺诈





控制逆向选择和道德风险





案例：区块链的可追溯性在钻石追踪领域的应用





第7章　金融领域中的其他区块链应用

7.1　超级账本



账本和分布式账本





无中心和有中心的分布式账本





半开放式的分布式账本





7.2　可交易的金融产品



案例：智能合约在区块链保险中的应用





7.3　数字化的资产管理



案例：汽车和区块链





案例：区块链为房地产登记提供解决方案





案例：小蚁——基于区块链技术的资产数字化系统





案例：区块链在艺术品领域的应用





7.4　第三方支付和跨境支付



第8章　金融领域之外的区块链应用

8.1　区块链2.0技术的价值



8.2　区块链的五十个应用场景



共享经济和区块链





案例：La'Zooz，共享经济的一个尝试





案例：域名服务





案例：音乐版权与区块链智能合约的不谋而合





8.3　物联网的应用



案例：制造业和区块链





案例：基于区块链的健康档案





8.4　OpenChain——区块链技术思想应用的典型案例



第9章　区块链技术的预测和展望

附录A　比特币“矿工”的一天

附录B　专业词汇表

附录C　参考网站一览

附录D　参考文献一览

推荐语





